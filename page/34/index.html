
 <!DOCTYPE HTML>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
  
    <title>Almost</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="Stevin">
    

    
    <meta property="og:type" content="website">
<meta property="og:title" content="Almost">
<meta property="og:url" content="http://yoursite.com/page/34/index.html">
<meta property="og:site_name" content="Almost">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Almost">

    
    <link rel="alternative" href="/atom.xml" title="Almost" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
</head>
</html>
  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="Almost" title="Almost"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Almost">Almost</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="Search" />
						<input type="hidden" name="q" value="site:yoursite.com">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2018/09/06/Py003-01-04组合/" title="Py003-01-04组合" itemprop="url">Py003-01-04组合</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Stevin" target="_blank" itemprop="author">Stevin</a>
		
  <p class="article-time">
    <time datetime="2018-09-06T14:46:35.000Z" itemprop="datePublished"> Published 2018-09-06</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>继承是类与类之间的关系</p>
<h3 id="组合"><a href="#组合" class="headerlink" title="组合"></a>组合</h3><blockquote>
<p>先看这样一段代码  老师和学生</p>
</blockquote>
<ul>
<li>有共用的属性 school</li>
<li>有重复的属性 name,age,sex</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">class Teacher:</span><br><span class="line">    school = &apos;中科院&apos;</span><br><span class="line"></span><br><span class="line">    def __init__(self,name,age,sex,level,salary):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line">        self.sex = sex</span><br><span class="line">        </span><br><span class="line">        self.level = level</span><br><span class="line">        self.salary = salary</span><br><span class="line"></span><br><span class="line">    def teach(self):</span><br><span class="line">        print(&apos;%s is teaching&apos;%self.name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Student:</span><br><span class="line">    school = &apos;中科院&apos;</span><br><span class="line">    def __init__(self,name,age,sex,classname):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line">        self.sex = sex</span><br><span class="line"></span><br><span class="line">        self.classname = classname</span><br><span class="line"></span><br><span class="line">    def learn(self):</span><br><span class="line">        print(&apos;%s is learning&apos;%self.name)</span><br></pre></td></tr></table></figure>
<blockquote>
<h4 id="提取公共"><a href="#提取公共" class="headerlink" title="提取公共"></a>提取公共</h4></blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">class People:</span><br><span class="line">    school = &apos;中科院&apos;</span><br><span class="line">    def __init__(self, name, age, sex):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line">        self.sex = sex</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Teacher(People):</span><br><span class="line">    def __init__(self,name,age,sex,level,salary):</span><br><span class="line">        super().__init__(name,age,sex)</span><br><span class="line">        self.level = level</span><br><span class="line">        self.salary = salary</span><br><span class="line"></span><br><span class="line">    def teach(self):</span><br><span class="line">        print(&apos;%s is teaching&apos;%self.name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Student(People):</span><br><span class="line">    def __init__(self,name,age,sex,classname):</span><br><span class="line">        super().__init__(name, age, sex)</span><br><span class="line">        self.classname = classname</span><br><span class="line"></span><br><span class="line">    def learn(self):</span><br><span class="line">        print(&apos;%s is learning&apos;%self.name)</span><br></pre></td></tr></table></figure>
<blockquote>
<h4 id="老师有课程，如果都教-python呢？"><a href="#老师有课程，如果都教-python呢？" class="headerlink" title="老师有课程，如果都教 python呢？"></a>老师有课程，如果都教 python呢？</h4></blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">class Teacher(People):</span><br><span class="line">    def __init__(self,name,age,sex,level,salary,course_name,course_price,course_period):</span><br><span class="line">        super().__init__(name,age,sex)</span><br><span class="line">        self.level = level</span><br><span class="line">        self.salary = salary</span><br><span class="line">        self.course_name = course_name</span><br><span class="line">        self.course_price = course_price</span><br><span class="line">        self.course_period = course_period</span><br><span class="line"></span><br><span class="line"># 这样就又重复了 俩个老师都教 python</span><br><span class="line">t1 = Teacher(&apos;阮老师&apos;,49,&apos;man&apos;,10,3000,&apos;python&apos;,30000,&apos;半年&apos;)</span><br><span class="line">t2 = Teacher(&apos;廖雪峰&apos;,59,&apos;man&apos;,10,3000,&apos;python&apos;,30000,&apos;半年&apos;)</span><br></pre></td></tr></table></figure>
<blockquote>
<h4 id="继续提取课程-类"><a href="#继续提取课程-类" class="headerlink" title="继续提取课程 类"></a>继续提取课程 类</h4></blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">class Course:</span><br><span class="line">    def __init__(self,course_name,course_price,course_period):</span><br><span class="line">        self.course_name = course_name</span><br><span class="line">        self.course_price = course_price</span><br><span class="line">        self.course_period = course_period</span><br><span class="line"></span><br><span class="line">python = Course(&apos;python&apos;,30000,&apos;半年&apos;)</span><br><span class="line"></span><br><span class="line">此时老师和课程的关系？</span><br></pre></td></tr></table></figure>
<ul>
<li>继承的关系是？——什么是什么</li>
<li>组合呢？——什么有什么  如：老师有课程 学生有课程</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">t1 = Teacher(&apos;阮老师&apos;,49,&apos;man&apos;,10,3000)</span><br><span class="line">t2 = Teacher(&apos;廖雪峰&apos;,59,&apos;man&apos;,10,3000)   </span><br><span class="line"></span><br><span class="line">t1.course = python</span><br><span class="line">t2.course = python</span><br><span class="line"></span><br><span class="line"># 访问t1/t2老师的课程名称</span><br><span class="line">t1.course.course_name</span><br><span class="line">t2.course.course_name</span><br><span class="line"></span><br><span class="line">这种方式不是继承而是组合</span><br></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/M03/">M03</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2018/09/06/Py003-01-03子类使用父类属性和方法/" title="Py003-01-03子类使用父类属性和方法" itemprop="url">Py003-01-03子类使用父类属性和方法</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Stevin" target="_blank" itemprop="author">Stevin</a>
		
  <p class="article-time">
    <time datetime="2018-09-06T13:52:45.000Z" itemprop="datePublished"> Published 2018-09-06</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="子类使用父类属性和方法"><a href="#子类使用父类属性和方法" class="headerlink" title="子类使用父类属性和方法"></a>子类使用父类属性和方法</h3><blockquote>
<h4 id="指名道姓方式-不依赖继承"><a href="#指名道姓方式-不依赖继承" class="headerlink" title="指名道姓方式(不依赖继承)"></a>指名道姓方式(不依赖继承)</h4></blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">class Hero:</span><br><span class="line">    def __init__(self, nickname, life_value, aggresivity):</span><br><span class="line">        self.nickname = nickname</span><br><span class="line">        self.life_value = life_value</span><br><span class="line">        self.aggresivity = aggresivity</span><br><span class="line"></span><br><span class="line">    def attack(self, enemy):</span><br><span class="line">        enemy.life_value = self.aggresivity</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class AX(Hero):</span><br><span class="line">    camp = &apos;斧王&apos;</span><br><span class="line"></span><br><span class="line">    def attack(self, enemy):</span><br><span class="line">        Hero.attack(self,enemy)</span><br><span class="line">        print(&apos;from Garen Class&apos;)</span><br><span class="line"></span><br><span class="line">ax = AX(&apos;axe&apos;,100,50)</span><br><span class="line">enemy = Hero(&apos;xxx&apos;,100,40)</span><br><span class="line">ax.attack(enemy) # 50</span><br></pre></td></tr></table></figure>
<blockquote>
<h4 id="子类想要个武器"><a href="#子类想要个武器" class="headerlink" title="子类想要个武器"></a>子类想要个武器</h4></blockquote>
<p>很重复的写法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">class AX(Hero):</span><br><span class="line">    camp = &apos;斧王&apos;</span><br><span class="line">    def __init__(self, nickname, life_value, aggresivity,weapon):</span><br><span class="line">        self.nickname = nickname</span><br><span class="line">        self.life_value = life_value</span><br><span class="line">        self.aggresivity = aggresivity</span><br><span class="line">        self.weapon = weapon</span><br><span class="line">    def attack(self, enemy):</span><br><span class="line">        Hero.attack(self,enemy)</span><br><span class="line">        print(&apos;from Garen Class&apos;)</span><br><span class="line"></span><br><span class="line">ax = AX(&apos;axe&apos;,100,50,&apos;金箍棒&apos;)</span><br></pre></td></tr></table></figure>
<p>继续指名道姓</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 子类有武器 指名道姓</span><br><span class="line">class AX(Hero):</span><br><span class="line">    camp = &apos;斧王&apos;</span><br><span class="line">    def __init__(self, nickname, life_value, aggresivity,weapon):</span><br><span class="line">        Hero.__init__(self, nickname, life_value, aggresivity)</span><br><span class="line">        self.weapon = weapon</span><br><span class="line">    def attack(self, enemy):</span><br><span class="line">        Hero.attack(self,enemy)</span><br><span class="line">        print(&apos;from Garen Class&apos;)</span><br><span class="line"></span><br><span class="line">ax = AX(&apos;axe&apos;,100,50,&apos;金箍棒&apos;)</span><br><span class="line">print(ax.__dict__)</span><br></pre></td></tr></table></figure>
<h4 id="在子类派生出的新的方法中重用父类的方法，有两种方式"><a href="#在子类派生出的新的方法中重用父类的方法，有两种方式" class="headerlink" title="在子类派生出的新的方法中重用父类的方法，有两种方式"></a>在子类派生出的新的方法中重用父类的方法，有两种方式</h4><ul>
<li>指名道姓(不依赖继承)</li>
<li>super() (依赖继承)</li>
</ul>
<blockquote>
<p>调用方法</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">class AX(Hero):</span><br><span class="line">    camp = &apos;斧王&apos;</span><br><span class="line">    def attack(self, enemy):</span><br><span class="line">        # Hero.attack(self,enemy)</span><br><span class="line">        super(AX,self).attack(enemy)</span><br><span class="line">        print(&apos;from Garen Class&apos;)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>使用父类的初始化方法</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># super</span><br><span class="line">class AX(Hero):</span><br><span class="line">    camp = &apos;斧王&apos;</span><br><span class="line">    def __init__(self, nickname, life_value, aggresivity,weapon):</span><br><span class="line">        # 指名道姓</span><br><span class="line">        # Hero.__init__(self, nickname, life_value, aggresivity)</span><br><span class="line">        # python2中</span><br><span class="line">        super(AX,self).__init__(nickname, life_value, aggresivity) </span><br><span class="line">        # python3</span><br><span class="line">        super().__init__(nickname, life_value, aggresivity) </span><br><span class="line">        self.weapon = weapon</span><br><span class="line">    def attack(self, enemy):</span><br><span class="line">        Hero.attack(self,enemy)</span><br><span class="line">        print(&apos;from Garen Class&apos;)</span><br><span class="line"></span><br><span class="line">ax = AX(&apos;axe&apos;,100,50,&apos;金箍棒&apos;)</span><br><span class="line"># print(ax.__dict__)</span><br></pre></td></tr></table></figure>
<h4 id="依赖继承的一道恶心的题"><a href="#依赖继承的一道恶心的题" class="headerlink" title="依赖继承的一道恶心的题"></a>依赖继承的一道恶心的题</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">class A:</span><br><span class="line">    def f1(self):</span><br><span class="line">        print(&apos;from a&apos;)</span><br><span class="line"></span><br><span class="line">class B:</span><br><span class="line">    def f1(self):</span><br><span class="line">        print(&apos;from b&apos;)</span><br><span class="line"></span><br><span class="line">class C(A,B):</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line">print(C.mro()) # C A B Object</span><br></pre></td></tr></table></figure>
<blockquote>
<p>再看</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">class A:</span><br><span class="line">    def f1(self):</span><br><span class="line">        print(&apos;from a&apos;)</span><br><span class="line">        super().f1()</span><br><span class="line"></span><br><span class="line">class B:</span><br><span class="line">    def f1(self):</span><br><span class="line">        print(&apos;from b&apos;)</span><br><span class="line"></span><br><span class="line">class C(A,B):</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line">c = C()</span><br><span class="line">c.f1() </span><br><span class="line"></span><br><span class="line">结果：</span><br><span class="line">from a</span><br><span class="line">from b</span><br><span class="line"></span><br><span class="line">C是依赖于继承的 所以会参照 C的mro列表查找 属性和方法</span><br></pre></td></tr></table></figure>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/M03/">M03</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2018/09/03/Py003-01-02继承/" title="Py003-01-02继承" itemprop="url">Py003-01-02继承</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Stevin" target="_blank" itemprop="author">Stevin</a>
		
  <p class="article-time">
    <time datetime="2018-09-03T14:04:19.000Z" itemprop="datePublished"> Published 2018-09-03</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">class Parent1:</span><br><span class="line">    pass</span><br><span class="line">class Parent2:</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line">class Sub1(Parent1): # 单继承</span><br><span class="line">    pass</span><br><span class="line">    </span><br><span class="line">class Sub2(Parent1,Parent2): # 多继承</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line"># 查看继承关系</span><br><span class="line">print(Sub1.__bases__)</span><br><span class="line">print(Sub2.__bases__)</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">(&lt;class &apos;__main__.Parent1&apos;&gt;,)</span><br><span class="line">(&lt;class &apos;__main__.Parent1&apos;&gt;, &lt;class &apos;__main__.Parent2&apos;&gt;)</span><br><span class="line">&apos;&apos;&apos;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>再看英雄类</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">class Hero:</span><br><span class="line">    def __init__(self,name,life_value,aggresivity):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.life_value = life_value</span><br><span class="line">        self.aggresivity = aggresivity</span><br><span class="line"></span><br><span class="line">    def attack(self,enemy):</span><br><span class="line">        enemy.life_value -= self.aggresivity</span><br><span class="line"></span><br><span class="line">class AX(Hero):</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ax = AX(&apos;斧王&apos;,30,40)</span><br><span class="line">print(ax.__dict__) # &#123;&apos;name&apos;: &apos;斧王&apos;, &apos;life_value&apos;: 30, &apos;aggresivity&apos;: 40&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>属性查找顺序</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">class Hero:</span><br><span class="line">    x = 1</span><br><span class="line">    y = 3</span><br><span class="line">    def __init__(self,name,life_value,aggresivity):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.life_value = life_value</span><br><span class="line">        self.aggresivity = aggresivity</span><br><span class="line"></span><br><span class="line">    def attack(self,enemy):</span><br><span class="line">        enemy.life_value -= self.aggresivity</span><br><span class="line"></span><br><span class="line">class AX(Hero):</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line">class Sevn(Hexo):</span><br><span class="line">    y = 4</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line">ax = AX(&apos;斧王&apos;,30,40)</span><br><span class="line">ax.x # 1 自己本身没有去父类查找  如果父类没有报错</span><br><span class="line"></span><br><span class="line">sevn = Sevn(&apos;斯温&apos;,50,60)</span><br><span class="line"></span><br><span class="line">sevn.y # 4 子类有就不去父级查找</span><br></pre></td></tr></table></figure>
<p>高深的属性查找，看你晕不晕</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">class Foo:</span><br><span class="line">    def f1(self):</span><br><span class="line">        print(&apos;from Foo.f1&apos;)</span><br><span class="line">    def f2(self):</span><br><span class="line">        print(&apos;from Foo.f2&apos;)</span><br><span class="line"></span><br><span class="line">class Bar(Foo):</span><br><span class="line">    def f2(self):</span><br><span class="line">        print(&apos;from Bar.f2&apos;)</span><br><span class="line"></span><br><span class="line">b = Bar()</span><br><span class="line">b.f2() # from Bar.f2</span><br><span class="line"></span><br><span class="line">------------------------------------------------------------------------</span><br><span class="line">再看</span><br><span class="line">------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">class Foo:</span><br><span class="line">    def f1(self):</span><br><span class="line">        print(&apos;from Foo.f1&apos;)</span><br><span class="line">    def f2(self):</span><br><span class="line">        print(&apos;from Foo.f2&apos;)</span><br><span class="line">        self.f1()</span><br><span class="line"></span><br><span class="line">class Bar(Foo):</span><br><span class="line">    def f1(self):</span><br><span class="line">        print(&apos;from Bar.f1&apos;)</span><br><span class="line"></span><br><span class="line">b = Bar()</span><br><span class="line">b.f2()</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">from Foo.f2</span><br><span class="line">from Bar.f1 为啥是这个？不是就近吗？ 要看self是谁  self一直是b   </span><br><span class="line">&apos;&apos;&apos;</span><br></pre></td></tr></table></figure>
<h4 id="派生"><a href="#派生" class="headerlink" title="派生"></a>派生</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">class Hero:</span><br><span class="line">    def __init__(self,name,life_value,aggresivity):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.life_value = life_value</span><br><span class="line">        self.aggresivity = aggresivity</span><br><span class="line"></span><br><span class="line">    def attack(self,enemy):</span><br><span class="line">        enemy.life_value -= self.aggresivity</span><br><span class="line"></span><br><span class="line">class AX(Hero):</span><br><span class="line">    camp = &apos;斧子&apos;</span><br><span class="line">    def attack(self,enemy):</span><br><span class="line">        print(&apos;反刺螺旋&apos;)</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line">class Sevn(Hexo):</span><br><span class="line">    camp = &apos;真男人&apos;</span><br><span class="line">    def attack(self,enemy):</span><br><span class="line">        print(&apos;锤子&apos;)</span><br><span class="line">    pass</span><br></pre></td></tr></table></figure>
<h4 id="继承实现原理"><a href="#继承实现原理" class="headerlink" title="继承实现原理"></a>继承实现原理</h4><ul>
<li>子类会先于父类被检查</li>
<li>多个父类会根据它们在列表中的顺序被检查</li>
<li>如果对下一个类存在两个合法的选择,选择第一个父类</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">class Foo(a1,a2,a3,a4....an):</span><br><span class="line">    pass</span><br></pre></td></tr></table></figure>
<ul>
<li>仅在python2中有 新式类和经典类 </li>
<li>python3中没有经典类  统一新式类</li>
</ul>
<p>什么是新式类？</p>
<blockquote>
<p>继承object的类，以及它的子类都叫 新式类</p>
</blockquote>
<p>什么是经典类？</p>
<blockquote>
<p>没有继承object的类，以及它的子类都称之为经典类</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># 经典类:没有继承object的类，以及它的子类都称之为经典类</span><br><span class="line"># py2</span><br><span class="line">class Foo:</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line">class Bar(Foo):</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line"># py2  继承object的类，以及它的子类都叫 新式类</span><br><span class="line">class Foo(object):</span><br><span class="line">    pass</span><br><span class="line">class Bar(Foo):</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line"># py3中  统一是新式类 (默认继承object)</span><br><span class="line">class Foo:</span><br><span class="line">    pass</span><br></pre></td></tr></table></figure>
<h3 id="属性查找之——MRO列表"><a href="#属性查找之——MRO列表" class="headerlink" title="属性查找之——MRO列表"></a>属性查找之——MRO列表</h3><p>属性查找方式有</p>
<ul>
<li>深度优先</li>
<li>广度优先</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">当类是经典类时：在要查找的属性不存在时，会按照深度优先的方式查找下去</span><br><span class="line"></span><br><span class="line">当类是新式类时：在要查找的属性不存在时，会按照广度优先的方式查找下去</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">class A(object):</span><br><span class="line">    def test(self):</span><br><span class="line">        print(&apos;from A&apos;)</span><br><span class="line"></span><br><span class="line">class B(A):</span><br><span class="line">    def test(self):</span><br><span class="line">        print(&apos;from B&apos;)</span><br><span class="line"></span><br><span class="line">class C(A):</span><br><span class="line">    def test(self):</span><br><span class="line">        print(&apos;from C&apos;)</span><br><span class="line"></span><br><span class="line">class D(B):</span><br><span class="line">    def test(self):</span><br><span class="line">        print(&apos;from D&apos;)</span><br><span class="line"></span><br><span class="line">class E(C):</span><br><span class="line">    def test(self):</span><br><span class="line">        print(&apos;from E&apos;)</span><br><span class="line"></span><br><span class="line">class F(D,E):</span><br><span class="line">    # def test(self):</span><br><span class="line">    #     print(&apos;from F&apos;)</span><br><span class="line">    pass</span><br><span class="line">f1=F()</span><br><span class="line">f1.test()</span><br><span class="line">print(F.__mro__) #只有新式才有这个属性可以查看线性列表，经典类没有这个属性</span><br><span class="line"></span><br><span class="line">#新式类继承顺序:F-&gt;D-&gt;B-&gt;E-&gt;C-&gt;A</span><br><span class="line">#经典类继承顺序:F-&gt;D-&gt;B-&gt;A-&gt;E-&gt;C</span><br><span class="line">#python3中统一都是新式类</span><br><span class="line">#pyhon2中才分新式类与经典类</span><br></pre></td></tr></table></figure>
<blockquote>
<h4 id="新式类的内置mro方法-广度优先"><a href="#新式类的内置mro方法-广度优先" class="headerlink" title="新式类的内置mro方法(广度优先)"></a>新式类的内置mro方法(广度优先)</h4></blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">F.mro() # 查看属性查找的顺序</span><br></pre></td></tr></table></figure>
<blockquote>
<h4 id="经典类没有提供属性深度优先的查找方法"><a href="#经典类没有提供属性深度优先的查找方法" class="headerlink" title="经典类没有提供属性深度优先的查找方法"></a>经典类没有提供属性深度优先的查找方法</h4></blockquote>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/M03/">M03</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2018/08/31/Py003-01-01面向对象/" title="Py003-01-01面向对象" itemprop="url">Py003-01-01面向对象</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Stevin" target="_blank" itemprop="author">Stevin</a>
		
  <p class="article-time">
    <time datetime="2018-08-31T15:22:39.000Z" itemprop="datePublished"> Published 2018-08-31</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="编程范式"><a href="#编程范式" class="headerlink" title="编程范式"></a>编程范式</h3><ul>
<li>面向过程(国民党的路线,一直在一次一次的解决问题,氪金,高级装备,最后败走台湾)</li>
<li>面向对象(我党的路线,一直在建立统一思想,思想就是种信仰,为信仰而奋斗,从军人员的壮大,7月建党8月建军10月建国。你懂的)</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">生活实例： 从北京到上海</span><br><span class="line">面向过程: 学驾照,买车,摇号,冲油,油门,百度地图,上海(你必须考证，买车，挂牌，会看地图)</span><br><span class="line"></span><br><span class="line">面向对象: 找大巴车,火车,高铁,飞机 (你需要会开车吗？)</span><br></pre></td></tr></table></figure>
<h3 id="提到面向对象就不得不说的——类"><a href="#提到面向对象就不得不说的——类" class="headerlink" title="提到面向对象就不得不说的——类"></a>提到面向对象就不得不说的——类</h3><ul>
<li>同类事物的抽象描述——类</li>
</ul>
<h4 id="类的定义和实例化对象"><a href="#类的定义和实例化对象" class="headerlink" title="类的定义和实例化对象"></a>类的定义和实例化对象</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># 学生对象</span><br><span class="line"># 001先定义类</span><br><span class="line">class Student:</span><br><span class="line">    school = &apos;清华&apos;</span><br><span class="line"></span><br><span class="line">    def learn(self):</span><br><span class="line">        print(&apos;学习啦&apos;)</span><br><span class="line"></span><br><span class="line">    def eat(self):</span><br><span class="line">        print(&apos;吃饭啦&apos;)</span><br><span class="line"></span><br><span class="line">    def sleep(self):</span><br><span class="line">        print(&apos;睡觉啦&apos;)</span><br><span class="line"></span><br><span class="line"># 最后产生对象</span><br><span class="line">student_a = Student()</span><br></pre></td></tr></table></figure>
<h4 id="使用类"><a href="#使用类" class="headerlink" title="使用类"></a>使用类</h4><p>相关属性的增删改查</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"># 在类定义后 内部的代码就会执行 生成对应的名字空间(dict)</span><br><span class="line">class Student:</span><br><span class="line">    # 数据属性</span><br><span class="line">    school = &apos;xx大学&apos;</span><br><span class="line">    # 函数属性</span><br><span class="line">    def learn(self):</span><br><span class="line">        print(&apos;is learning&apos;)</span><br><span class="line">    </span><br><span class="line">    print(&apos;=====running=====&apos;) # 会被执行  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 查看类的名字空间</span><br><span class="line">print(Student.__dict__)</span><br><span class="line">print(Student.__dict__[&apos;school&apos;])</span><br><span class="line">print(Student.__dict__[&apos;learn&apos;])</span><br><span class="line"></span><br><span class="line"># 查</span><br><span class="line">print(Student.school)</span><br><span class="line">print(Student.learn)</span><br><span class="line"></span><br><span class="line"># 增 可以动态添加(如下);也可以在定义的时候添加属性如 school属性</span><br><span class="line">Student.county = &apos;China&apos;</span><br><span class="line">print(Student.__dict__)</span><br><span class="line">print(Student.county)</span><br><span class="line"></span><br><span class="line"># 删</span><br><span class="line">del Student.county</span><br><span class="line"></span><br><span class="line"># 改</span><br><span class="line">Student.school = &apos;清华池&apos;</span><br></pre></td></tr></table></figure>
<h4 id="如何使用对象"><a href="#如何使用对象" class="headerlink" title="如何使用对象"></a>如何使用对象</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"># __init__方法用来为对象定制自己独有的特征</span><br><span class="line"></span><br><span class="line">class Student:</span><br><span class="line">    # 数据属性</span><br><span class="line">    school = &apos;xx大学&apos;</span><br><span class="line"></span><br><span class="line">    # __init__</span><br><span class="line">    def __init__(self,name,sex,age):</span><br><span class="line">        self.Name = name</span><br><span class="line">        self.Sex = sex</span><br><span class="line">        self.Age = age</span><br><span class="line"></span><br><span class="line">    # 函数属性</span><br><span class="line">    def learn(self):</span><br><span class="line">        print(&apos;is learning&apos;)</span><br><span class="line"></span><br><span class="line"># 此时创建对象的时候  就不能直接 Student()了而是如下：</span><br><span class="line">stu = Student(&apos;张三&apos;,&apos;男&apos;,18)</span><br><span class="line"></span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">__init__是你实例化的时候调用</span><br><span class="line">1. 产生一个空对象 tmp</span><br><span class="line">2. Student.__init__(tmp,&apos;张三&apos;,&apos;男&apos;,18)</span><br><span class="line">  tmp.Name = &apos;张三&apos;</span><br><span class="line">  tmp.Sex = &apos;男&apos;</span><br><span class="line">  tmp.Age = 18</span><br><span class="line">3. 返回tmp的地址给 stu</span><br><span class="line">&apos;&apos;&apos;</span><br></pre></td></tr></table></figure>
<blockquote>
<p> 对象属性的CRUD</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># 查</span><br><span class="line">stu = Student(&apos;张三&apos;,&apos;男&apos;,18)</span><br><span class="line">print(stu.__dict__)</span><br><span class="line">print(stu.Name)</span><br><span class="line">print(stu.Age)</span><br><span class="line"></span><br><span class="line"># 改</span><br><span class="line">stu.Name = &apos;李四&apos; </span><br><span class="line"></span><br><span class="line"># 删</span><br><span class="line">del stu.Name</span><br><span class="line"></span><br><span class="line"># 增</span><br><span class="line">stu.className = &apos;前端部&apos;</span><br></pre></td></tr></table></figure>
<h4 id="属性查找和绑定方法"><a href="#属性查找和绑定方法" class="headerlink" title="属性查找和绑定方法"></a>属性查找和绑定方法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">class Student:</span><br><span class="line">    school = &apos;xx大学&apos;</span><br><span class="line"></span><br><span class="line">    def __init__(self,name,sex,age):</span><br><span class="line">        self.Name = name</span><br><span class="line">        self.Sex = sex</span><br><span class="line">        self.Age = age</span><br><span class="line"></span><br><span class="line">    def learn(self):</span><br><span class="line">        print(&apos;%sis learning&apos;%self.Name)</span><br><span class="line"></span><br><span class="line"># 后产生对象</span><br><span class="line">stu1 = Student(&apos;张三&apos;,&apos;男&apos;,11)</span><br><span class="line">stu2 = Student(&apos;李四&apos;,&apos;男&apos;,22)</span><br><span class="line">stu3 = Student(&apos;王五&apos;,&apos;男&apos;,33)</span><br><span class="line"></span><br><span class="line"># 对象：特征和技能的结合体</span><br><span class="line"># 类一系列对象相似的特征和相似的技能的结合体</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 类中的数据属性：是所有对象共有的</span><br><span class="line">print(Student.school,id(Student.school))</span><br><span class="line">print(stu1.school,id(stu1.school))</span><br><span class="line">print(stu2.school,id(stu2.school))</span><br><span class="line">print(stu3.school,id(stu3.school))</span><br><span class="line"></span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"># 它们的id值都一样</span><br><span class="line">xx大学 2644686064016</span><br><span class="line">xx大学 2644686064016</span><br><span class="line">xx大学 2644686064016</span><br><span class="line">xx大学 2644686064016</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line">#----------------------------------------------------------</span><br><span class="line"># 类中的函数属性：是绑定给对象使用的，绑定到不同的对象是不同的绑定方法,对象调用绑定方法时,把对象本身当作第一个参数传入也就是self</span><br><span class="line">print(Student.learn)</span><br><span class="line">print(stu1.learn)</span><br><span class="line">print(stu2.learn)</span><br><span class="line">print(stu3.learn)</span><br><span class="line"></span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"># 它们的learn方法 地址都不一样</span><br><span class="line">&lt;function Student.learn at 0x00000271C5AFAEA0&gt;</span><br><span class="line">&lt;bound method Student.learn of &lt;__main__.Student object at 0x00000271C5B045C0&gt;&gt;</span><br><span class="line">&lt;bound method Student.learn of &lt;__main__.Student object at 0x00000271C5B04710&gt;&gt;</span><br><span class="line">&lt;bound method Student.learn of &lt;__main__.Student object at 0x00000271C5B04748&gt;&gt;</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># Student.learn() 报错  因为默认有个self参数 没有传递 learn() missing 1 required positional argument: &apos;self&apos;</span><br><span class="line">Student.learn(123)  # 继续报错</span><br><span class="line">Student.learn(stu1) # 张三is learning</span><br><span class="line">Student.learn(stu2) # 李四is learning</span><br><span class="line">Student.learn(stu3) # 王五is learning</span><br><span class="line"></span><br><span class="line"># 起始你可以这样调用</span><br><span class="line">stu1.learn() # 张三is learning</span><br><span class="line">stu2.learn() # 李四is learning</span><br><span class="line">stu3.learn() # 王五is learning</span><br></pre></td></tr></table></figure>
<blockquote>
<p>类中的数据属性：</p>
</blockquote>
<ul>
<li>是所有对象共有的</li>
</ul>
<blockquote>
<p> 类中的函数属性：</p>
</blockquote>
<ul>
<li>是绑定给对象使用的</li>
<li>绑定到不同的对象是不同的绑定方法</li>
<li>对象调用绑定方法时,把对象本身当作第一个参数传入也就是self</li>
</ul>
<blockquote>
<p>属性查找</p>
</blockquote>
<ul>
<li>先从实例对象上找，没有去类找，在没有就报错</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">stu1.x = &apos;from stu1&apos;</span><br><span class="line">Student.x = &apos;from Student class&apos;</span><br><span class="line">print(stu1.x) # 从自身找   &apos;from stu1&apos;</span><br><span class="line"></span><br><span class="line"># 如果对象stu1自身没有y属性 则从Student找</span><br><span class="line"># stu1.y = &apos;from stu1&apos;</span><br><span class="line">Student.y = &apos;from Student class&apos;</span><br><span class="line">print(stu1.y) # 从Student找  &apos;from Student class&apos;</span><br><span class="line"></span><br><span class="line"># 如果Student也没有  报错</span><br></pre></td></tr></table></figure>
<h4 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&apos;&apos;&apos;</span><br><span class="line">编写学生类，产生一堆学生对象</span><br><span class="line">要求：</span><br><span class="line">有一个计数器(属性)，统计共实例了多少个对象</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">class Student:</span><br><span class="line">    school = &apos;xx大学&apos;</span><br><span class="line">    count = 0</span><br><span class="line">    def __init__(self,name,sex,age):</span><br><span class="line">        self.Name = name</span><br><span class="line">        self.Sex = sex</span><br><span class="line">        self.Age = age</span><br><span class="line">        Student.count+=1</span><br><span class="line"></span><br><span class="line">    def learn(self):</span><br><span class="line">        print(&apos;%sis learning&apos;%self.Name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">s1 = Student(&apos;a1&apos;,&apos;nan&apos;,11)</span><br><span class="line">s2 = Student(&apos;a2&apos;,&apos;nan&apos;,11)</span><br><span class="line">s3 = Student(&apos;a3&apos;,&apos;nan&apos;,11)</span><br><span class="line">print(Student.count)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&apos;&apos;&apos;</span><br><span class="line">模拟王者荣耀定义两个英雄</span><br><span class="line">要求：</span><br><span class="line">英雄要有攻击力，生命，名字</span><br><span class="line">实例化两个英雄对象</span><br><span class="line">英雄之间可以互相殴打，被殴打一方掉血，血量少于0则判断死亡</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line">class Hero:</span><br><span class="line">    def __init__(self,name,life_value,aggresivity):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.life_value = life_value</span><br><span class="line">        self.aggresivity = aggresivity</span><br><span class="line"></span><br><span class="line">    def attack(self,enemy):</span><br><span class="line">        enemy.life_value -= self.aggresivity</span><br><span class="line"></span><br><span class="line">a = Hero(&apos;亚瑟&apos;,100,50)</span><br><span class="line">b = Hero(&apos;小乔&apos;,100,60)</span><br><span class="line"></span><br><span class="line">a.attack(b)</span><br></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/M03/">M03</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2018/08/28/Vue_222_vue路由实现原理/" title="Vue_222_vue路由实现原理" itemprop="url">Vue_222_vue路由实现原理</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Stevin" target="_blank" itemprop="author">Stevin</a>
		
  <p class="article-time">
    <time datetime="2018-08-28T07:46:22.000Z" itemprop="datePublished"> Published 2018-08-28</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="vue路由实现原理"><a href="#vue路由实现原理" class="headerlink" title="vue路由实现原理"></a>vue路由实现原理</h3><h4 id="第一步——前端必会之选项卡"><a href="#第一步——前端必会之选项卡" class="headerlink" title="第一步——前端必会之选项卡"></a>第一步——前端必会之选项卡</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        x-tab&#123;display: block;&#125;</span><br><span class="line">        x-tab&gt;.nav&gt;li.active&#123;background: red;&#125;</span><br><span class="line">        x-tab&gt;.content&gt;li&#123;display: none;&#125;</span><br><span class="line">        x-tab&gt;.content&gt;li.active&#123;display: block;&#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;x-tab&gt;</span><br><span class="line">        &lt;ol class=&quot;nav&quot;&gt;</span><br><span class="line">            &lt;li class=&quot;active&quot;&gt;tab1&lt;/li&gt;</span><br><span class="line">            &lt;li&gt;tab2&lt;/li&gt;</span><br><span class="line">        &lt;/ol&gt;</span><br><span class="line">        &lt;ul class=&quot;content&quot;&gt;</span><br><span class="line">            &lt;li class=&quot;active&quot;&gt;content1&lt;/li&gt;</span><br><span class="line">            &lt;li&gt;content2&lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">    &lt;/x-tab&gt;</span><br><span class="line">    &lt;script src=&quot;https://cdn.bootcss.com/jquery/3.3.1/jquery.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        // 路由第一步   选项卡</span><br><span class="line">        $(&apos;x-tab&apos;).on(&apos;click&apos;,&apos;.nav&gt;li&apos;,(e)=&gt;&#123;</span><br><span class="line">            let $li = $(e.currentTarget)</span><br><span class="line">            $li.addClass(&apos;active&apos;)</span><br><span class="line">                .siblings().removeClass(&apos;active&apos;)</span><br><span class="line">            let index = $li.index()</span><br><span class="line">            $(&apos;.content&gt;li&apos;).eq(index)</span><br><span class="line">                .addClass(&apos;active&apos;)</span><br><span class="line">                .siblings().removeClass(&apos;active&apos;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>传说没有那个入行的前端15分钟写不出一个选项卡，而且还是用jq。</p>
</blockquote>
<h4 id="第二步——你早就知道的锚点"><a href="#第二步——你早就知道的锚点" class="headerlink" title="第二步——你早就知道的锚点"></a>第二步——你早就知道的锚点</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        x-tab&#123;display: block;&#125;</span><br><span class="line">        x-tab&gt;.nav&gt;li.active&#123;background: red;&#125;</span><br><span class="line">        x-tab&gt;.content&gt;li&#123;display: none;&#125;</span><br><span class="line">        x-tab&gt;.content&gt;li.active&#123;display: block;&#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;x-tab&gt;</span><br><span class="line">        &lt;ol class=&quot;nav&quot;&gt;</span><br><span class="line">            &lt;li class=&quot;active&quot;&gt;tab1&lt;/li&gt;</span><br><span class="line">            &lt;li&gt;tab2&lt;/li&gt;</span><br><span class="line">        &lt;/ol&gt;</span><br><span class="line">        &lt;ul class=&quot;content&quot;&gt;</span><br><span class="line">            &lt;li class=&quot;active&quot;&gt;content1&lt;/li&gt;</span><br><span class="line">            &lt;li&gt;content2&lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">    &lt;/x-tab&gt;</span><br><span class="line">    &lt;script src=&quot;https://cdn.bootcss.com/jquery/3.3.1/jquery.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        // 路由第二步  通过锚点</span><br><span class="line">        let index = location.hash|| &apos;#0&apos;</span><br><span class="line">        index = index.substring(1)</span><br><span class="line">        $(&apos;.nav&gt;li&apos;).eq(index)</span><br><span class="line">            .addClass(&apos;active&apos;)</span><br><span class="line">            .siblings().removeClass(&apos;active&apos;)</span><br><span class="line">        $(&apos;.content&gt;li&apos;).eq(index)</span><br><span class="line">            .addClass(&apos;active&apos;)</span><br><span class="line">            .siblings().removeClass(&apos;active&apos;)</span><br><span class="line">        $(&apos;x-tab&apos;).on(&apos;click&apos;,&apos;.nav&gt;li&apos;,(e)=&gt;&#123;</span><br><span class="line">            let $li = $(e.currentTarget)</span><br><span class="line">            $li.addClass(&apos;active&apos;)</span><br><span class="line">                .siblings().removeClass(&apos;active&apos;)</span><br><span class="line">            let index = $li.index()</span><br><span class="line">            location.hash = index</span><br><span class="line">            $(&apos;.content&gt;li&apos;).eq(index)</span><br><span class="line">                .addClass(&apos;active&apos;)</span><br><span class="line">                .siblings().removeClass(&apos;active&apos;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>代码很重复是不是，往下看吧！</p>
</blockquote>
<h4 id="第三步——使用锚点的优化"><a href="#第三步——使用锚点的优化" class="headerlink" title="第三步——使用锚点的优化"></a>第三步——使用锚点的优化</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        x-tab&#123;display: block;&#125;</span><br><span class="line">        x-tab&gt;.nav&gt;li.active&#123;background: red;&#125;</span><br><span class="line">        x-tab&gt;.content&gt;li&#123;display: none;&#125;</span><br><span class="line">        x-tab&gt;.content&gt;li.active&#123;display: block;&#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;x-tab&gt;</span><br><span class="line">        &lt;ol class=&quot;nav&quot;&gt;</span><br><span class="line">            &lt;li class=&quot;active&quot;&gt;</span><br><span class="line">                &lt;a href=&quot;#0&quot;&gt;tab1&lt;/a&gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">            &lt;li&gt;  &lt;a href=&quot;#1&quot;&gt;tab2&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">        &lt;/ol&gt;</span><br><span class="line">        &lt;ul class=&quot;content&quot;&gt;</span><br><span class="line">            &lt;li class=&quot;active&quot;&gt;content1&lt;/li&gt;</span><br><span class="line">            &lt;li&gt;content2&lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">    &lt;/x-tab&gt;</span><br><span class="line">    &lt;script src=&quot;https://cdn.bootcss.com/jquery/3.3.1/jquery.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        // 路由第二步  通过锚点</span><br><span class="line">        function selectTab()&#123;</span><br><span class="line">            let index = location.hash|| &apos;#0&apos;</span><br><span class="line">            index = index.substring(1)</span><br><span class="line">            $(&apos;.nav&gt;li&apos;).eq(index)</span><br><span class="line">                .addClass(&apos;active&apos;)</span><br><span class="line">                .siblings().removeClass(&apos;active&apos;)</span><br><span class="line">            $(&apos;.content&gt;li&apos;).eq(index)</span><br><span class="line">                .addClass(&apos;active&apos;)</span><br><span class="line">                .siblings().removeClass(&apos;active&apos;)</span><br><span class="line">        &#125;</span><br><span class="line">        selectTab()</span><br><span class="line">        // 路由第三步 监听锚点改变的事件</span><br><span class="line">        window.onhashchange = (e)=&gt;&#123;</span><br><span class="line">            selectTab()</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>hash的缺陷就是很容易被篡改和影响    如一个回到顶部的锚点 #top 路由状态就改了 不是你之前的index了</p>
</blockquote>
<h4 id="第四步——H5新的api——history"><a href="#第四步——H5新的api——history" class="headerlink" title="第四步——H5新的api——history"></a>第四步——H5新的api——history</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        x-tab&#123;display: block;&#125;</span><br><span class="line">        x-tab&gt;.nav&gt;li.active&#123;background: red;&#125;</span><br><span class="line">        x-tab&gt;.content&gt;li&#123;display: none;&#125;</span><br><span class="line">        x-tab&gt;.content&gt;li.active&#123;display: block;&#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;x-tab&gt;</span><br><span class="line">        &lt;ol class=&quot;nav&quot;&gt;</span><br><span class="line">            &lt;li class=&quot;active&quot;&gt;</span><br><span class="line">                &lt;a href=./tab1&gt;tab1&lt;/a&gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">            &lt;li&gt;  &lt;a href=&quot;./tab2&quot;&gt;tab2&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">        &lt;/ol&gt;</span><br><span class="line">        &lt;ul class=&quot;content&quot;&gt;</span><br><span class="line">            &lt;li class=&quot;active&quot;&gt;content1&lt;/li&gt;</span><br><span class="line">            &lt;li&gt;content2&lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">    &lt;/x-tab&gt;</span><br><span class="line">    &lt;script src=&quot;https://cdn.bootcss.com/jquery/3.3.1/jquery.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        selectTab()</span><br><span class="line">        // 路由第四步  不用锚点  用a标签的href跳转  但是我们不想跳转页面，所以就把事件阻止掉</span><br><span class="line">        // 目标就是a标签点击之后不跳转</span><br><span class="line">        $(&apos;x-tab&apos;).on(&apos;click&apos;,&apos;.nav &gt; li &gt; a&apos;,(e)=&gt;&#123;</span><br><span class="line">            e.preventDefault()</span><br><span class="line">            let a = e.currentTarget</span><br><span class="line">            let aHref = a.getAttribute(&apos;href&apos;)</span><br><span class="line">            console.log(aHref)</span><br><span class="line">            // 最重要一步使用 History的新api pushState</span><br><span class="line">            window.history.pushState(&#123;&#125;,&apos;xxx&apos;,aHref)</span><br><span class="line">            selectTab()</span><br><span class="line">        &#125;)</span><br><span class="line">        // 监听</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        function selectTab()&#123;</span><br><span class="line">            let index = location.pathname.substring(1)|| tab1</span><br><span class="line">            index = index.substring(3) - 1||0</span><br><span class="line">            console.log(index)</span><br><span class="line">            $(&apos;.nav&gt;li&apos;).eq(index)</span><br><span class="line">                .addClass(&apos;active&apos;)</span><br><span class="line">                .siblings().removeClass(&apos;active&apos;)</span><br><span class="line">            $(&apos;.content&gt;li&apos;).eq(index)</span><br><span class="line">                .addClass(&apos;active&apos;)</span><br><span class="line">                .siblings().removeClass(&apos;active&apos;)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>这样的方式你把外链分享出去是无法访问的必须服务器进行路径匹配。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 后端代码</span><br><span class="line">if(path===&apos;/&apos;||path===&apos;/tab1&apos;||path===&apos;/tab2)&#123;</span><br><span class="line">    // 这里返回同一页面就ok</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/vue/">vue</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2018/08/22/Py002-02-11正则re/" title="Py002-02-11正则re" itemprop="url">Py002-02-11正则re</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Stevin" target="_blank" itemprop="author">Stevin</a>
		
  <p class="article-time">
    <time datetime="2018-08-22T13:57:22.000Z" itemprop="datePublished"> Published 2018-08-22</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="re模块"><a href="#re模块" class="headerlink" title="re模块"></a>re模块</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">import re</span><br><span class="line"></span><br><span class="line">str = &apos;&apos;&apos;</span><br><span class="line">张三  20  广州  173  50  13613133344</span><br><span class="line">张四  30  深州  173  50  13813133344</span><br><span class="line">张五  25  天津  173  50  15613133366</span><br><span class="line">张六  13  北京  173  50  13613133388</span><br><span class="line">张七  44  宁波  173  50  18213133377</span><br><span class="line">张八  33  浙江  173  50  13013133341</span><br><span class="line">张九  90  杭州  173  50  13813133312</span><br><span class="line">张二  10  山西  173  50  13913133315</span><br><span class="line">张一  22  大同  173  50  05713133344</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 查找手机号</span><br><span class="line"></span><br><span class="line"># 只找到第一个</span><br><span class="line">print(re.search(&quot;[0-9]&#123;11&#125;&quot;,str))</span><br><span class="line"></span><br><span class="line"># 查找所有匹配的手机号</span><br><span class="line">print(re.findall(&quot;1[1-9]&#123;10&#125;&quot;,str))</span><br></pre></td></tr></table></figure>
<h4 id="常用正则规则"><a href="#常用正则规则" class="headerlink" title="常用正则规则"></a>常用正则规则</h4><p>正则表达式就是字符串的匹配规则，在多数编程语言里都有相应的支持，python里对应的模块是re</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&apos;.&apos;     默认匹配除\n之外的任意一个字符，若指定flag DOTALL,则匹配任意字符，包括换行</span><br><span class="line">&apos;^&apos;     匹配字符开头，若指定flags MULTILINE,这种也可以匹配上(r&quot;^a&quot;,&quot;\nabc\neee&quot;,flags=re.MULTILINE)</span><br><span class="line">&apos;$&apos;     匹配字符结尾， 若指定flags MULTILINE ,re.search(&apos;foo.$&apos;,&apos;foo1\nfoo2\n&apos;,re.MULTILINE).group() 会匹配到foo1</span><br><span class="line">&apos;*&apos;     匹配*号前的字符0次或多次， re.search(&apos;a*&apos;,&apos;aaaabac&apos;)  结果&apos;aaaa&apos;</span><br><span class="line">&apos;+&apos;     匹配前一个字符1次或多次，re.findall(&quot;ab+&quot;,&quot;ab+cd+abb+bba&quot;) 结果[&apos;ab&apos;, &apos;abb&apos;]</span><br><span class="line">&apos;?&apos;     匹配前一个字符1次或0次 ,re.search(&apos;b?&apos;,&apos;alex&apos;).group() 匹配b 0次</span><br><span class="line">&apos;&#123;m&#125;&apos;   匹配前一个字符m次 ,re.search(&apos;b&#123;3&#125;&apos;,&apos;alexbbbs&apos;).group()  匹配到&apos;bbb&apos;</span><br><span class="line">&apos;&#123;n,m&#125;&apos; 匹配前一个字符n到m次，re.findall(&quot;ab&#123;1,3&#125;&quot;,&quot;abb abc abbcbbb&quot;) 结果&apos;abb&apos;, &apos;ab&apos;, &apos;abb&apos;]</span><br><span class="line">&apos;|&apos;     匹配|左或|右的字符，re.search(&quot;abc|ABC&quot;,&quot;ABCBabcCD&quot;).group() 结果&apos;ABC&apos;</span><br><span class="line">&apos;(...)&apos; 分组匹配， re.search(&quot;(abc)&#123;2&#125;a(123|45)&quot;, &quot;abcabca456c&quot;).group() 结果为&apos;abcabca45&apos;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&apos;\A&apos;    只从字符开头匹配同(^)，re.search(&quot;\Aabc&quot;,&quot;alexabc&quot;) 是匹配不到的，相当于re.match(&apos;abc&apos;,&quot;alexabc&quot;) 或^</span><br><span class="line">&apos;\Z&apos;    匹配字符结尾，同$ </span><br><span class="line">&apos;\d&apos;    匹配数字0-9</span><br><span class="line">&apos;\D&apos;    匹配非数字</span><br><span class="line">&apos;\w&apos;    匹配[A-Za-z0-9]</span><br><span class="line">&apos;\W&apos;    匹配非[A-Za-z0-9]</span><br><span class="line">&apos;\s&apos;     匹配空白字符、\t、\n、\r , re.search(&quot;\s+&quot;,&quot;ab\tc1\n3&quot;).group() 结果 &apos;\t&apos;</span><br><span class="line"></span><br><span class="line">&apos;(?P&lt;name&gt;...)&apos; 分组匹配 re.search(&quot;(?P&lt;province&gt;[0-9]&#123;4&#125;)(?P&lt;city&gt;[0-9]&#123;2&#125;)(?P&lt;birthday&gt;[0-9]&#123;4&#125;)&quot;,&quot;371481199306143242&quot;).groupdict(&quot;city&quot;) 结果&#123;&apos;province&apos;: &apos;3714&apos;, &apos;city&apos;: &apos;81&apos;, &apos;birthday&apos;: &apos;1993&apos;&#125;</span><br></pre></td></tr></table></figure>
<h4 id="re的匹配语法有以下几种"><a href="#re的匹配语法有以下几种" class="headerlink" title="re的匹配语法有以下几种"></a>re的匹配语法有以下几种</h4><ul>
<li>re.match 从头开始匹配</li>
<li>re.search 匹配包含</li>
<li>re.findall 把所有匹配到的字符放到以列表中的元素返回</li>
<li>re.split 以匹配到的字符当做列表分隔符</li>
<li>re.sub 匹配字符并替换</li>
<li>re.fullmatch 全部匹配</li>
</ul>
<blockquote>
<p>match</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># 从头匹配</span><br><span class="line">a = re.match(&apos;[0-9]&apos;,&apos;abcde2&apos;) # None</span><br><span class="line">b = re.match(&apos;[0-9]&apos;,&apos;1abcd2&apos;) # &lt;_sre.SRE_Match object; span=(0, 1), match=&apos;1&apos;&gt;</span><br><span class="line">c = re.match(&apos;[0-9]&apos;,&apos;ab3cd2&apos;) # None</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 如何取到匹配返回的值呢？</span><br><span class="line"># 因为返回值可能是None 所以要做判断</span><br><span class="line">if b:</span><br><span class="line">    print(b.group())</span><br></pre></td></tr></table></figure>
<blockquote>
<p>search</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 全局匹配</span><br><span class="line">a = re.search(&apos;[0-9]&apos;,&apos;abcdef&apos;) # [] [&apos;1&apos;] [&apos;3&apos;]</span><br><span class="line">b = re.search(&apos;[0-9]&apos;,&apos;1abcd2&apos;) # &lt;_sre.SRE_Match object; span=(0, 1), match=&apos;1&apos;&gt; </span><br><span class="line">c = re.search(&apos;[0-9]&apos;,&apos;ab3cd2&apos;) # &lt;_sre.SRE_Match object; span=(2, 3), match=&apos;3&apos;&gt;</span><br><span class="line"></span><br><span class="line"># 如何取到匹配返回的值呢？</span><br><span class="line"># 因为返回值可能是None 所以要做判断</span><br><span class="line">if b:</span><br><span class="line">    print(b.group())</span><br></pre></td></tr></table></figure>
<blockquote>
<p>findall</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># </span><br><span class="line">a = re.findall(&apos;[0-9]&apos;,&apos;abcde2&apos;) # [&apos;2&apos;]</span><br><span class="line">b = re.findall(&apos;[0-9]&apos;,&apos;1abcd2&apos;) # [&apos;1&apos;, &apos;2&apos;]</span><br><span class="line">c= re.findall(&apos;[0-9]&apos;,&apos;ab3cd2&apos;) # [&apos;3&apos;, &apos;2&apos;]</span><br></pre></td></tr></table></figure>
<blockquote>
<p>使用实例</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 这俩效果一样  从头匹配</span><br><span class="line">re.search(&apos;^ab&apos;,&apos;abc&apos;) </span><br><span class="line"></span><br><span class="line">re.match(&apos;ab&apos;,&apos;abc&apos;)</span><br><span class="line"></span><br><span class="line"># 从尾匹配</span><br><span class="line">re.search(&apos;b$&apos;,&apos;ab&apos;)</span><br><span class="line"></span><br><span class="line"># 注意 $ 不要跟match一起用</span><br><span class="line">re.match(&apos;b$&apos;,&apos;b&apos;) # 能匹配</span><br><span class="line">re.match(&apos;b.b$&apos;,&apos;bob&apos;) # 能匹配</span><br><span class="line">re.match(&apos;b$&apos;,&apos;ab&apos;) # 不匹配</span><br></pre></td></tr></table></figure>
<blockquote>
<p>分组匹配</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 匹配 单词 和数字</span><br><span class="line">re.search(&apos;[a-z]+[0-9]+&apos;,&apos;hjx123&apos;).group() # &apos;hjx123&apos;</span><br><span class="line"></span><br><span class="line"># 把 单词 和 数字分开</span><br><span class="line">re.search(&apos;([a-z]+)([0-9]+)&apos;,&apos;hjx123&apos;).group() # &apos;hjx123&apos;</span><br><span class="line"></span><br><span class="line"># 再看</span><br><span class="line">re.search(&apos;([a-z]+)([0-9]+)&apos;,&apos;hjx123&apos;).groups() # (&apos;hjx&apos;,&apos;123&apos;)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>非常炫酷的例子</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 模拟身份证号</span><br><span class="line">s = &apos;130704200005020613&apos; </span><br><span class="line">res = re.search(&apos;(?P&lt;province&gt;\d&#123;3&#125;)(?P&lt;city&gt;\d+&#123;3&#125;)(?P&lt;born_year&gt;\d&#123;4&#125;)&apos;,s)</span><br><span class="line"># 只要涉及分组就 groups</span><br><span class="line">res.groups() # (&apos;130&apos;,&apos;704&apos;,&apos;2000&apos;)</span><br><span class="line"></span><br><span class="line"># 还能更NB</span><br><span class="line">res.groupdict()</span><br><span class="line">&#123;&quot;province&quot;:&quot;130&quot;,&quot;city&quot;:&quot;704&quot;,&quot;born_year&quot;:&quot;2000&quot;&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>splitall 和 split</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># 按数字分割</span><br><span class="line">s = &apos;hjx22jack23rain31jin50&apos;</span><br><span class="line">re.split(&apos;\d&apos;,s) # [&apos;hjx&apos;,&apos;&apos;,&apos;jack&apos;,&apos;&apos;,&apos;rain&apos;,&apos;&apos;,&apos;jin&apos;,&apos;&apos;]</span><br><span class="line"></span><br><span class="line">re.split(&apos;\d+&apos;,s) # [&apos;hjx&apos;,&apos;jack&apos;,&apos;rain&apos;,&apos;jin&apos;,&apos;&apos;] 最后一个50后边又被分割出了</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 数字 或者 # 或者 - 分割  </span><br><span class="line">s2 = &apos;hjx22jack23rain31jin50#mock-Oldboy&apos;</span><br><span class="line">re.split(&apos;\d+|#|-&apos;,s2) # [&apos;hjx&apos;, &apos;jack&apos;, &apos;rain&apos;, &apos;jin&apos;, &apos;&apos;, &apos;mock&apos;, &apos;Oldboy&apos;]]</span><br><span class="line"></span><br><span class="line"># 如果是 |分割的呢？ 就 \|转义</span><br><span class="line"></span><br><span class="line"># 如果字符是  \分割 在系统里会变成\\ 所以转义的时候要 \\\\</span><br><span class="line">s3 = &apos;hjx22jack23ra\in31jin50#mock-Oldboy&apos;</span><br><span class="line">res3 = re.split(&apos;\d+|#|-|\\\\&apos;,s3)</span><br></pre></td></tr></table></figure>
<p>split更强大的用法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">s=&apos;9-2*5/3+7/3*99/4*2998+10*568/14&apos;</span><br><span class="line">re.split(&apos;[\*\-\/\+]&apos;,s) </span><br><span class="line"># [&apos;9&apos;, &apos;2&apos;, &apos;5&apos;, &apos;3&apos;, &apos;7&apos;, &apos;3&apos;, &apos;99&apos;, &apos;4&apos;, &apos;2998&apos;, &apos;10&apos;, &apos;568&apos;, &apos;14&apos;]</span><br><span class="line"></span><br><span class="line">re.split(&apos;[\*\-\/\+]&apos;,s,3)</span><br><span class="line"># [&apos;9&apos;, &apos;2&apos;, &apos;5&apos;, &apos;3+7/3*99/4*2998+10*568/14&apos;]</span><br></pre></td></tr></table></figure>
<blockquote>
<p>sub</p>
</blockquote>
<p>用于替换匹配的字符串</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">s = &apos;hjx22jack23ra\in31jin50#mock-Oldboy&apos;</span><br><span class="line">res = re.sub(&apos;\d&apos;,&apos;_&apos;,s) # hjx__jack__ra\in__jin__#mock-Oldboy</span><br><span class="line"></span><br><span class="line">res2 = re.sub(&apos;\d&apos;,&apos;_&apos;,s,count=2) # hjx__jack23ra\in31jin50#mock-Oldboy</span><br></pre></td></tr></table></figure>
<blockquote>
<p>re.fullmatch(pattern, string, flags=0)</p>
</blockquote>
<p>整个字符串匹配成功就返回re object, 否则返回None</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">re.fullmatch(&apos;\w+@\w+\.(com|cn|edu)&apos;,&quot;alex@oldboyedu.cn&quot;)</span><br></pre></td></tr></table></figure>
<h4 id="最后一个"><a href="#最后一个" class="headerlink" title="最后一个"></a>最后一个</h4><blockquote>
<p>re.compile(pattern, flags=0)</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">prog = re.compile(正则) # 相当于把 正则 转换为代码规则 </span><br><span class="line">result = prog.match(string) # 这样可以省略 正则规则转换的过程</span><br><span class="line"></span><br><span class="line">以上俩行等价于</span><br><span class="line">result = re.match(正则, string)</span><br></pre></td></tr></table></figure>
<h4 id="Flags标志符"><a href="#Flags标志符" class="headerlink" title="Flags标志符"></a>Flags标志符</h4><ul>
<li>re.I(re.IGNORECASE): 忽略大小写（括号内是完整写法，下同）</li>
<li>M(MULTILINE): 多行模式，改变’^’和’$’的行为</li>
<li>S(DOTALL): 改变’.’的行为,make the ‘.’ special character match any character at all, including a newline; without this flag, ‘.’ will match anything except a newline.</li>
<li>X(re.VERBOSE) 可以给你的表达式写注释，使其更可读，下面这2个意思一样</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">re.search(&apos;a&apos;,&apos;alex&apos;,re.I) # 忽略大小写</span><br><span class="line"></span><br><span class="line">re.search(&apos;.&apos;,&apos;\n&apos;,re.S) # 匹配任意字符  . 是除了换行符  re.S代表任何字符</span><br></pre></td></tr></table></figure>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/M02/">M02</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2018/08/22/Py002-02-10常用模块九(logging)/" title="Py002-02-10常用模块九(logging)" itemprop="url">Py002-02-10常用模块九(logging)</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Stevin" target="_blank" itemprop="author">Stevin</a>
		
  <p class="article-time">
    <time datetime="2018-08-22T13:44:06.000Z" itemprop="datePublished"> Published 2018-08-22</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="logging-日志模块"><a href="#logging-日志模块" class="headerlink" title="logging (日志模块)"></a>logging (日志模块)</h3><p>logging的日志可以分为5个级别</p>
<ul>
<li>debug()</li>
<li>info()</li>
<li>warning()</li>
<li>error()</li>
<li>critical()</li>
</ul>
<h4 id="最简单用法"><a href="#最简单用法" class="headerlink" title="最简单用法"></a>最简单用法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import logging</span><br><span class="line"></span><br><span class="line">logging.warning(&quot;user [alex] attempted wrong password more than 3 times&quot;)</span><br><span class="line">logging.critical(&quot;server is down&quot;)</span><br><span class="line"></span><br><span class="line">输出</span><br><span class="line"></span><br><span class="line">WARNING:root:user [alex] attempted wrong password more than 3 times</span><br><span class="line">CRITICAL:root:server is down</span><br><span class="line"></span><br><span class="line"># 默认以root执行的，就是你没指定用户的情况下</span><br></pre></td></tr></table></figure>
<p>其中下面这句中的level=loggin.INFO意思是，把日志纪录级别设置为INFO，也就是说，只有比日志是INFO或比INFO级别更高的日志才会被纪录到文件里，在这个例子， 第一条日志是不会被纪录的，如果希望纪录debug的日志，那把日志级别改成DEBUG就行了。</p>
<h4 id="如果想把日志写到文件里，也很简单"><a href="#如果想把日志写到文件里，也很简单" class="headerlink" title="如果想把日志写到文件里，也很简单"></a>如果想把日志写到文件里，也很简单</h4><ul>
<li>filename 日志写入的文件</li>
<li>level 输入指定的级别以及以上级别的信息</li>
</ul>
<p>当你再次运行的时候，日志会追加而不是覆盖</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import logging</span><br><span class="line"></span><br><span class="line">logging.basicConfig(filename=&apos;example.log&apos;,level=logging.INFO)</span><br><span class="line">logging.debug(&apos;This message should go to the log file&apos;)</span><br><span class="line">logging.info(&apos;So should this&apos;)</span><br><span class="line">logging.warning(&apos;And this, too&apos;)</span><br><span class="line"></span><br><span class="line"># example.log内容如下</span><br><span class="line">INFO:root:So should this</span><br><span class="line">WARNING:root:And this, too</span><br></pre></td></tr></table></figure>
<h4 id="自定义日志格式"><a href="#自定义日志格式" class="headerlink" title="自定义日志格式"></a>自定义日志格式</h4><p>日志起码要有时间吧！</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import logging</span><br><span class="line">logging.basicConfig(format=&apos;%(asctime)s %(message)s&apos;, datefmt=&apos;%m/%d/%Y %I:%M:%S %p&apos;)</span><br><span class="line">logging.warning(&apos;is when this event was logged.&apos;)</span><br><span class="line"></span><br><span class="line">#输出</span><br><span class="line">12/12/2010 11:46:36 AM is when this event was logged.</span><br></pre></td></tr></table></figure>
<p>除了加时间，还可以自定义一大堆格式，下表就是所有支持的格式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">%(name)s	Logger的名字</span><br><span class="line">%(levelno)s	数字形式的日志级别</span><br><span class="line">%(levelname)s	文本形式的日志级别</span><br><span class="line">%(pathname)s	调用日志输出函数的模块的完整路径名，可能没有</span><br><span class="line">%(filename)s	调用日志输出函数的模块的文件名</span><br><span class="line">%(module)s	调用日志输出函数的模块名</span><br><span class="line">%(funcName)s	调用日志输出函数的函数名</span><br><span class="line">%(lineno)d	调用日志输出函数的语句所在的代码行</span><br><span class="line">%(created)f	当前时间，用UNIX标准的表示时间的浮 点数表示</span><br><span class="line">%(relativeCreated)d	输出日志信息时的，自Logger创建以 来的毫秒数</span><br><span class="line">%(asctime)s	字符串形式的当前时间。默认格式是 “2003-07-08 16:49:45,896”。逗号后面的是毫秒</span><br><span class="line">%(thread)d	线程ID。可能没有</span><br><span class="line">%(threadName)s	线程名。可能没有</span><br><span class="line">%(process)d	进程ID。可能没有</span><br><span class="line">%(message)s	用户输出的消息</span><br></pre></td></tr></table></figure>
<h4 id="日志同时输出到屏幕和文件"><a href="#日志同时输出到屏幕和文件" class="headerlink" title="日志同时输出到屏幕和文件"></a>日志同时输出到屏幕和文件</h4><p>如果想同时把log打印在屏幕和文件日志里，就需要了解一点复杂的知识 了</p>
<p>Python 使用logging模块记录日志涉及四个主要类，使用官方文档中的概括最为合适：</p>
<ul>
<li>logger提供了应用程序可以直接使用的接口；</li>
<li>handler将(logger创建的)日志记录发送到合适的目的输出；</li>
<li>filter提供了细度设备来决定输出哪条日志记录；</li>
<li>formatter决定日志记录的最终输出格式。</li>
</ul>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/M02/">M02</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2018/08/22/Py002-02-09常用模块八(subprocess)/" title="Py002-02-09常用模块八(subprocess)" itemprop="url">Py002-02-09常用模块八(subprocess)</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Stevin" target="_blank" itemprop="author">Stevin</a>
		
  <p class="article-time">
    <time datetime="2018-08-22T13:43:01.000Z" itemprop="datePublished"> Published 2018-08-22</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="subprocess-模块"><a href="#subprocess-模块" class="headerlink" title="subprocess 模块"></a>subprocess 模块</h3><p>跟操作系统打交道的模块</p>
<ul>
<li>run</li>
<li>call</li>
<li>Popen 前两种的底层实现</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import subprocess</span><br><span class="line"></span><br><span class="line">a = subprocess.run([&apos;df&apos;,&apos;-h&apos;])</span><br><span class="line">print(a.args) # 命令的参数</span><br><span class="line">print(a.returncode) # 命令行的返回结果 0代表成功</span><br><span class="line">a.stderr</span><br><span class="line">a.stdout</span><br><span class="line">a.check_returncode() 非 0 报错</span><br></pre></td></tr></table></figure>
<blockquote>
<p>进程   word无法访问 qq的内存数据 不然就会把qq搞崩了， 所以每个应用的内存数据是相互独立的</p>
</blockquote>
<p>疑问?  qq里 别人一段消息  你ctrl + c之后 在word里 ctrl + v 数据就过去了？ 因为这是操作系统帮你做的</p>
<blockquote>
<h4 id="subprocess-执行时会开启一个进程，那返回的结果-如何获取呢？-答案是通过操作系统的桥梁"><a href="#subprocess-执行时会开启一个进程，那返回的结果-如何获取呢？-答案是通过操作系统的桥梁" class="headerlink" title="subprocess 执行时会开启一个进程，那返回的结果  如何获取呢？ 答案是通过操作系统的桥梁"></a>subprocess 执行时会开启一个进程，那返回的结果  如何获取呢？ 答案是通过操作系统的桥梁</h4></blockquote>
<ul>
<li>subprocess.PIPE 就是管道</li>
<li>check=True 如果不加 执行命令出错了 整个程序没有出错  加了会有报错信息</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">s = subprocess.run([&apos;df&apos;,&apos;-h&apos;],stderr=subprocess.PIPE,stdout=subprocess.PIPE,check=True)</span><br><span class="line"></span><br><span class="line">print(s.stdout)</span><br></pre></td></tr></table></figure>
<blockquote>
<h4 id="如果我想执行-带管道的命令呢？-答案是报错-因为subprocess本身就带管道里-如果命令还带就报错"><a href="#如果我想执行-带管道的命令呢？-答案是报错-因为subprocess本身就带管道里-如果命令还带就报错" class="headerlink" title="如果我想执行 带管道的命令呢？  答案是报错  因为subprocess本身就带管道里  如果命令还带就报错"></a>如果我想执行 带管道的命令呢？  答案是报错  因为subprocess本身就带管道里  如果命令还带就报错</h4></blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># s = subprocess.run([&apos;df&apos;,&apos;-h&apos;,&apos;|&apos;,&apos;grep&apos;,&apos;disk1&apos;],stderr=subprocess.PIPE,stdout=subprocess.PIPE,check=True)</span><br><span class="line"></span><br><span class="line"># 发现还是报错</span><br><span class="line"># s = subprocess.run(&apos;df -h |grep disk1&apos;,stderr=subprocess.PIPE,stdout=subprocess.PIPE,check=True)</span><br><span class="line"></span><br><span class="line"># 添加shell参数 意思是之前是列表里 拼参数  现在你别管了 把整条命令传给 shell执行</span><br><span class="line">s = subprocess.run(&apos;df -h |grep disk1&apos;, stderr = subprocess.PIPE, stdout = subprocess.PIPE, shell=True)</span><br></pre></td></tr></table></figure>
<h4 id="call方法"><a href="#call方法" class="headerlink" title="call方法"></a>call方法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#执行命令，返回命令执行状态 ， 0 or 非0</span><br><span class="line">&gt;&gt;&gt; retcode = subprocess.call([&quot;ls&quot;, &quot;-l&quot;])</span><br><span class="line"></span><br><span class="line">#执行命令，如果命令结果为0，就正常返回，否则抛异常</span><br><span class="line">&gt;&gt;&gt; subprocess.check_call([&quot;ls&quot;, &quot;-l&quot;])</span><br><span class="line">0</span><br><span class="line"></span><br><span class="line">#接收字符串格式命令，返回元组形式，第1个元素是执行状态，第2个是命令结果 </span><br><span class="line">&gt;&gt;&gt; subprocess.getstatusoutput(&apos;ls /bin/ls&apos;)</span><br><span class="line">(0, &apos;/bin/ls&apos;)</span><br><span class="line"></span><br><span class="line">#接收字符串格式命令，并返回结果</span><br><span class="line">&gt;&gt;&gt; subprocess.getoutput(&apos;ls /bin/ls&apos;)</span><br><span class="line">&apos;/bin/ls&apos;</span><br><span class="line"></span><br><span class="line">#执行命令，并返回结果，注意是返回结果，不是打印，下例结果返回给res</span><br><span class="line">&gt;&gt;&gt; res=subprocess.check_output([&apos;ls&apos;,&apos;-l&apos;])</span><br><span class="line">&gt;&gt;&gt; res</span><br><span class="line">b&apos;total 0\ndrwxr-xr-x 12 alex staff 408 Nov 2 11:05 OldBoyCRM\n&apos;</span><br></pre></td></tr></table></figure>
<h4 id="Popen-方法"><a href="#Popen-方法" class="headerlink" title="Popen()方法"></a>Popen()方法</h4><ul>
<li>args：shell命令，可以是字符串或者序列类型（如：list，元组）</li>
<li>stdin, stdout, stderr：分别表示程序的标准输入、输出、错误句柄</li>
<li>preexec_fn：只在Unix平台下有效，用于指定一个可执行对象（callable object），它将在子进程运行之前被调用</li>
<li>shell：同上</li>
<li>cwd：用于设置子进程的当前目录</li>
<li>env：用于指定子进程的环境变量。如果env = None，子进程的环境变量将从父进程中继承。</li>
</ul>
<blockquote>
<p>下面这2条语句执行会有什么区别？</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a=subprocess.run(&apos;sleep 10&apos;,shell=True,stdout=subprocess.PIPE)</span><br><span class="line">a=subprocess.Popen(&apos;sleep 10&apos;,shell=True,stdout=subprocess.PIPE)</span><br></pre></td></tr></table></figure>
<p>区别是Popen会在发起命令后立刻返回，而不等命令执行结果。这样的好处是什么呢？</p>
<p>如果你调用的命令或脚本 需要执行10分钟，你的主程序不需卡在这里等10分钟，可以继续往下走，干别的事情，每过一会，通过一个什么方法来检测一下命令是否执行完成就好了。</p>
<p>Popen调用后会返回一个对象，可以通过这个对象拿到命令执行结果或状态等，该对象有以下方法</p>
<ul>
<li>poll()</li>
</ul>
<p>结论：run方法同步，Popen会新开一个进程不影响主程序，可以通过poll方法获取命令的返回结果</p>
<blockquote>
<p>preexex_fn是什么鬼？代表执行命令前先执行的方法</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import subprocess</span><br><span class="line"></span><br><span class="line">def sayHi():</span><br><span class="line">    print(&apos;hello&apos;)</span><br><span class="line"></span><br><span class="line">a = subprocess.Popen(&apos;sleep 10&apos;,stdout=subprocess.PIPE,shell=True,preexec_fn=sayHi)</span><br><span class="line">a.stdout</span><br><span class="line">s = a.stdout.read()</span><br><span class="line"></span><br><span class="line">print(s)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>cwd 用于设置子进程的当前目录</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a = subprocess.Popen(&apos;echo $PWD&apos;,cwd=&apos;/Users/almost/Desktop/pycode&apos;,stdout=subprocess.PIPE,shell=True)</span><br><span class="line">a.stdout</span><br><span class="line">s = a.stdout.read()</span><br><span class="line"></span><br><span class="line">print(s) # b&apos;/Users/almost/Desktop/pycode\n&apos;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>wait() 等待子进程的结果</p>
</blockquote>
<blockquote>
<p>terminate()终止所启动的进程Terminate the process with SIGTERM</p>
</blockquote>
<blockquote>
<p>kill() 杀死所启动的进程 Kill the process with SIGKILL</p>
</blockquote>
<blockquote>
<p>communicate()与启动的进程交互，发送数据到stdin,并从stdout接收输出，然后等待任务结束</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; a = subprocess.Popen(&apos;python3 guess_age.py&apos;,stdout=subprocess.PIPE,stderr=subprocess.PIPE,stdin=subprocess.PIPE,shell=True)</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; a.communicate(b&apos;22&apos;)</span><br><span class="line">(b&apos;your guess:try bigger\n&apos;, b&apos;&apos;)</span><br></pre></td></tr></table></figure>
<p>send_signal(signal.xxx)发送系统信号</p>
<p>pid 拿到所启动进程的进程号</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/M02/">M02</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2018/08/22/Py002-02-08常用模块七(hashlib)/" title="Py002-02-08常用模块七(hashlib)" itemprop="url">Py002-02-08常用模块七(hashlib)</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Stevin" target="_blank" itemprop="author">Stevin</a>
		
  <p class="article-time">
    <time datetime="2018-08-22T12:32:13.000Z" itemprop="datePublished"> Published 2018-08-22</time>
    
  </p>
</header>
    <div class="article-content">
        
        <blockquote>
<h3 id="加密算法介绍"><a href="#加密算法介绍" class="headerlink" title="加密算法介绍"></a>加密算法介绍</h3></blockquote>
<h3 id="HASH"><a href="#HASH" class="headerlink" title="HASH"></a>HASH</h3><p>一种将任意长度的消息压缩到某一固定长度的消息摘要的函数</p>
<p>不可逆，也就是无法通过hash值反推原数据信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 第一次运行</span><br><span class="line">hash(&apos;hjx&apos;) # 4843833162619343159</span><br><span class="line"># 第二次运行</span><br><span class="line">hash(&apos;hjx&apos;) # 3179283320655676208</span><br><span class="line"># 第三次运行</span><br><span class="line">hash(&apos;hjx&apos;) # -1078172669992245685</span><br></pre></td></tr></table></figure>
<p>结论：每次对同一内容进行hash后  值是不同的(大多数情况下)</p>
<h3 id="MD5"><a href="#MD5" class="headerlink" title="MD5"></a>MD5</h3><p>基于hash的，一种加密算法。</p>
<h4 id="MD5功能"><a href="#MD5功能" class="headerlink" title="MD5功能"></a>MD5功能</h4><blockquote>
<p>输入任意长度的信息，经过处理，输出为128位的信息（数字指纹）；<br>不同的输入得到的不同的结果（唯一性）；</p>
</blockquote>
<p>也就是16位字符的信息</p>
<h4 id="MD5算法的特点"><a href="#MD5算法的特点" class="headerlink" title="MD5算法的特点"></a>MD5算法的特点</h4><ul>
<li>压缩性：任意长度的数据，算出的MD5值的长度都是固定的</li>
<li>容易计算：从原数据计算出MD5值很容易</li>
<li>抗修改性：对原数据进行任何改动，修改一个字节生成的MD5值区别也会很大</li>
<li>强抗碰撞：已知原数据和MD5，想找到一个具有相同MD5值的数据（即伪造数据）是非常困难的。</li>
</ul>
<h4 id="MD5算法是否可逆？"><a href="#MD5算法是否可逆？" class="headerlink" title="MD5算法是否可逆？"></a>MD5算法是否可逆？</h4><p>MD5不可逆的原因是其是一种散列函数，使用的是hash算法，在计算过程中原文的部分信息是丢失了的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">import hashlib</span><br><span class="line"></span><br><span class="line">m = hashlib.md5()</span><br><span class="line"></span><br><span class="line">m.update(b&apos;hjx&apos;)</span><br><span class="line">a = m.hexdigest()</span><br><span class="line"></span><br><span class="line">print(a) # ffd529f6b20aff2291bf876c68433e78 </span><br><span class="line"></span><br><span class="line"># 长度32的16进制字符 我们知道两个16进制数代表一个字节 所以就是32/2 = 16字节  </span><br><span class="line"># 一字节8位 所以 正好是16*8 = 128位</span><br><span class="line"></span><br><span class="line"># 而且这个md5值 不管在任何语言任何平台生成的值都是一样的，不变的</span><br></pre></td></tr></table></figure>
<blockquote>
<p>生活实例：支付宝密码如  if123456</p>
</blockquote>
<p>你肯定会担心，支付宝的后台维护人员知道我的密码，到时候他跑路了，盗取账号咋办？</p>
<ol>
<li>你的密码在支付宝数据库里存的不是明文 if123456</li>
<li>存的是类似 md5 的形式。[ffd529f6b20aff2291bf876c68433e78]</li>
<li>支付宝维护人员看到这个 md5 值也没有用,因为他拿这个 密码的md5值 [ffd529f6b20aff2291bf876c68433e78] 登录你的支付宝就会又进行一次md5 加密 生成新的值[87a28ad32d3dc1747c2c65c4dcc99e64]</li>
<li>肯定不是  if123456加密的值<br>[ffd529f6b20aff2291bf876c68433e78] != [87a28ad32d3dc1747c2c65c4dcc99e64] </li>
</ol>
<h4 id="MD5用途"><a href="#MD5用途" class="headerlink" title="MD5用途"></a>MD5用途</h4><blockquote>
<p>防止被篡改：</p>
</blockquote>
<ul>
<li><p>比如发送一个电子文档，发送前，我先得到MD5的输出结果a。然后在对方收到电子文档后，对方也得到一个MD5的输出结果b。如果a与b一样就代表中途未被篡改。</p>
</li>
<li><p>比如我提供文件下载，为了防止不法分子在安装程序中添加木马，我可以在网站上公布由安装文件得到的MD5输出结果。</p>
</li>
<li><p>SVN在检测文件是否在CheckOut后被修改过，也是用到了MD5.</p>
</li>
</ul>
<blockquote>
<p>防止直接看到明文：</p>
</blockquote>
<ul>
<li>现在很多网站在数据库存储用户的密码的时候都是存储用户密码的MD5值。这样就算不法分子得到数据库的用户密码的MD5值，也无法知道用户的密码。（比如在UNIX系统中用户的密码就是以MD5（或其它类似的算法）经加密后存储在文件系统中。当用户登录的时候，系统把用户输入的密码计算成MD5值，然后再去和保存在文件系统中的MD5值进行比较，进而确定输入的密码是否正确。通过这样的步骤，系统在并不知道用户密码的明码的情况下就可以确定用户登录系统的合法性。这不但可以避免用户的密码被具有系统管理员权限的用户知道，而且还在一定程度上增加了密码被破解的难度。）</li>
</ul>
<blockquote>
<p>防止抵赖（数字签名）：</p>
</blockquote>
<ul>
<li>这需要一个第三方认证机构。例如A写了一个文件，认证机构对此文件用MD5算法产生摘要信息并做好记录。若以后A说这文件不是他写的，权威机构只需对此文件重新产生摘要信息，然后跟记录在册的摘要信息进行比对，相同的话，就证明是A写的了。这就是所谓的“数字签名”。</li>
</ul>
<h4 id="网上的破解md5密码原理"><a href="#网上的破解md5密码原理" class="headerlink" title="网上的破解md5密码原理"></a>网上的破解md5密码原理</h4><p>实际上是撞库,它自己的数据库收集了常用密码生成的md5值，如果匹配上了就代表成功了，反之就破解不了</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/M02/">M02</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2018/08/21/Py002-02-07常用模块六(configparser)/" title="Py002-02-07常用模块六(configparser)" itemprop="url">Py002-02-07常用模块六(configparser)</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Stevin" target="_blank" itemprop="author">Stevin</a>
		
  <p class="article-time">
    <time datetime="2018-08-21T14:27:02.000Z" itemprop="datePublished"> Published 2018-08-21</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="configparser-配置解析模块"><a href="#configparser-配置解析模块" class="headerlink" title="configparser 配置解析模块"></a>configparser 配置解析模块</h3><p>此模块用于生成和修改常见配置文档，当前模块的名称在 python 3.x 版本中变更为 configparser。</p>
<p>来看一个好多软件的常见配置文件格式如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[DEFAULT]</span><br><span class="line">ServerAliveInterval = 45   </span><br><span class="line">Compression = yes</span><br><span class="line">CompressionLevel = 9</span><br><span class="line">ForwardX11 = yes</span><br><span class="line"></span><br><span class="line">[bitbucket.org]</span><br><span class="line">User = hg</span><br><span class="line"></span><br><span class="line">[topsecret.server.com]</span><br><span class="line">Port = 50022</span><br><span class="line">ForwardX11 = no</span><br></pre></td></tr></table></figure>
<blockquote>
<p>解析配置文件</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import configparser</span><br><span class="line"></span><br><span class="line">conf = configparser.ConfigParser()</span><br><span class="line"></span><br><span class="line">conf.read(&apos;conf.ini&apos;)</span><br><span class="line"></span><br><span class="line">print(conf.sections()) # 打印每个section 但是不打印 default里的</span><br><span class="line">print(conf.default_section)</span><br><span class="line"></span><br><span class="line">print(conf[&apos;bitbucket.ort&apos;][&apos;User&apos;]) # hg</span><br><span class="line"></span><br><span class="line">print(list(conf[&apos;bitbucket.ort&apos;].keys()))</span><br></pre></td></tr></table></figure>
<blockquote>
<p>其它增删改查语法</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[group1] # 支持的两种分隔符“=”, “:”</span><br><span class="line">k1 = v1</span><br><span class="line">k2:v2</span><br><span class="line"></span><br><span class="line">[group2]</span><br><span class="line">k1 = v1</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">import configparser</span><br><span class="line"></span><br><span class="line">config = configparser.ConfigParser()</span><br><span class="line">config.read(&apos;i.cfg&apos;)</span><br><span class="line"></span><br><span class="line"># ########## 读 ##########</span><br><span class="line">#secs = config.sections()</span><br><span class="line">#print(secs)</span><br><span class="line">#options = config.options(&apos;group2&apos;) # 获取指定section的keys</span><br><span class="line">#print(options)</span><br><span class="line"></span><br><span class="line">#item_list = config.items(&apos;group2&apos;) # 获取指定 section 的 keys &amp; values ,key value 以元组的形式</span><br><span class="line">#print(item_list)</span><br><span class="line"></span><br><span class="line">#val = config.get(&apos;group1&apos;,&apos;key&apos;) # 获取指定的key 的value</span><br><span class="line">#val = config.getint(&apos;group1&apos;,&apos;key&apos;)</span><br><span class="line"></span><br><span class="line"># ########## 改写 ##########</span><br><span class="line">#sec = config.remove_section(&apos;group1&apos;) # 删除section 并返回状态(true, false)</span><br><span class="line">#config.write(open(&apos;i.cfg&apos;, &quot;w&quot;)) # 对应的删除操作要写入文件才会生效</span><br><span class="line"></span><br><span class="line">#sec = config.has_section(&apos;wupeiqi&apos;)</span><br><span class="line">#sec = config.add_section(&apos;wupeiqi&apos;)</span><br><span class="line">#config.write(open(&apos;i.cfg&apos;, &quot;w&quot;)) # </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#config.set(&apos;group2&apos;,&apos;k1&apos;,11111)</span><br><span class="line">#config.write(open(&apos;i.cfg&apos;, &quot;w&quot;))</span><br><span class="line"></span><br><span class="line">#config.remove_option(&apos;group2&apos;,&apos;age&apos;)</span><br><span class="line">#config.write(open(&apos;i.cfg&apos;, &quot;w&quot;))</span><br></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/M02/">M02</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <a class="extend prev" rel="prev" href="/page/33/"><span></span>Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/32/">32</a><a class="page-number" href="/page/33/">33</a><span class="page-number current">34</span><a class="page-number" href="/page/35/">35</a><a class="page-number" href="/page/36/">36</a><span class="space">&hellip;</span><a class="page-number" href="/page/50/">50</a><a class="extend next" rel="next" href="/page/35/">Next<span></span></a>
  </nav>

</div>
      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">

  


  

  
<div class="tagslist">
	<p class="asidetitle">Tags</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/oak/" title="oak">oak<sup>71</sup></a></li>
			
		
			
				<li><a href="/tags/前端知识点/" title="前端知识点">前端知识点<sup>43</sup></a></li>
			
		
			
				<li><a href="/tags/java/" title="java">java<sup>37</sup></a></li>
			
		
			
				<li><a href="/tags/Node后端/" title="Node后端">Node后端<sup>34</sup></a></li>
			
		
			
				<li><a href="/tags/M06/" title="M06">M06<sup>29</sup></a></li>
			
		
			
				<li><a href="/tags/fullstack/" title="fullstack">fullstack<sup>27</sup></a></li>
			
		
			
				<li><a href="/tags/M07/" title="M07">M07<sup>27</sup></a></li>
			
		
			
				<li><a href="/tags/python/" title="python">python<sup>26</sup></a></li>
			
		
			
				<li><a href="/tags/M08/" title="M08">M08<sup>25</sup></a></li>
			
		
			
				<li><a href="/tags/M04/" title="M04">M04<sup>22</sup></a></li>
			
		
			
				<li><a href="/tags/M03/" title="M03">M03<sup>20</sup></a></li>
			
		
			
				<li><a href="/tags/M02/" title="M02">M02<sup>17</sup></a></li>
			
		
			
				<li><a href="/tags/React入门/" title="React入门">React入门<sup>17</sup></a></li>
			
		
			
				<li><a href="/tags/ReactWheels/" title="ReactWheels">ReactWheels<sup>16</sup></a></li>
			
		
			
				<li><a href="/tags/TS入门/" title="TS入门">TS入门<sup>16</sup></a></li>
			
		
			
				<li><a href="/tags/CSS/" title="CSS">CSS<sup>10</sup></a></li>
			
		
			
				<li><a href="/tags/M01/" title="M01">M01<sup>9</sup></a></li>
			
		
			
				<li><a href="/tags/vue/" title="vue">vue<sup>8</sup></a></li>
			
		
			
				<li><a href="/tags/ES6速学/" title="ES6速学">ES6速学<sup>7</sup></a></li>
			
		
			
				<li><a href="/tags/mongodb/" title="mongodb">mongodb<sup>7</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">Links</p>
    <ul>
        
          <li>
            
            	<a href="https://coderq.com" target="_blank" title="一个面向程序员交流分享的新一代社区">码农圈</a>
            
          </li>
        
          <li>
            
            	<a href="http://wuchong.me" target="_blank" title="Jark&#39;s Blog">Jark&#39;s Blog</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS</a>
</div>

  <div class="weiboshow">
  <p class="asidetitle">Weibo</p>
    <iframe width="100%" height="119" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=119&fansRow=2&ptype=1&speed=0&skin=9&isTitle=1&noborder=1&isWeibo=0&isFans=0&uid=&verifier=b3593ceb&dpc=1"></iframe>
</div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello ,I&#39;m Larry Page in Google. <br/>
			This is my blog,believe it or not.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/2176287895" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2020 
		
		<a href="/about" target="_blank" title="Stevin">Stevin</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>












<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e6d1f421bbc9962127a50488f9ed37d1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="Back to Top"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
 </html>
