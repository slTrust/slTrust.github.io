
 <!DOCTYPE HTML>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
  
    <title>Almost</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="Stevin">
    

    
    <meta property="og:type" content="website">
<meta property="og:title" content="Almost">
<meta property="og:url" content="http://yoursite.com/page/22/index.html">
<meta property="og:site_name" content="Almost">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Almost">

    
    <link rel="alternative" href="/atom.xml" title="Almost" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
</head>
</html>
  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="Almost" title="Almost"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Almost">Almost</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="Search" />
						<input type="hidden" name="q" value="site:yoursite.com">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/01/29/TS入门002用TS开发命令行程序/" title="TS入门002用TS开发命令行程序" itemprop="url">TS入门002用TS开发命令行程序</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Stevin" target="_blank" itemprop="author">Stevin</a>
		
  <p class="article-time">
    <time datetime="2019-01-29T13:53:53.000Z" itemprop="datePublished"> Published 2019-01-29</time>
    
  </p>
</header>
    <div class="article-content">
        
        <blockquote>
<h3 id="自学知识的误区"><a href="#自学知识的误区" class="headerlink" title="自学知识的误区"></a>自学知识的误区</h3></blockquote>
<ul>
<li>不要怕(不要因为没学过而不学了，没学才应该学啊)</li>
<li>不要妄图系统学习，了解常用功能</li>
<li>有目的的学，不要没目的的看书 看10本书</li>
</ul>
<h3 id="带着目的学习"><a href="#带着目的学习" class="headerlink" title="带着目的学习"></a>带着目的学习</h3><ul>
<li>写一个命令行工具</li>
<li>再写一个</li>
<li>回到第一步，直到你觉得你学的不错了</li>
</ul>
<p>不要去看书，不要去看文档，遇到问题再去看文档，再去google</p>
<blockquote>
<p>通过解决一个个的小问题来学习 TS</p>
</blockquote>
<h3 id="最简单的命令行程序"><a href="#最简单的命令行程序" class="headerlink" title="最简单的命令行程序"></a>最简单的命令行程序</h3><p>1.新建 001.ts</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env ts-node</span><br><span class="line">console.log(&apos;hello world&apos;);</span><br></pre></td></tr></table></figure>
<p>第一行不要问为什么之间照抄！——其实就是 shebang 跟python 文件首行一样 代表指定那个命令来执行此脚本</p>
<p>2.添加执行权限并执行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 添加权限</span><br><span class="line">chmod +x 001.ts</span><br><span class="line"></span><br><span class="line"># 执行</span><br><span class="line">./001.ts</span><br><span class="line"></span><br><span class="line"># 打印</span><br><span class="line">hello world</span><br></pre></td></tr></table></figure>
<h3 id="脚本升级-可以在后面跟参数"><a href="#脚本升级-可以在后面跟参数" class="headerlink" title="脚本升级 可以在后面跟参数"></a>脚本升级 可以在后面跟参数</h3><p>如</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vue --version</span><br><span class="line"></span><br><span class="line">curl -L https://www.baidu.com</span><br><span class="line"></span><br><span class="line">git add xx</span><br><span class="line"></span><br><span class="line">git commit -m &apos;sss&apos;</span><br></pre></td></tr></table></figure>
<blockquote>
<h4 id="process-argv参数"><a href="#process-argv参数" class="headerlink" title="process.argv参数"></a>process.argv参数</h4></blockquote>
<p>这个变量可以获取到用户输入的这一行内容</p>
<p>新建 002.ts</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env ts-node</span><br><span class="line">console.log(process.argv);</span><br><span class="line">console.log(&apos;hello world&apos;);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">chmod +x 001.ts</span><br><span class="line">./002.ts</span><br><span class="line"></span><br><span class="line"># 报错了</span><br></pre></td></tr></table></figure>
<blockquote>
<p>新人在学习最怕什么，最怕的不是知识点复杂，而是你告诉我这样可以运行，但是我运行之后呢？——运行不了，这就进行不下去了</p>
</blockquote>
<p>我们先看报错信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/lib/node_modules/ts-node/src/index.ts:261</span><br><span class="line">    return new TSError(diagnosticText, diagnosticCodes)</span><br><span class="line">           ^</span><br><span class="line">TSError: ⨯ Unable to compile TypeScript:</span><br><span class="line">002.ts(2,13): error TS2304: Cannot find name &apos;process&apos;.</span><br><span class="line"></span><br><span class="line">    at createTSError (/usr/local/lib/node_modules/ts-node/src/index.ts:261:12)</span><br><span class="line">    at getOutput (/usr/local/lib/node_modules/ts-node/src/index.ts:367:40)</span><br><span class="line">    at Object.compile (/usr/local/lib/node_modules/ts-node/src/index.ts:557:11)</span><br><span class="line">    at Module.m._compile (/usr/local/lib/node_modules/ts-node/src/index.ts:439:43)</span><br><span class="line">    at Module._extensions..js (internal/modules/cjs/loader.js:700:10)</span><br><span class="line">    at Object.require.extensions.(anonymous function) [as .ts] (/usr/local/lib/node_modules/ts-node/src/index.ts:442:12)</span><br><span class="line">    at Module.load (internal/modules/cjs/loader.js:599:32)</span><br><span class="line">    at tryModuleLoad (internal/modules/cjs/loader.js:538:12)</span><br><span class="line">    at Function.Module._load (internal/modules/cjs/loader.js:530:3)</span><br><span class="line">    at Function.Module.runMain (internal/modules/cjs/loader.js:742:12)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>如果你看不懂</p>
</blockquote>
<ul>
<li>一个一个字的查字典</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># ts 没有能力 编译</span><br><span class="line">TSError: ⨯ Unable to compile TypeScript:</span><br><span class="line"># 再看 第二行 第13个字有问题 报错编号是 TS2304 意思是找不到 process</span><br><span class="line">002.ts(2,13): error TS2304: Cannot find name &apos;process&apos;.</span><br><span class="line"></span><br><span class="line"># 后面是细节</span><br></pre></td></tr></table></figure>
<blockquote>
<h4 id="怎么办？"><a href="#怎么办？" class="headerlink" title="怎么办？"></a>怎么办？</h4></blockquote>
<blockquote>
<h4 id="怎么办？-1"><a href="#怎么办？-1" class="headerlink" title="怎么办？"></a>怎么办？</h4></blockquote>
<blockquote>
<h4 id="怎么办？-2"><a href="#怎么办？-2" class="headerlink" title="怎么办？"></a>怎么办？</h4></blockquote>
<h3 id="程序员最6的查-bug-方式就是复制这行错误到-google"><a href="#程序员最6的查-bug-方式就是复制这行错误到-google" class="headerlink" title="程序员最6的查 bug 方式就是复制这行错误到 google"></a>程序员最6的查 bug 方式就是复制这行错误到 google</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">error TS2304: Cannot find name &apos;process&apos;.</span><br><span class="line"></span><br><span class="line">实际上这是 Node.js 的全局变量，不可能找不到。</span><br><span class="line"></span><br><span class="line">这就是 TS 的厉害之处：如果你不告诉我 process 是什么，我就不允许你用 process。</span><br><span class="line"></span><br><span class="line">那么如何告诉 TS process 是什么呢？</span><br></pre></td></tr></table></figure>
<p>得到内容挨个点进去看</p>
<p>过程：</p>
<ol>
<li>复制 error TS2304: Cannot find name ‘process’. 到 Google</li>
<li>找到 Stackoverflow 上的一篇<a href="https://stackoverflow.com/questions/35551185/read-arguments-from-command-line-error-ts2304-cannot-find-name-process" target="_blank" rel="noopener">问答</a></li>
<li>得知要安装 Typings，于是点开<a href="https://www.npmjs.com/package/typings" target="_blank" rel="noopener">他给的链接</a></li>
<li>看到页面上方显示 Typings is deprecated in favor of NPM @types</li>
<li>得知 Typings 已经被弃用了，但是这货不告诉我新版在哪</li>
<li>猜测新版是 @types/node （纯经验）</li>
<li>运行 npm install @types/node 然后运行 ./2.ts 发现成功</li>
<li>去 Stackoverflow 回复一下，以防别人也遇到不知道新版名称</li>
<li>回复的时候发现已经有人回复了 with typescript 2, its now npm i -D @types/node</li>
<li>发现他用了 -D 选项但是我没有使用，根据我对 npm 的了解，加不加 -D 都行，加上更好一点。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 复制到刚才的目录里执行</span><br><span class="line">npm i -D @types/node</span><br></pre></td></tr></table></figure>
<p>结果又警告</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">npm WARN saveError ENOENT: no such file or directory, open &apos;/Users/huangjiaxi/Desktop/typescript-demo/ts002/package.json&apos;</span><br><span class="line">npm notice created a lockfile as package-lock.json. You should commit this file.</span><br><span class="line">npm WARN enoent ENOENT: no such file or directory, open &apos;/Users/huangjiaxi/Desktop/typescript-demo/ts002/package.json&apos;</span><br><span class="line">npm WARN ts002 No description</span><br><span class="line">npm WARN ts002 No repository field.</span><br><span class="line">npm WARN ts002 No README data</span><br><span class="line">npm WARN ts002 No license field.</span><br><span class="line"></span><br><span class="line">+ @types/node@10.12.19</span><br><span class="line">added 1 package from 33 contributors and audited 1 package in 2.191s</span><br><span class="line">found 0 vulnerabilities</span><br></pre></td></tr></table></figure>
<p>意思是没有 package.json,我这目录确实没有，那就创建一个</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 最快创建 package.json 的方法</span><br><span class="line">npm init -y</span><br><span class="line"></span><br><span class="line"># 重新运行</span><br><span class="line">npm i -D @types/node</span><br><span class="line"></span><br><span class="line"># 此时就单独 警告  没有描述 没有远程仓库</span><br><span class="line">npm WARN ts002@1.0.0 No description</span><br><span class="line">npm WARN ts002@1.0.0 No repository field.</span><br><span class="line"></span><br><span class="line">+ @types/node@10.12.19</span><br><span class="line">updated 1 package and audited 1 package in 1.66s</span><br><span class="line">found 0 vulnerabilities</span><br></pre></td></tr></table></figure>
<blockquote>
<h3 id="再次执行-002-ts"><a href="#再次执行-002-ts" class="headerlink" title="再次执行 002.ts"></a>再次执行 002.ts</h3></blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">./002.ts</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 打印如下信息</span><br><span class="line">[ &apos;node&apos;,</span><br><span class="line">  &apos;/Users/huangjiaxi/Desktop/typescript-demo/ts002/002.ts&apos; ]</span><br><span class="line">hello world</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">[ &apos;node&apos;,&apos;/Users/huangjiaxi/Desktop/typescript-demo/ts002/002.ts&apos; ]</span><br><span class="line">这个 node 就是 002.ts 的第一行 告诉这个程序用什么来运行</span><br><span class="line">第二个就是 当前文件的绝对路径</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>
<p>添加自己的参数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">./002.ts  xxx yyy zzz</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 打印</span><br><span class="line">[ &apos;node&apos;,</span><br><span class="line">  &apos;/Users/huangjiaxi/Desktop/typescript-demo/ts002/002.ts&apos;,</span><br><span class="line">  &apos;xxx&apos;,</span><br><span class="line">  &apos;yyy&apos;,</span><br><span class="line">  &apos;zzz&apos; ]</span><br><span class="line">  hello world</span><br></pre></td></tr></table></figure>
<h3 id="两数之和的程序"><a href="#两数之和的程序" class="headerlink" title="两数之和的程序"></a>两数之和的程序</h3><p>新建 003add.ts</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env ts-node</span><br><span class="line">console.log( process.argv );</span><br><span class="line">let a = process.argv[2];</span><br><span class="line">let b = process.argv[3];</span><br><span class="line"></span><br><span class="line">console.log( a + b );</span><br></pre></td></tr></table></figure>
<p>执行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">chomd +x 003add.ts</span><br><span class="line">./003add.ts  1 2</span><br><span class="line"></span><br><span class="line"># 得到结果</span><br><span class="line">[ &apos;node&apos;,</span><br><span class="line">  &apos;/Users/huangjiaxi/Desktop/typescript-demo/ts002/003add.ts&apos;,</span><br><span class="line">  &apos;1&apos;,</span><br><span class="line">  &apos;2&apos; ]</span><br><span class="line">12</span><br><span class="line"></span><br><span class="line"># 为啥是 12</span><br><span class="line">你可以打印 process.argv 来看内容 数组里的内容是 字符串啊</span><br><span class="line"></span><br><span class="line"># 所以我们要解决这个类型问题</span><br></pre></td></tr></table></figure>
<p>004add.ts</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env ts-node</span><br><span class="line">let a:number = parseInt( process.argv[2] );</span><br><span class="line">let b:number = parseInt( process.argv[3] );</span><br><span class="line"></span><br><span class="line">console.log( a + b );</span><br></pre></td></tr></table></figure>
<p>执行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">chmod +x 004add.ts</span><br><span class="line">./004add.ts 1 2</span><br><span class="line"></span><br><span class="line"># 打印 </span><br><span class="line">3</span><br><span class="line"></span><br><span class="line"># 但是如果这样执行呢？</span><br><span class="line">./004add.ts 1 s</span><br><span class="line">竟然得到了 NaN</span><br></pre></td></tr></table></figure>
<blockquote>
<p>然后聪明的你肯定用 Number.isNaN() 判断</p>
</blockquote>
<ul>
<li>005add.ts</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env ts-node</span><br><span class="line">let a:number = parseInt( process.argv[2] );</span><br><span class="line">let b:number = parseInt( process.argv[3] );</span><br><span class="line"></span><br><span class="line">if(Number.isNaN(a)||Number.isNaN(b))&#123;</span><br><span class="line">    console.log(&apos;出错啦！&apos;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">console.log( a + b );</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">chmod +x 005add.ts</span><br><span class="line">./005add.ts 1 s</span><br><span class="line"></span><br><span class="line"># 又报错了</span><br><span class="line"></span><br><span class="line"> return new TSError(diagnosticText, diagnosticCodes)</span><br><span class="line">           ^</span><br><span class="line">TSError: ⨯ Unable to compile TypeScript:</span><br><span class="line">005add.ts(5,11): error TS2339: Property &apos;isNaN&apos; does not exist on type &apos;NumberConstructor&apos;.</span><br><span class="line">005add.ts(5,28): error TS2339: Property &apos;isNaN&apos; does not exist on type &apos;NumberConstructor&apos;.</span><br><span class="line"></span><br><span class="line">    at createTSError (/usr/local/lib/node_modules/ts-node/src/index.ts:261:12)</span><br><span class="line">    at getOutput (/usr/local/lib/node_modules/ts-node/src/index.ts:367:40)</span><br><span class="line">    at Object.compile (/usr/local/lib/node_modules/ts-node/src/index.ts:557:11)</span><br><span class="line">    at Module.m._compile (/usr/local/lib/node_modules/ts-node/src/index.ts:439:43)</span><br><span class="line">    at Module._extensions..js (internal/modules/cjs/loader.js:700:10)</span><br><span class="line">    at Object.require.extensions.(anonymous function) [as .ts] (/usr/local/lib/node_modules/ts-node/src/index.ts:442:12)</span><br><span class="line">    at Module.load (internal/modules/cjs/loader.js:599:32)</span><br><span class="line">    at tryModuleLoad (internal/modules/cjs/loader.js:538:12)</span><br><span class="line">    at Function.Module._load (internal/modules/cjs/loader.js:530:3)</span><br><span class="line">    at Function.Module.runMain (internal/modules/cjs/loader.js:742:12)</span><br><span class="line"></span><br><span class="line">-----------------------------------------------</span><br><span class="line"># 复制这行 error 到 google</span><br><span class="line"></span><br><span class="line">error TS2339: Property &apos;isNaN&apos; does not exist on type &apos;NumberConstructor&apos;.</span><br><span class="line"></span><br><span class="line">在给出的链接里 看信息</span><br><span class="line"># 我搜到一个信息是</span><br><span class="line">These are part of the es2015 library. make sure you have --lib es2015</span><br><span class="line"></span><br><span class="line">意思是 确保你又 es2015</span><br><span class="line"></span><br><span class="line">最终我找到的结果就是 添加一个 tsconfig.json 文件 在里面进行 es语法的配置</span><br><span class="line"></span><br><span class="line">里面内容如何填写呢？</span><br></pre></td></tr></table></figure>
<blockquote>
<p>直接google  tsconfig.json</p>
</blockquote>
<p>得到如下链接<br><a href="https://www.typescriptlang.org/docs/handbook/tsconfig-json.html" target="_blank" rel="noopener">https://www.typescriptlang.org/docs/handbook/tsconfig-json.html</a></p>
<p>里面有一个 tsconfig.json</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;compilerOptions&quot;: &#123;</span><br><span class="line">        &quot;module&quot;: &quot;commonjs&quot;,</span><br><span class="line">        &quot;noImplicitAny&quot;: true,</span><br><span class="line">        &quot;removeComments&quot;: true,</span><br><span class="line">        &quot;preserveConstEnums&quot;: true,</span><br><span class="line">        &quot;sourceMap&quot;: true</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;files&quot;: [</span><br><span class="line">        &quot;core.ts&quot;,</span><br><span class="line">        &quot;sys.ts&quot;,</span><br><span class="line">        &quot;types.ts&quot;,</span><br><span class="line">        &quot;scanner.ts&quot;,</span><br><span class="line">        &quot;parser.ts&quot;,</span><br><span class="line">        &quot;utilities.ts&quot;,</span><br><span class="line">        &quot;binder.ts&quot;,</span><br><span class="line">        &quot;checker.ts&quot;,</span><br><span class="line">        &quot;emitter.ts&quot;,</span><br><span class="line">        &quot;program.ts&quot;,</span><br><span class="line">        &quot;commandLineParser.ts&quot;,</span><br><span class="line">        &quot;tsc.ts&quot;,</span><br><span class="line">        &quot;diagnosticInformationMap.generated.ts&quot;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>添加一个 lib 参数</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;compilerOptions&quot;: &#123;</span><br><span class="line">       &quot;lib&quot;:[</span><br><span class="line">           &quot;es2015&quot;</span><br><span class="line">       ]</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>再次运行刚才的出错文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">./005add.ts 1 s</span><br><span class="line"></span><br><span class="line"># 打印</span><br><span class="line">出错啦</span><br><span class="line">NaN</span><br></pre></td></tr></table></figure>
<blockquote>
<p>为防止以后出错，多写几个 es 版本</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;compilerOptions&quot;: &#123;</span><br><span class="line">       &quot;lib&quot;:[&quot;es2015&quot;,&quot;dom&quot;,&quot;es2016&quot;,&quot;es2018&quot;]</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>即使这样你发现 Number.isNaN 下面还是用红线，那就 重新进入 vscode</p>
<blockquote>
<p>再看我们代码存在的问题</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 打印</span><br><span class="line">出错啦</span><br><span class="line">NaN</span><br><span class="line"></span><br><span class="line"># 已经出错啦，就没必要往后执行了，直接退出程序</span><br><span class="line">但是你不能用 return （return用在函数内部才行）</span><br></pre></td></tr></table></figure>
<ul>
<li>006add.ts</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env ts-node</span><br><span class="line">let a: number = parseInt( process.argv[2] );</span><br><span class="line">let b: number = parseInt( process.argv[3] );</span><br><span class="line"></span><br><span class="line">if(Number.isNaN(a)||Number.isNaN(b))&#123;</span><br><span class="line">    console.log(&apos;出错啦！&apos;);</span><br><span class="line">    process.exit(1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">console.log( a + b );</span><br><span class="line">process.exit(0);</span><br></pre></td></tr></table></figure>
<ul>
<li>为啥退出要传递 数字呢</li>
</ul>
<blockquote>
<p>进程退出的潜规则——程序员的约定</p>
</blockquote>
<ul>
<li>返回 0 代表正常退出</li>
<li>返回 非 0 代表错误退出</li>
</ul>
<p>幸福的家庭都是相似的，不幸的家庭各有各的不幸</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">process.exit(1);</span><br><span class="line">process.exit(2);</span><br><span class="line">process.exit(3);</span><br><span class="line"></span><br><span class="line">process.exit(0);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>自行完成</p>
</blockquote>
<ul>
<li>加减乘除代码逻辑</li>
</ul>
<h3 id="族谱"><a href="#族谱" class="headerlink" title="族谱"></a>族谱</h3><p>100tree.ts</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env ts-node</span><br><span class="line">function createTabs(n: number): string &#123;</span><br><span class="line">  return &apos;----&apos;.repeat(n);</span><br><span class="line">&#125;</span><br><span class="line">class Person &#123;</span><br><span class="line">  public children: Person[] = [];</span><br><span class="line">  constructor(public name) &#123;&#125;</span><br><span class="line">  addChild(child: Person): void &#123;</span><br><span class="line">    this.children.push(child);</span><br><span class="line">  &#125;</span><br><span class="line">  introduceFamily(n?: number): void &#123;</span><br><span class="line">    n = n || 0;</span><br><span class="line">    console.log(`$&#123;createTabs(n)&#125;$&#123;this.name&#125;`);</span><br><span class="line">    this.children.forEach(person =&gt; &#123;</span><br><span class="line">      person.introduceFamily(n + 1);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const grandPa = new Person(&apos;王麻子&apos;);</span><br><span class="line">const person1 = new Person(&apos;王大锤&apos;);</span><br><span class="line">const person2 = new Person(&apos;王者&apos;);</span><br><span class="line">const child11 = new Person(&apos;王毛&apos;);</span><br><span class="line">const child12 = new Person(&apos;王水&apos;);</span><br><span class="line">const child21 = new Person(&apos;王荣耀&apos;);</span><br><span class="line">const child22 = new Person(&apos;王农药&apos;);</span><br><span class="line"></span><br><span class="line">grandPa.addChild(person1);</span><br><span class="line">grandPa.addChild(person2);</span><br><span class="line"></span><br><span class="line">person1.addChild(child11);</span><br><span class="line">person1.addChild(child12);</span><br><span class="line">person2.addChild(child21);</span><br><span class="line">person2.addChild(child22);</span><br><span class="line"></span><br><span class="line">grandPa.introduceFamily();</span><br><span class="line"></span><br><span class="line">王麻子</span><br><span class="line">----王大锤</span><br><span class="line">--------王毛</span><br><span class="line">--------王水</span><br><span class="line">----王者</span><br><span class="line">--------王荣耀</span><br><span class="line">--------王农药</span><br></pre></td></tr></table></figure>
<blockquote>
<p>坑点</p>
</blockquote>
<ul>
<li>Person[] 规定数组类型要 进行初始化</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public children: Person[];</span><br><span class="line"></span><br><span class="line"># 如果这样声明 只是声明了 Person 的数组，但是没有实例化，也就无法调用 push()</span><br></pre></td></tr></table></figure>
<ul>
<li>可选参数 introduceFamily(n?: number): void {…}</li>
<li>无返回值 void</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// n 可以不传递</span><br><span class="line">introduceFamily(n?: number): void &#123;...&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>代码库<a href="https://github.com/slTrust/ts-study" target="_blank" rel="noopener">https://github.com/slTrust/ts-study</a></li>
</ul>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/TS入门/">TS入门</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/01/29/vultr搭建ss/" title="vultr搭建ss" itemprop="url">vultr搭建ss</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Stevin" target="_blank" itemprop="author">Stevin</a>
		
  <p class="article-time">
    <time datetime="2019-01-29T05:53:19.000Z" itemprop="datePublished"> Published 2019-01-29</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="一、挑选vps服务商"><a href="#一、挑选vps服务商" class="headerlink" title="一、挑选vps服务商"></a>一、挑选vps服务商</h3><ul>
<li>vultr:支持支付宝微信付款、操作简单</li>
<li>bandwagon:俗称”搬瓦工”，支持支付宝付款，价格便宜，套餐种类多，性价比高。<br>套餐种类:KVM架构方案包括 CN2 GT线路、CN2 GIA 线路、香港机房等。<br>地址:<a href="https://www.bwgblog.org/" target="_blank" rel="noopener">搬瓦工中文网</a></li>
</ul>
<h3 id="二、注册vultr账号"><a href="#二、注册vultr账号" class="headerlink" title="二、注册vultr账号"></a>二、注册vultr账号</h3><h4 id="1-创建vultr账户"><a href="#1-创建vultr账户" class="headerlink" title="1.创建vultr账户"></a>1.创建vultr账户</h4><p>注册地址：<a href="https://www.vultr.com/?ref=7725423" target="_blank" rel="noopener">Vultr The Infrastructure Cloud™</a></p>
<p>Vultr优惠注册链接：<a href="https://www.vultrblog.com/" target="_blank" rel="noopener">https://www.vultrblog.com/</a></p>
<p>进入首页后填写邮箱地址，密码(需要数字大小写字母且十位以上)，然后点击create account按钮</p>
<p><img src="https://raw.githubusercontent.com/slTrust/note/master/vultr/vultr001.png" alt></p>
<p>然后验证你的邮箱地址，如果没收到验证邮件的话去垃圾箱翻找一下。</p>
<h4 id="2-充值"><a href="#2-充值" class="headerlink" title="2.充值"></a>2.充值</h4><p>进入我的账户，选择billing，然后选择alipay或者wechat，选择金额并发起付款，最少支付10$</p>
<p><img src="https://raw.githubusercontent.com/slTrust/note/master/vultr/vultr002.png" alt></p>
<h4 id="3-搭建服务"><a href="#3-搭建服务" class="headerlink" title="3.搭建服务"></a>3.搭建服务</h4><blockquote>
<p>1.首先选择机房地址，我选择的是东京，这个以后还可以更改</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/slTrust/note/master/vultr/vultr003.png" alt></p>
<blockquote>
<p>2.选择系统，推荐选用CentOS</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/slTrust/note/master/vultr/vultr004.png" alt></p>
<blockquote>
<p>3.选择套餐，推荐选用3.5$每月这款套餐，2.5$每月的只支持ipv6，可能连接不上</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/slTrust/note/master/vultr/vultr005.png" alt></p>
<blockquote>
<p>4.最后这几个选项不用动，点击deploy now即可</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/slTrust/note/master/vultr/vultr006.png" alt></p>
<blockquote>
<p>5.等待服务器状态变为running，点击服务器名</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/slTrust/note/master/vultr/vultr007.png" alt></p>
<blockquote>
<p>6.跳转到以下页面后，查看服务器ip地址，用户名默认为root，记住密码</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/slTrust/note/master/vultr/vultr008.png" alt></p>
<blockquote>
<p>完成以上步骤，服务就搭建完毕了，记住ip地址以及密码，接下来进行ssh连接</p>
</blockquote>
<h4 id="4-使用ssh终端连接服务器"><a href="#4-使用ssh终端连接服务器" class="headerlink" title="4.使用ssh终端连接服务器"></a>4.使用ssh终端连接服务器</h4><p>这里我使用的是mac的终端进行ssh连接</p>
<blockquote>
<p>1.首先进行ssh登录，将用户名和ip地址替换为你的服务器的用户名与ip地址</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ssh root@ip</span><br><span class="line">此时如果成功会让你输入密码</span><br><span class="line">复制就好</span><br></pre></td></tr></table></figure>
<p>当出现[root@vultr ~]#时说明已经登录VPS成功，可进行以下步骤。</p>
<blockquote>
<p>2.分别执行以下三个命令,安装ss</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># 我选择进入一个本地目录,这样下载的东西更加可控</span><br><span class="line">cd  /usr/local/src</span><br><span class="line">mkdir shadowsocks</span><br><span class="line">cd shadowsocks</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 下载命令</span><br><span class="line">wget --no-check-certificate  https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocks.sh</span><br><span class="line"></span><br><span class="line"># 可执行权限</span><br><span class="line">chmod +x shadowsocks.sh</span><br><span class="line"></span><br><span class="line"># 这个过程最后会让你输入  port 和 password</span><br><span class="line">./shadowsocks.sh 2&gt;&amp;1 | tee shadowsocks.log</span><br></pre></td></tr></table></figure>
<p>此时你只有一个账号，就是你刚刚输入的端口号和密码</p>
<h4 id="5-配置多用户"><a href="#5-配置多用户" class="headerlink" title="5.配置多用户"></a>5.配置多用户</h4><p>有时候想给小伙伴一起分享这个ss，但又不想一起用一个号，那么我们最好配置多个用户</p>
<blockquote>
<p>1.在登录的状态下(登录服务器的前提下)，输入以下命令，查看配置文件</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat  /etc/shadowsocks.json</span><br></pre></td></tr></table></figure>
<p>默认配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;server&quot;:&quot;0.0.0.0&quot;,</span><br><span class="line">    &quot;server_port&quot;:443,</span><br><span class="line">    &quot;local_address&quot;:&quot;127.0.0.1&quot;,</span><br><span class="line">    &quot;local_port&quot;:1080,</span><br><span class="line">    &quot;password&quot;:&quot;aabbcc&quot;,</span><br><span class="line">    &quot;timeout&quot;:300,</span><br><span class="line">    &quot;method&quot;:&quot;aes-256-cfb&quot;,</span><br><span class="line">    &quot;fast_open&quot;:false</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>2.修改默认配置</p>
</blockquote>
<p>我就默认你是mac了,如果你是 window请安装gitbash</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/shadowsocks.json</span><br></pre></td></tr></table></figure>
<p>点击i键进行编辑</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;server&quot;:&quot;0.0.0.0&quot;,</span><br><span class="line">    &quot;local_address&quot;:&quot;127.0.0.1&quot;,</span><br><span class="line">    &quot;local_port&quot;:1080,</span><br><span class="line">    &quot;port_password&quot;:&#123;</span><br><span class="line">         &quot;9001&quot;:&quot;pwd123&quot;,</span><br><span class="line">         &quot;9002&quot;:&quot;pwd123&quot;,</span><br><span class="line">         &quot;9003&quot;:&quot;pwd123&quot;,</span><br><span class="line">         &quot;9004&quot;:&quot;pwd123&quot;                    </span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;timeout&quot;:300,</span><br><span class="line">    &quot;method&quot;:&quot;aes-256-cfb&quot;,</span><br><span class="line">    &quot;fast_open&quot;: false</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>编辑完毕后，点击esc键，再输入:wq保存</p>
<blockquote>
<p>3.开放端口</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># 查看已开放端口</span><br><span class="line"># 此时可能会导致你退出远程服务器</span><br><span class="line"> firewall-cmd --list-ports</span><br><span class="line"></span><br><span class="line"># 开启端口 以开启9001端口为例</span><br><span class="line"># 就是shadowsocks.json里 你设置的账号端口</span><br><span class="line"># 如果是多账号就执行多次(因为多个端口)</span><br><span class="line"> firewall-cmd --zone=public --add-port=9001/tcp --permanent</span><br><span class="line"></span><br><span class="line"># 重启防火墙</span><br><span class="line"> firewall-cmd --reload</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"># 上述命令很有可能会导致你退出远程服务器</span><br><span class="line"># 如果退出后，你远程链接都受限了，那就请 restart 你的服务器</span><br></pre></td></tr></table></figure>
<p>在这里将新建的端口全部打开，如果不执行这部操作，很可能连接不上</p>
<blockquote>
<p>4.重启ss</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssserver -c/etc/shadowsocks.json -d restart</span><br></pre></td></tr></table></figure>
<p>重启成功后，就可以将地址与密码分享给你的小伙伴咯。</p>
<h3 id="6-使用BBR加速"><a href="#6-使用BBR加速" class="headerlink" title="6.使用BBR加速"></a>6.使用BBR加速</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget –no-check-certificate https://github.com/teddysun/across/raw/master/bbr.sh</span><br><span class="line">chmod +x bbr.sh</span><br><span class="line">./bbr.sh</span><br></pre></td></tr></table></figure>
<p>至此 Vultr（VPS）搭建SS教程已经结束，望大家都能自由上网。</p>
<h3 id="7-如何测试是否成功了"><a href="#7-如何测试是否成功了" class="headerlink" title="7.如何测试是否成功了"></a>7.如何测试是否成功了</h3><ul>
<li>我的是mac 安装好 ShadowsocksX-NG,客户端</li>
<li><p>服务器设置点击 +</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">地址：你的服务器ip:你刚才添加的端口 如 9001</span><br><span class="line">加密算法：在你的 shadowsocks.json 里写着</span><br><span class="line">密码：就是刚才设置的如  pws123</span><br></pre></td></tr></table></figure>
</li>
<li><p>点击确定</p>
</li>
<li>打开 <a href="https://www.google.cn/" target="_blank" rel="noopener">https://www.google.cn/</a></li>
</ul>
<blockquote>
<p>如果是chrome 推荐你安装一个插件</p>
</blockquote>
<ul>
<li>Proxy SwitchyOmega 能帮你自动切换(是否fq)</li>
</ul>
<h4 id="分享不易"><a href="#分享不易" class="headerlink" title="分享不易"></a>分享不易</h4><p>如果你打算买 vultr 的服务器</p>
<ul>
<li><a href="https://www.vultr.com/?ref=7725423" target="_blank" rel="noopener">邀请码链接</a></li>
</ul>
<blockquote>
<p>参考链接</p>
</blockquote>
<p>如果它们还没被和谐</p>
<ul>
<li><a href="https://testerhome.com/topics/17112?locale=en" target="_blank" rel="noopener">https://testerhome.com/topics/17112?locale=en</a></li>
<li><a href="https://my.oschina.net/u/3953544/blog/1935044" target="_blank" rel="noopener">https://my.oschina.net/u/3953544/blog/1935044</a></li>
</ul>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/vultr/">vultr</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/01/27/TS入门001安装与调试/" title="TS入门001安装与调试" itemprop="url">TS入门001安装与调试</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Stevin" target="_blank" itemprop="author">Stevin</a>
		
  <p class="article-time">
    <time datetime="2019-01-27T13:39:00.000Z" itemprop="datePublished"> Published 2019-01-27</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="TypeScript"><a href="#TypeScript" class="headerlink" title="TypeScript"></a>TypeScript</h3><blockquote>
<p>前置知识</p>
</blockquote>
<ul>
<li>命令行知识(熟悉)</li>
<li></li>
</ul>
<blockquote>
<p>每门语言都有一些错误，而 TS 就是为了解决 JS 的错误</p>
</blockquote>
<ul>
<li><h4 id="安装-请保证版本一致-出了问题自己解决"><a href="#安装-请保证版本一致-出了问题自己解决" class="headerlink" title="安装,请保证版本一致(出了问题自己解决)"></a>安装,请保证版本一致(出了问题自己解决)</h4></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 安装 typescript 命令行环境</span><br><span class="line">npm install typescript@2.9.2 -g</span><br></pre></td></tr></table></figure>
<blockquote>
<p>安装成功后 会得到两个命令</p>
</blockquote>
<ul>
<li>tsc</li>
<li>tsserver</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/bin/tsc -&gt; /usr/local/lib/node_modules/typescript/bin/tsc</span><br><span class="line">/usr/local/bin/tsserver -&gt; /usr/local/lib/node_modules/typescript/bin/tsserver</span><br><span class="line">+ typescript@2.9.2</span><br><span class="line">added 1 package from 1 contributor in 7.583s</span><br></pre></td></tr></table></figure>
<blockquote>
<p>安装 ts-node 让 node 支持 ts</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">npm install ts-node@7.0.0 -g</span><br><span class="line"></span><br><span class="line"># 安装成功后 提示如下</span><br><span class="line">/usr/local/bin/ts-node -&gt; /usr/local/lib/node_modules/ts-node/dist/bin.js</span><br><span class="line">+ ts-node@7.0.0</span><br><span class="line">added 11 packages from 42 contributors in 1.49s</span><br></pre></td></tr></table></figure>
<blockquote>
<h4 id="注意！请记住上述命令的路径-后面要用到"><a href="#注意！请记住上述命令的路径-后面要用到" class="headerlink" title="注意！请记住上述命令的路径,后面要用到"></a>注意！请记住上述命令的路径,后面要用到</h4></blockquote>
<blockquote>
<h4 id="注意！请记住上述命令的路径-后面要用到-1"><a href="#注意！请记住上述命令的路径-后面要用到-1" class="headerlink" title="注意！请记住上述命令的路径,后面要用到"></a>注意！请记住上述命令的路径,后面要用到</h4></blockquote>
<blockquote>
<h4 id="注意！请记住上述命令的路径-后面要用到-2"><a href="#注意！请记住上述命令的路径-后面要用到-2" class="headerlink" title="注意！请记住上述命令的路径,后面要用到"></a>注意！请记住上述命令的路径,后面要用到</h4></blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/bin/tsc</span><br><span class="line"></span><br><span class="line">/usr/local/bin/tsserver</span><br><span class="line"></span><br><span class="line">/usr/local/bin/ts-node</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/slTrust/note/master/typescript/ts001-01.png" alt></p>
<h3 id="调试"><a href="#调试" class="headerlink" title="调试"></a>调试</h3><ol>
<li>下载 vscode<ol>
<li>mac 按 command + K 之后在按 command + S</li>
<li>将格式化文件的快捷键绑定到自己喜欢的按键（我用的是 ctrl + L）</li>
</ol>
</li>
<li>创建文件夹 tsdemo</li>
<li>用 vscode 打开 tsdemo 目录</li>
<li>创建 tsdemo/1.ts 作为我们的第一个 TS 文件</li>
<li>在文件里写一句 console.log(1) 保存</li>
<li>Windows 用户注意了，这里需要单独运行一些命令（Linux 用户和 macOS 用户不用执行）<ul>
<li>npm init -y<ul>
<li>npm i -D ts-node typescript</li>
</ul>
</li>
</ul>
</li>
<li><p>创建 tsdemo/.vscode/launch.json 文件，内容如下</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;configurations&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">        &quot;name&quot;: &quot;ts-node&quot;,</span><br><span class="line">        &quot;type&quot;: &quot;node&quot;,</span><br><span class="line">        &quot;request&quot;: &quot;launch&quot;,</span><br><span class="line">        &quot;program&quot;: &quot;注意看这里，要写成ts-node对应的可执行文件，Windows 用户注意了，你应该写成 $&#123;workspaceRoot&#125;/node_modules/ts-node/dist/bin.js&quot;,</span><br><span class="line">        &quot;args&quot;: [&quot;$&#123;relativeFile&#125;&quot;],</span><br><span class="line">        &quot;cwd&quot;: &quot;$&#123;workspaceRoot&#125;&quot;,</span><br><span class="line">        &quot;protocol&quot;: &quot;inspector&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">复制刚才的 ts-node 路径 /usr/local/bin/ts-node</span><br><span class="line">&#123;</span><br><span class="line">    &quot;configurations&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">        &quot;name&quot;: &quot;ts-node&quot;,</span><br><span class="line">        &quot;type&quot;: &quot;node&quot;,</span><br><span class="line">        &quot;request&quot;: &quot;launch&quot;,</span><br><span class="line">        &quot;program&quot;: &quot;/usr/local/bin/ts-node&quot;,</span><br><span class="line">        &quot;args&quot;: [&quot;$&#123;relativeFile&#125;&quot;],</span><br><span class="line">        &quot;cwd&quot;: &quot;$&#123;workspaceRoot&#125;&quot;,</span><br><span class="line">        &quot;protocol&quot;: &quot;inspector&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>打开 tsdemo/1.js，找到调试选项(小虫子图标)，选择 ts-node，然后点击调试 在点击那个绿色箭头</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">但是此时报错了，因为你没选中那个1.ts文件</span><br><span class="line">此时切换到 1.ts的文件 再次点击调试</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><img src="https://raw.githubusercontent.com/slTrust/note/master/typescript/ts001-02.png" alt></p>
<p><img src="https://raw.githubusercontent.com/slTrust/note/master/typescript/ts001-03.png" alt></p>
<p>参考文章： <a href="https://segmentfault.com/a/1190000011935122" target="_blank" rel="noopener">https://segmentfault.com/a/1190000011935122</a></p>
<blockquote>
<p>至此我们运行了第一个 ts程序</p>
</blockquote>
<ul>
<li>所以说学这些的难度就是命令行</li>
<li>而且如果你想学好这些——你就必须学好英文</li>
<li><p>一手资料是英文的，如果你等翻译永远比别人慢一两年</p>
</li>
<li><p>英文文档 <a href="https://www.typescriptlang.org/" target="_blank" rel="noopener">https://www.typescriptlang.org/</a></p>
</li>
<li>中文文档<a href="https://www.tslang.cn/" target="_blank" rel="noopener">https://www.tslang.cn/</a></li>
</ul>
<h3 id="tsc的使用"><a href="#tsc的使用" class="headerlink" title="tsc的使用"></a>tsc的使用</h3><ul>
<li><a href="https://www.tslang.cn/docs/handbook/typescript-in-5-minutes.html" target="_blank" rel="noopener">看5分钟上手</a></li>
</ul>
<p>greeter.ts</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function greeter(person) &#123;</span><br><span class="line">    return &quot;Hello, &quot; + person;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let user = &quot;Jane User&quot;;</span><br><span class="line"></span><br><span class="line">document.body.innerHTML = greeter(user);</span><br></pre></td></tr></table></figure>
<p>在命令行，注意当前  greeter.ts 所在路径</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">tsc greeter.ts</span><br><span class="line"></span><br><span class="line"># 此时生成了 greeter.js</span><br><span class="line">function greeter(person) &#123;</span><br><span class="line">    return &quot;Hello, &quot; + person;</span><br><span class="line">&#125;</span><br><span class="line">var user = &quot;Jane User&quot;;</span><br><span class="line">document.body.innerHTML = greeter(user);</span><br></pre></td></tr></table></figure>
<blockquote>
<h4 id="你会说跟原来没啥区别啊"><a href="#你会说跟原来没啥区别啊" class="headerlink" title="你会说跟原来没啥区别啊"></a>你会说跟原来没啥区别啊</h4></blockquote>
<ul>
<li>只不过去除了空行吗？</li>
<li>如果你写的仅仅是 JS 那编译后就是 JS</li>
</ul>
<blockquote>
<p>为什么 要tsc 编译一下呢？</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1. 浏览器可以直接运行 JS</span><br><span class="line">2. 浏览器不可以直接运行 TS</span><br><span class="line">⬇️</span><br><span class="line">⬇️</span><br><span class="line">3. 要把 TS 变成 JS ,才能运行</span><br><span class="line"></span><br><span class="line">==&gt; tsc </span><br><span class="line">==&gt; type script compiler typescript编译器</span><br></pre></td></tr></table></figure>
<blockquote>
<p>再看文档示例</p>
</blockquote>
<ul>
<li>他想规定 greeter函数接受的参数是一个字符串</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function greeter(person: string) &#123;</span><br><span class="line">    return &quot;Hello, &quot; + person;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let user = &quot;Jane User&quot;;</span><br><span class="line"></span><br><span class="line">document.body.innerHTML = greeter(user);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>编译后竟然还跟之前的内容一样</p>
</blockquote>
<blockquote>
<h4 id="解析-function-greeter-person-string"><a href="#解析-function-greeter-person-string" class="headerlink" title="解析 function greeter(person: string)"></a>解析 function greeter(person: string)</h4></blockquote>
<p>修改 greeter.ts</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function greeter(person: string) &#123;</span><br><span class="line">    return &quot;Hello, &quot; + person;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let user = [1,2,3];</span><br><span class="line"></span><br><span class="line">document.body.innerHTML = greeter(user);</span><br></pre></td></tr></table></figure>
<ul>
<li>再次运行 tsc greeter.ts,此时报错了</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> Argument of type &apos;number[]&apos; is not assignable to parameterof type &apos;string&apos;.</span><br><span class="line"></span><br><span class="line">7 document.body.innerHTML = greeter(user);</span><br><span class="line"></span><br><span class="line">/* </span><br><span class="line">意思 你的 user 是一个数组，但是函数里说要一个字符串，所以无法变成js</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>
<blockquote>
<h3 id="中间发生了什么"><a href="#中间发生了什么" class="headerlink" title="中间发生了什么"></a>中间发生了什么</h3></blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">         通过 tsc</span><br><span class="line">TS -------------------&gt; JS</span><br><span class="line">        1.类型检查</span><br><span class="line"></span><br><span class="line">如果你 TS 中期待的类型传入不会 就无法编译为 JS</span><br></pre></td></tr></table></figure>
<blockquote>
<h4 id="为什么做类型检查？"><a href="#为什么做类型检查？" class="headerlink" title="为什么做类型检查？"></a>为什么做类型检查？</h4></blockquote>
<p>如果不用 ts 你就要这样写</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function greeter(person) &#123;</span><br><span class="line">    if(typeof person !== &apos;string&apos;)&#123;</span><br><span class="line">        throw new Error(&apos;person 必须是一个字符串&apos;)</span><br><span class="line">    &#125;</span><br><span class="line">    return &quot;Hello, &quot; + person;</span><br><span class="line">&#125;</span><br><span class="line">var user = [1, 2, 3];</span><br><span class="line">document.body.innerHTML = greeter(user);</span><br></pre></td></tr></table></figure>
<p>此时有什么问题吗？</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">程序必须运行到</span><br><span class="line">if(typeof person !== &apos;string&apos;)&#123;...&#125;</span><br><span class="line">才能提示用户</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">而 TS 不一样，它是在你编译的时候就告诉你 写错了</span><br><span class="line"></span><br><span class="line">----------------------------------------</span><br><span class="line">         通过 tsc</span><br><span class="line">TS -------------------&gt; JS</span><br><span class="line">        1.类型检查</span><br><span class="line">用 JS 检查：执行到 greeter(user) 报错 运行时报错</span><br><span class="line">用 TS 检查：编译时报错</span><br><span class="line"></span><br><span class="line">有区别吗？</span><br><span class="line"></span><br><span class="line">执行的 greeter 时候 代码已经到服务器了，用户感知不到的，程序执行到哪里报错了，你难道让用户改吗？</span><br><span class="line"></span><br><span class="line">所以如果我们在 上传代码之前就知道这个错是不是可以 及时改过来</span><br></pre></td></tr></table></figure>
<h3 id="接口-interface"><a href="#接口-interface" class="headerlink" title="接口 interface"></a>接口 interface</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">interface Person&#123;</span><br><span class="line">    姓:string,</span><br><span class="line">    名:string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function greeter(person: Person) &#123;</span><br><span class="line">    return &quot;Hello, &quot; + person.姓 +person.名;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let user = &#123;姓:&apos;漩涡&apos;,名:&apos;鸣人&apos;&#125;;</span><br><span class="line"></span><br><span class="line">console.log( greeter(user) );</span><br></pre></td></tr></table></figure>
<blockquote>
<p>只有姓 没有名 行不行？</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">let user = &#123;姓:&apos;漩涡&apos;&#125;;</span><br><span class="line"></span><br><span class="line">报错</span><br><span class="line">error TS2345: Argument of type &apos;&#123; 姓: string; &#125;&apos; is not assignable to parameter of type &apos;Person&apos;.</span><br><span class="line">  Property &apos;名&apos; is missing in type &apos;&#123; 姓: string; &#125;&apos;.</span><br><span class="line">--------------------------------</span><br><span class="line">如果你用传统 js</span><br><span class="line">function greeter(person) &#123;</span><br><span class="line">     return &quot;Hello, &quot; + person.姓 +person.名;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">如果 person没有 姓/名</span><br><span class="line">就会返回 Hello undefined undefined</span><br></pre></td></tr></table></figure>
<h3 id="类-class"><a href="#类-class" class="headerlink" title="类 class"></a>类 class</h3><p>继续抄文档</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">class Student &#123;</span><br><span class="line">    全名: string;</span><br><span class="line">    constructor(public 姓, public 名) &#123;</span><br><span class="line">        this.全名 = 姓 + 名;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface Person &#123;</span><br><span class="line">    姓: string;</span><br><span class="line">    名: string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function greeter(person : Person) &#123;</span><br><span class="line">    return &quot;Hello, &quot; + person.姓 + &quot; &quot; + person.名;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let user = new Student(&quot;漩涡&quot;, &quot;鸣人&quot;);</span><br><span class="line"></span><br><span class="line">console.log(greeter(user));</span><br></pre></td></tr></table></figure>
<blockquote>
<p>public 的含义</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">class Student &#123;</span><br><span class="line">    全名: string;</span><br><span class="line">    constructor(public 姓, public 名) &#123;</span><br><span class="line">        this.全名 = 姓 + 名;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">相当于</span><br><span class="line">class Student &#123;</span><br><span class="line">    全名: string;</span><br><span class="line">    姓:string;</span><br><span class="line">    名:string;</span><br><span class="line">    constructor(姓, 名) &#123;</span><br><span class="line">        this.姓 = 姓;</span><br><span class="line">        this.名 = 名;</span><br><span class="line">        this.全名 = 姓 + 名;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>此时我能在 greeter 里获取 全名 吗？</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function greeter(person : Person) &#123;</span><br><span class="line">    return &quot;Hello, &quot; + person.全名;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">报错</span><br><span class="line">Property &apos;全名&apos; does not exist on type &apos;Person&apos;.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">如果你想要全名唯一的办法就是改参数类型</span><br><span class="line">function greeter(person : Student) &#123;</span><br><span class="line">    return &quot;Hello, &quot; + person.全名;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="如何学TS"><a href="#如何学TS" class="headerlink" title="如何学TS"></a>如何学TS</h3><ul>
<li>CRM</li>
<li><p>单纯 既然学TS 就不要去搞 webpack / vue</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">什么时候去整 webpack / vue</span><br><span class="line">你已经入门了 知道大概的错如何解决。再去结合其他东西</span><br></pre></td></tr></table></figure>
</li>
<li><p>不要看书(它不够新)——看文档和博客</p>
</li>
</ul>
<blockquote>
<p>打开 ts 文档</p>
</blockquote>
<p><a href="https://www.tslang.cn/docs/home.html" target="_blank" rel="noopener">https://www.tslang.cn/docs/home.html</a></p>
<p>挨个看，哪里没见过就重点看</p>
<h3 id="函数部分"><a href="#函数部分" class="headerlink" title="函数部分"></a>函数部分</h3><p>要求输入两个参数，类型都为 number，返回值为 number</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function add(a:number,b:number):number&#123;</span><br><span class="line">    return a+b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>如何实现重载</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function add(a:number,b:number):number;</span><br><span class="line">function add(a:string,b:string):string;</span><br><span class="line">// 最后一种一定要兼容上面几种</span><br><span class="line">// any 就是任何类型</span><br><span class="line">function add(a:any,b:any):any&#123;</span><br><span class="line">    return a+b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>返回数组类型</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function getArr(arr:number[]) : number[]&#123;</span><br><span class="line">    ...</span><br><span class="line">    return [1,2,3,4,5];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<h4 id="tuple-元组"><a href="#tuple-元组" class="headerlink" title="tuple 元组"></a>tuple 元组</h4></blockquote>
<p>元组类型允许表示一个已知元素数量和类型的数组，各元素的类型不必相同。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// Declare a tuple type</span><br><span class="line">let x: [string, number];</span><br><span class="line">// Initialize it</span><br><span class="line">x = [&apos;hello&apos;, 10]; // OK</span><br><span class="line">// Initialize it incorrectly</span><br><span class="line">x = [10, &apos;hello&apos;]; // Error</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">interface Person&#123;</span><br><span class="line">    gender:string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function merry(a:Person,b:Person):[Person,Person]&#123;</span><br><span class="line">    if(a.gender !== b.gender)&#123;</span><br><span class="line">        return [a,b];</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        throw new Error(&apos;同性不能结婚&apos;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let a = &#123;gender:&apos;男&apos;&#125;;</span><br><span class="line">let b = &#123;gender:&apos;女&apos;&#125;;</span><br><span class="line"></span><br><span class="line">console.log(merry( a , b ));</span><br></pre></td></tr></table></figure>
<blockquote>
<p>代码此时有个问题就是 如果它写 let b = {gender:’狗’} 也成功了</p>
</blockquote>
<h4 id="枚举"><a href="#枚举" class="headerlink" title="枚举"></a>枚举</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">enum Gender&#123;</span><br><span class="line">    Male,</span><br><span class="line">    Female</span><br><span class="line">&#125;</span><br><span class="line">interface Person&#123;</span><br><span class="line">    gender:Gender</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function merry(a:Person,b:Person):[Person,Person]&#123;</span><br><span class="line">    if(a.gender !== b.gender)&#123;</span><br><span class="line">        return [a,b];</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        throw new Error(&apos;同性不能结婚&apos;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let a = &#123;gender:Gender.Male&#125;;</span><br><span class="line">let b = &#123;gender:Gender.Female&#125;;</span><br><span class="line"></span><br><span class="line">console.log(merry( a , b ));</span><br></pre></td></tr></table></figure>
<ul>
<li>代码库<a href="https://github.com/slTrust/ts-study" target="_blank" rel="noopener">https://github.com/slTrust/ts-study</a></li>
</ul>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/TS入门/">TS入门</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/01/26/React入门012之React组件示例/" title="React入门012之React组件示例" itemprop="url">React入门012之React组件示例</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Stevin" target="_blank" itemprop="author">Stevin</a>
		
  <p class="article-time">
    <time datetime="2019-01-26T12:09:09.000Z" itemprop="datePublished"> Published 2019-01-26</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="React组件"><a href="#React组件" class="headerlink" title="React组件"></a>React组件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cd ~/Desktop</span><br><span class="line"></span><br><span class="line">create-react-app react-button-demo</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cd react-button-demo</span><br><span class="line"></span><br><span class="line">yarn start</span><br></pre></td></tr></table></figure>
<p>styles.css</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">.App &#123;</span><br><span class="line">  text-align: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.App button&#123;</span><br><span class="line">  border:1px solid red;</span><br><span class="line">  background: red;;</span><br><span class="line">  color:#fff;</span><br><span class="line">  padding:3px 10px;</span><br><span class="line">  box-shadow: 0 0 3px rgba(0,0,0,0.2);</span><br><span class="line">  margin:4px;</span><br><span class="line">  border-radius: 4px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>App.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component &#125; from &apos;react&apos;;</span><br><span class="line">import &apos;./App.css&apos;;</span><br><span class="line"></span><br><span class="line">class App extends Component &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div className=&quot;App&quot;&gt;</span><br><span class="line">        &lt;button&gt;Hello&lt;/button&gt;</span><br><span class="line">        &lt;button&gt;Hello&lt;/button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default App;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>此时如果 另一个组件里想用这个 button 唯一的办法就是把 样式copy一份 button</p>
</blockquote>
<blockquote>
<p>第一个组件 BoxOne</p>
</blockquote>
<p>BoxOne.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component &#125; from &apos;react&apos;;</span><br><span class="line">import &apos;./BoxOne.css&apos;;</span><br><span class="line"></span><br><span class="line">class BoxOne extends Component &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    console.log(this.props.firstLine)</span><br><span class="line">    return (</span><br><span class="line">        &lt;div className=&quot;BoxOne&quot;&gt;</span><br><span class="line">            &lt;div&gt; &#123;this.props.firstLine || &apos;Box 1&apos;&#125; &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default BoxOne;</span><br></pre></td></tr></table></figure>
<p>BoxOne.css</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.BoxOne&#123;</span><br><span class="line">    border:1px solid green;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>App.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component &#125; from &apos;react&apos;;</span><br><span class="line">import &apos;./App.css&apos;;</span><br><span class="line"></span><br><span class="line">import BoxOne from &apos;./BoxOne&apos;</span><br><span class="line"></span><br><span class="line">class App extends Component &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div className=&quot;App&quot;&gt;</span><br><span class="line">        &lt;button className=&quot;btn&quot;&gt;Hello&lt;/button&gt;</span><br><span class="line">        &lt;button className=&quot;btn&quot;&gt;Hello&lt;/button&gt;</span><br><span class="line">        &lt;BoxOne firstLine=&quot;Hello&quot; /&gt;</span><br><span class="line">        &lt;BoxOne/&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default App;</span><br></pre></td></tr></table></figure>
<blockquote>
<h3 id="组件的好处是什么？"><a href="#组件的好处是什么？" class="headerlink" title="组件的好处是什么？"></a>组件的好处是什么？</h3></blockquote>
<ul>
<li>当你的组件不复杂时 你直接写一遍就好了</li>
<li>但如果组件重复的使用了  100次呢？</li>
<li>如果后期改样式  你是不是得改1000次？</li>
</ul>
<ol>
<li>不需要 ctrl + c / ctrl + v</li>
<li>多处用 一个 标签</li>
<li>要改，只改一个地方</li>
<li>个性化只需要传递参数</li>
</ol>
<h3 id="写一个button组件"><a href="#写一个button组件" class="headerlink" title="写一个button组件"></a>写一个button组件</h3><ul>
<li>src下新建 components 目录</li>
<li>src/components/button.js</li>
</ul>
<p>button.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component &#125; from &apos;react&apos;;</span><br><span class="line">import &apos;./button.css&apos;</span><br><span class="line">class Button extends Component &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">        &lt;button className=&quot;button2&quot;&gt;&#123;this.props.value&#125;&lt;/button&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default Button;</span><br></pre></td></tr></table></figure>
<p>button.css</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">.button2&#123;</span><br><span class="line">    box-sizing: border-box;</span><br><span class="line">    height: 32px;</span><br><span class="line">    background: #fff;</span><br><span class="line">    border:1px solid rgba(153,153,153,1);</span><br><span class="line">    border-radius: 4px;</span><br><span class="line">    padding:4px 1em;</span><br><span class="line">    margin:10px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.button2:focus&#123;</span><br><span class="line">    outline: none;</span><br><span class="line">    border-color: black;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>App.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component &#125; from &apos;react&apos;;</span><br><span class="line">import &apos;./App.css&apos;;</span><br><span class="line">import Button from &apos;./components/button&apos;</span><br><span class="line"></span><br><span class="line">class App2 extends Component &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div className=&quot;App&quot;&gt;</span><br><span class="line">        &lt;Button value=&quot;按钮&quot;/&gt;</span><br><span class="line">        &lt;Button value=&quot;按钮&quot;/&gt;</span><br><span class="line">        &lt;Button value=&quot;按钮&quot;/&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default App2;</span><br></pre></td></tr></table></figure>
<h3 id="做个涟漪效果"><a href="#做个涟漪效果" class="headerlink" title="做个涟漪效果"></a>做个涟漪效果</h3><p>button.css</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">.button2&#123;</span><br><span class="line">    box-sizing: border-box;</span><br><span class="line">    height: 32px;</span><br><span class="line">    background: #fff;</span><br><span class="line">    border:1px solid rgba(153,153,153,1);</span><br><span class="line">    border-radius: 4px;</span><br><span class="line">    padding:4px 1em;</span><br><span class="line">    margin:10px;</span><br><span class="line">    position: relative;</span><br><span class="line">    overflow: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.button2:focus&#123;</span><br><span class="line">    outline: none;</span><br><span class="line">    border-color: black;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.button2 &gt; .circle&#123;</span><br><span class="line">    border-radius: 50%;</span><br><span class="line">    height: 10px;</span><br><span class="line">    width: 10px;</span><br><span class="line">    background: red;</span><br><span class="line">    display: inline-block;</span><br><span class="line">    animation: 1s big;</span><br><span class="line">    position: absolute;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@keyframes big&#123;</span><br><span class="line">    0%&#123;</span><br><span class="line">        transform: scale(0.1);</span><br><span class="line">    &#125;</span><br><span class="line">    100%&#123;</span><br><span class="line">        transform: scale(10);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>button.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component &#125; from &apos;react&apos;;</span><br><span class="line">import &apos;./button.css&apos;</span><br><span class="line"></span><br><span class="line">class Button extends Component &#123;</span><br><span class="line">    constructor(props)&#123;</span><br><span class="line">        super(props);</span><br><span class="line">        this.state = &#123;</span><br><span class="line">            active:false,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    x()&#123;</span><br><span class="line">        this.setState(&#123;</span><br><span class="line">            active:true,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    render() &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;button className=&quot;button2&quot;</span><br><span class="line">                onClick=&#123; this.x.bind(this) &#125;</span><br><span class="line">            &gt;</span><br><span class="line">                &#123; this.props.value &#125;</span><br><span class="line">                &#123; (this.state.active === true)?(</span><br><span class="line">                    &lt;span className=&quot;circle&quot;&gt;&lt;/span&gt;</span><br><span class="line">                ):&apos;&apos;&#125;</span><br><span class="line">            &lt;/button&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default Button;</span><br></pre></td></tr></table></figure>
<blockquote>
<h3 id="此时我希望涟漪出现的地方是我点击的地方"><a href="#此时我希望涟漪出现的地方是我点击的地方" class="headerlink" title="此时我希望涟漪出现的地方是我点击的地方"></a>此时我希望涟漪出现的地方是我点击的地方</h3></blockquote>
<p>button.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component &#125; from &apos;react&apos;;</span><br><span class="line">import &apos;./button.css&apos;</span><br><span class="line"></span><br><span class="line">class Button extends Component &#123;</span><br><span class="line">    constructor(props)&#123;</span><br><span class="line">        super(props);</span><br><span class="line">        this.state = &#123;</span><br><span class="line">            active:false,</span><br><span class="line">            deltaX:0,</span><br><span class="line">            deltaY:0</span><br><span class="line">        &#125;</span><br><span class="line">        // 当前节点</span><br><span class="line">        this.myRef = React.createRef();</span><br><span class="line">    &#125;</span><br><span class="line">    x(event)&#123;</span><br><span class="line">        // 事件源</span><br><span class="line">        console.log(event);</span><br><span class="line">        // 距离左边的距离</span><br><span class="line">        console.log(event.clientX);</span><br><span class="line">        // 距离上面的距离</span><br><span class="line">        console.log(event.clientY);</span><br><span class="line">        // 当前按钮的引用</span><br><span class="line">        console.log(this.myRef);</span><br><span class="line">        // 获取边缘属性</span><br><span class="line">        console.log(this.myRef.current.getBoundingClientRect())</span><br><span class="line">        // </span><br><span class="line">        let &#123;x,y&#125; = this.myRef.current.getBoundingClientRect();</span><br><span class="line">        let &#123;clientX,clientY&#125; = event;</span><br><span class="line">        let deltaX = clientX - x - 5;</span><br><span class="line">        let deltaY = clientY - y - 5;</span><br><span class="line">        // 得到点击的位置</span><br><span class="line">        console.log(deltaX,deltaY);</span><br><span class="line"></span><br><span class="line">        this.setState(&#123;</span><br><span class="line">            active:true, </span><br><span class="line">            deltaX:deltaX,</span><br><span class="line">            deltaY:deltaY</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    y()&#123;</span><br><span class="line">        this.setState(&#123;</span><br><span class="line">            active:false</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    render() &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;button ref=&#123;this.myRef&#125; className=&quot;button2&quot;</span><br><span class="line">                onClick=&#123; this.x.bind(this) &#125;</span><br><span class="line">            &gt;</span><br><span class="line">                &lt;span className=&quot;value&quot;&gt;&#123; this.props.value &#125;&lt;/span&gt;</span><br><span class="line">               </span><br><span class="line">                &#123; (this.state.active === true)?(</span><br><span class="line">                    &lt;span className=&quot;circle&quot; onAnimationEnd=&#123; this.y.bind(this) &#125; style=&#123;&#123;left:this.state.deltaX,top:this.state.deltaY&#125;&#125;&gt;&lt;/span&gt;</span><br><span class="line">                ):&apos;&apos;&#125;</span><br><span class="line">            &lt;/button&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default Button;</span><br></pre></td></tr></table></figure>
<p>button.css</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">.button2&#123;</span><br><span class="line">    box-sizing: border-box;</span><br><span class="line">    height: 32px;</span><br><span class="line">    background: #fff;</span><br><span class="line">    border:1px solid rgba(153,153,153,1);</span><br><span class="line">    border-radius: 4px;</span><br><span class="line">    padding:4px 1em;</span><br><span class="line">    margin:10px;</span><br><span class="line">    position: relative;</span><br><span class="line">    overflow: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.button2:focus&#123;</span><br><span class="line">    outline: none;</span><br><span class="line">    border-color: black;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.button2 &gt; .circle&#123;</span><br><span class="line">    border-radius: 50%;</span><br><span class="line">    height: 10px;</span><br><span class="line">    width: 10px;</span><br><span class="line">    background: #ddd;</span><br><span class="line">    opacity: 0.5;</span><br><span class="line">    display: inline-block;</span><br><span class="line">    /* 结束后不恢复原状 */</span><br><span class="line">    animation: 1s big forwards;</span><br><span class="line">    position: absolute;</span><br><span class="line">    z-index: 0;</span><br><span class="line">&#125;</span><br><span class="line">.button2 &gt; .value&#123;</span><br><span class="line">    position: relative;</span><br><span class="line">    z-index: 1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@keyframes big&#123;</span><br><span class="line">    0%&#123;</span><br><span class="line">        transform: scale(0.1);</span><br><span class="line">    &#125;</span><br><span class="line">    100%&#123;</span><br><span class="line">        transform: scale(10);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><a href="项目地址">https://github.com/slTrust/React-study</a></li>
</ul>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/React入门/">React入门</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/01/26/React入门011之React开发环境搭建/" title="React入门011之React开发环境搭建" itemprop="url">React入门011之React开发环境搭建</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Stevin" target="_blank" itemprop="author">Stevin</a>
		
  <p class="article-time">
    <time datetime="2019-01-26T07:41:05.000Z" itemprop="datePublished"> Published 2019-01-26</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h3><ol>
<li>环境搭建<ul>
<li>Node 8 以上（稳定版）</li>
<li>Npm 6 以上（不需要单独安装因为 Node 自带 npm）</li>
<li>编辑器 VSCode<ul>
<li>终端 Git Bash（Windows 用户）、iTerm 2（macOS 用户）</li>
<li>版本管理 Git + GitHub</li>
<li>JS 版本：ES 6</li>
<li>CSS 版本：兼容 IE 12+、Chrome、Firefox（CSS 3 往上走）</li>
</ul>
</li>
</ul>
</li>
<li>Hello World</li>
<li>部署 React 应用到 GitHub</li>
</ol>
<blockquote>
<p>文档</p>
</blockquote>
<ul>
<li><a href="https://reactjs.org/" target="_blank" rel="noopener">https://reactjs.org/</a></li>
</ul>
<h3 id="安装本地-react-命令行环境"><a href="#安装本地-react-命令行环境" class="headerlink" title="安装本地 react 命令行环境"></a>安装本地 react 命令行环境</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"># 安装</span><br><span class="line">npm i -g create-react-app</span><br><span class="line"></span><br><span class="line"># 新建目录 </span><br><span class="line">cd ~/Desktop/</span><br><span class="line">create-react-app my-react-app</span><br><span class="line"></span><br><span class="line"># 依赖安装成功后显示如下信息</span><br><span class="line">Success! Created my-react-app at /Users/huangjiaxi/Desktop/my-react-app</span><br><span class="line">Inside that directory, you can run several commands:</span><br><span class="line"></span><br><span class="line">  yarn start</span><br><span class="line">    Starts the development server.</span><br><span class="line"></span><br><span class="line">  yarn build</span><br><span class="line">    Bundles the app into static files for production.</span><br><span class="line"></span><br><span class="line">  yarn test</span><br><span class="line">    Starts the test runner.</span><br><span class="line"></span><br><span class="line">  yarn eject</span><br><span class="line">    Removes this tool and copies build dependencies, configuration files</span><br><span class="line">    and scripts into the app directory. If you do this, you can’t go back!</span><br><span class="line"></span><br><span class="line">We suggest that you begin by typing:</span><br><span class="line"></span><br><span class="line">  cd my-react-app</span><br><span class="line">  yarn start</span><br><span class="line"></span><br><span class="line"># 一般我们只用如下三个命令</span><br><span class="line">- yarn start</span><br><span class="line">- yarn build</span><br><span class="line">- yarn test</span><br><span class="line"></span><br><span class="line"># 不建议用 yarn eject 尤其是新人</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">--------------------------</span><br><span class="line"># 进入你的项目目录 并启动项目</span><br><span class="line">cd my-react-app</span><br><span class="line">yarn start</span><br><span class="line"></span><br><span class="line"># 此时自动打开了一个3000端口的react项目</span><br></pre></td></tr></table></figure>
<h3 id="目录讲解"><a href="#目录讲解" class="headerlink" title="目录讲解"></a>目录讲解</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">--|build  打包后的文件</span><br><span class="line">--|public 万年不改的目录</span><br><span class="line">--|src</span><br><span class="line">----|App.css</span><br><span class="line">----|App.js</span><br><span class="line">----|index.css</span><br><span class="line">----|index.js</span><br><span class="line">----|registerServiceWorker.js</span><br><span class="line">--|package.json</span><br><span class="line">--|yarn.lock</span><br></pre></td></tr></table></figure>
<p>index.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import React from &apos;react&apos;;</span><br><span class="line">import ReactDOM from &apos;react-dom&apos;;</span><br><span class="line">// 你学会了 引入样式</span><br><span class="line">import &apos;./index.css&apos;;</span><br><span class="line">/*</span><br><span class="line">为什么叫app，因为 index.js叫做入口 入口是把整个程序启动起来的</span><br><span class="line">所有逻辑卸载 App 里</span><br><span class="line">*/</span><br><span class="line">import App from &apos;./App&apos;;</span><br><span class="line">import * as serviceWorker from &apos;./serviceWorker&apos;;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(&lt;App /&gt;, document.getElementById(&apos;root&apos;));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// serviceWorker.unregister();</span><br><span class="line">// 这个 serviceWorker 你不知道干啥的，你可以试着 删掉来看看</span><br><span class="line">// 删除后依然可以运行</span><br></pre></td></tr></table></figure>
<blockquote>
<h3 id="怎么使用js"><a href="#怎么使用js" class="headerlink" title="怎么使用js?"></a>怎么使用js?</h3></blockquote>
<p>aa.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function sayHello()&#123;</span><br><span class="line">    console.log(&apos;hello&apos;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default sayHello</span><br></pre></td></tr></table></figure>
<p>index.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import React from &apos;react&apos;;</span><br><span class="line">import ReactDOM from &apos;react-dom&apos;;</span><br><span class="line">import &apos;./index.css&apos;;</span><br><span class="line">import App from &apos;./App&apos;;</span><br><span class="line"></span><br><span class="line">import sayHello from &apos;./aa&apos;;</span><br><span class="line"></span><br><span class="line">sayHello(); // 打印 hello</span><br><span class="line"></span><br><span class="line">ReactDOM.render(&lt;App /&gt;, document.getElementById(&apos;root&apos;));</span><br></pre></td></tr></table></figure>
<blockquote>
<p>这样你就知道如何引入 css 和 js 了</p>
</blockquote>
<blockquote>
<h3 id="index-html是什么"><a href="#index-html是什么" class="headerlink" title="index.html是什么"></a>index.html是什么</h3></blockquote>
<ul>
<li>基本就是万年不变</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot; /&gt;</span><br><span class="line">    &lt;!-- 网站图标 --&gt;</span><br><span class="line">    &lt;link rel=&quot;shortcut icon&quot; href=&quot;%PUBLIC_URL%/favicon.ico&quot; /&gt;</span><br><span class="line">    &lt;!-- 手机端适配 --&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, shrink-to-fit=no&quot;/&gt;</span><br><span class="line">    &lt;meta name=&quot;theme-color&quot; content=&quot;#000000&quot; /&gt;</span><br><span class="line">    &lt;!-- 安卓应用相关 --&gt;</span><br><span class="line">    &lt;link rel=&quot;manifest&quot; href=&quot;%PUBLIC_URL%/manifest.json&quot; /&gt;</span><br><span class="line">    &lt;title&gt;React App&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;!-- 浏览器不支持js --&gt;</span><br><span class="line">    &lt;noscript&gt;You need to enable JavaScript to run this app.&lt;/noscript&gt;</span><br><span class="line">    &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>App.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component &#125; from &apos;react&apos;;</span><br><span class="line">// app 里 引入了一个图片 svg 而且还能当作对象表示</span><br><span class="line">import logo from &apos;./logo.svg&apos;;</span><br><span class="line">// 引入样式</span><br><span class="line">import &apos;./App.css&apos;;</span><br><span class="line"></span><br><span class="line">class App extends Component &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div className=&quot;App&quot;&gt;</span><br><span class="line">        &lt;header className=&quot;App-header&quot;&gt;</span><br><span class="line">          &lt;img src=&#123;logo&#125; className=&quot;App-logo&quot; alt=&quot;logo&quot; /&gt;</span><br><span class="line">          &lt;p&gt;</span><br><span class="line">            Edit &lt;code&gt;src/App.js&lt;/code&gt; and save to reload.</span><br><span class="line">          &lt;/p&gt;</span><br><span class="line">          &lt;a</span><br><span class="line">            className=&quot;App-link&quot;</span><br><span class="line">            href=&quot;https://reactjs.org&quot;</span><br><span class="line">            target=&quot;_blank&quot;</span><br><span class="line">            rel=&quot;noopener noreferrer&quot;</span><br><span class="line">          &gt;</span><br><span class="line">            Learn React</span><br><span class="line">          &lt;/a&gt;</span><br><span class="line">        &lt;/header&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default App;</span><br></pre></td></tr></table></figure>
<ul>
<li>此时 App里的内容是不是很熟悉 JSX啊</li>
<li>注意 JSX 使用的是 xml语法而不是 html语法</li>
<li>注意 JSX 使用的是 xml语法而不是 html语法</li>
<li>注意 JSX 使用的是 xml语法而不是 html语法</li>
</ul>
<h3 id="部署到github上"><a href="#部署到github上" class="headerlink" title="部署到github上"></a>部署到github上</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">cd my-react-app</span><br><span class="line"></span><br><span class="line"># 初始化git</span><br><span class="line">git init </span><br><span class="line"></span><br><span class="line"># 提交文件 到暂存区</span><br><span class="line">git add .</span><br><span class="line"></span><br><span class="line"># 所有代码提交到代码库</span><br><span class="line">git commit -m &apos;第一次提交&apos;</span><br><span class="line"></span><br><span class="line"># 打开你的github 新建仓库 </span><br><span class="line">react-demo-2019-1-26</span><br><span class="line"></span><br><span class="line"># 选择上传本地仓库</span><br><span class="line">git remote add origin git@github.com:slTrust/react-demo-2019-1-26.git</span><br><span class="line">git push -u origin master</span><br><span class="line"></span><br><span class="line"># 注意 千万别用 https 坑死你 用SSH</span><br></pre></td></tr></table></figure>
<blockquote>
<h3 id="如何让别人预览"><a href="#如何让别人预览" class="headerlink" title="如何让别人预览"></a>如何让别人预览</h3></blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"># 第一步 cd my-react-app 进入你的应用目录</span><br><span class="line"># 打包你的应用</span><br><span class="line">yarn build </span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">Creating an optimized production build...</span><br><span class="line">Compiled successfully.</span><br><span class="line"></span><br><span class="line">File sizes after gzip:</span><br><span class="line"></span><br><span class="line">  34.71 KB  build/static/js/1.fa92c112.chunk.js</span><br><span class="line">  763 B     build/static/js/runtime~main.229c360f.js</span><br><span class="line">  581 B     build/static/js/main.419d3410.chunk.js</span><br><span class="line">  511 B     build/static/css/main.d12a5979.chunk.css</span><br><span class="line"></span><br><span class="line">//这个项目 默认认为你是在服务器的根目录</span><br><span class="line">The project was built assuming it is hosted at the server root.</span><br><span class="line">// 你可以控制这个东西 使用 homepage 参数 在 package.json.</span><br><span class="line">You can control this with the homepage field in your package.json.</span><br><span class="line">// 比如</span><br><span class="line">For example, add this to build it for GitHub Pages:</span><br><span class="line"></span><br><span class="line">  &quot;homepage&quot; : &quot;http://myname.github.io/myapp&quot;,</span><br><span class="line"></span><br><span class="line">The build folder is ready to be deployed.</span><br><span class="line">You may serve it with a static server:</span><br><span class="line"></span><br><span class="line">  yarn global add serve</span><br><span class="line">  serve -s build</span><br><span class="line"></span><br><span class="line">Find out more about deployment here:</span><br><span class="line"></span><br><span class="line">  http://bit.ly/CRA-deploy</span><br><span class="line"></span><br><span class="line">✨  Done in 7.99s.</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 由于 .gitignore 忽略了 build 目录 所以我们要修改它 移除 /build</span><br><span class="line">git add .</span><br><span class="line">git commit -m &apos;第一次 build&apos;</span><br><span class="line">git push</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 在你的远程仓库  点击 settings</span><br><span class="line"># GitHub Pages 下 Source 选择 master branch ==&gt; save </span><br><span class="line"># 此时给你个地址  千万别点 因为是 404</span><br><span class="line"># 因为它不是给你点的  是给你复制点 如  我的是 https://sltrust.github.io/react-demo-2019-1-26/</span><br><span class="line"></span><br><span class="line"># 然后找刚才的build 目录 如我的是：</span><br><span class="line">https://sltrust.github.io/react-demo-2019-1-26/build/index.html</span><br><span class="line"></span><br><span class="line"># 但是为什么一片空白</span><br><span class="line"># 看 network 发现资源 404 </span><br><span class="line"># 因为路径是 https://sltrust.github.io/static/css/main.d12a5979.chunk.css</span><br><span class="line"># 而你没有 static 这个路径</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 回到刚才 build之后提示的  homepage </span><br><span class="line"># 去 package.json 里</span><br><span class="line"># 添加  &quot;homepage&quot; : &quot;http://myname.github.io/myapp&quot;,</span><br><span class="line"># 修改为你的 github</span><br><span class="line">https://sltrust.github.io/react-demo-2019-1-26/build</span><br><span class="line"></span><br><span class="line"># 重新 build</span><br><span class="line">yarn build</span><br><span class="line"></span><br><span class="line"># 重新提交</span><br><span class="line">git add .</span><br><span class="line">git commit -m &apos;第二次 build&apos;</span><br><span class="line">git push</span><br><span class="line"></span><br><span class="line"># 重新打开网址  清除缓存</span><br><span class="line">https://sltrust.github.io/react-demo-2019-1-26/build/index.html</span><br><span class="line"></span><br><span class="line"># 如果是高手就设置一下预览链接</span><br><span class="line">仓库目录  Code下  点击那个 edit 按钮</span><br><span class="line">这样别人进入你的仓库就能看到预览了</span><br></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/React入门/">React入门</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/01/24/React入门010之React的CSS方案/" title="React入门010之React的CSS方案" itemprop="url">React入门010之React的CSS方案</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Stevin" target="_blank" itemprop="author">Stevin</a>
		
  <p class="article-time">
    <time datetime="2019-01-24T14:45:01.000Z" itemprop="datePublished"> Published 2019-01-24</time>
    
  </p>
</header>
    <div class="article-content">
        
        <blockquote>
<h3 id="传统CSS使用方式"><a href="#传统CSS使用方式" class="headerlink" title="传统CSS使用方式"></a>传统CSS使用方式</h3></blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        #app&#123;</span><br><span class="line">            color:red</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div id=&quot;app&quot;&gt;App&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<h3 id="在后来-style-标签被提取到一个-css文件里"><a href="#在后来-style-标签被提取到一个-css文件里" class="headerlink" title="在后来 style 标签被提取到一个 css文件里"></a>在后来 style 标签被提取到一个 css文件里</h3></blockquote>
<ul>
<li>也就是 内容 样式 分离 思想</li>
</ul>
<h3 id="React应用的CSS"><a href="#React应用的CSS" class="headerlink" title="React应用的CSS"></a>React应用的CSS</h3><ul>
<li>新建一个react应用 <a href="https://codesandbox.io/" target="_blank" rel="noopener">https://codesandbox.io/</a></li>
</ul>
<p>index.html</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">  &lt;head&gt; &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>styles.css</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.App &#123;color: red;&#125;</span><br></pre></td></tr></table></figure>
<p>index.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">import React from &quot;react&quot;;</span><br><span class="line">import ReactDOM from &quot;react-dom&quot;;</span><br><span class="line"></span><br><span class="line">// 引入样式</span><br><span class="line">import &quot;./styles.css&quot;;</span><br><span class="line"></span><br><span class="line">function App() &#123;</span><br><span class="line">    //  react建议 class属性 使用 className 如果你不加可能依然可以运行。 建议就是按照react的建议做，不要自己作死。</span><br><span class="line">    return &lt;div className=&quot;App&quot;&gt;Hello World&lt;/div&gt;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const rootElement = document.getElementById(&quot;root&quot;);</span><br><span class="line">ReactDOM.render(&lt;App /&gt;, rootElement);</span><br></pre></td></tr></table></figure>
<ul>
<li><a href="https://codesandbox.io/s/mmy3jj903p" target="_blank" rel="noopener">在线代码</a></li>
</ul>
<blockquote>
<p>这个代码好不好呢？</p>
</blockquote>
<ul>
<li>在一开始没什么问题,但是当你的组件逐渐变多，你就觉得不好</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">比如组件嵌套的情况下</span><br><span class="line">都有一个 class=&quot;title&quot;</span><br><span class="line">它们之间就会相互影响</span><br></pre></td></tr></table></figure>
<p>styles.css</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.title &#123;</span><br><span class="line">  color: red;</span><br><span class="line">  border: 1px solid red;</span><br><span class="line">  padding: 10px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>index.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">import React from &quot;react&quot;;</span><br><span class="line">import ReactDOM from &quot;react-dom&quot;;</span><br><span class="line"></span><br><span class="line">import &quot;./styles.css&quot;;</span><br><span class="line"></span><br><span class="line">function Father() &#123;</span><br><span class="line">  return (</span><br><span class="line">    &lt;div className=&quot;title&quot;&gt;</span><br><span class="line">      父亲组件</span><br><span class="line">      &lt;Sun /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line">function Sun() &#123;</span><br><span class="line">  return (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;div className=&quot;title&quot;&gt;儿子组件&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const rootElement = document.getElementById(&quot;root&quot;);</span><br><span class="line">ReactDOM.render(&lt;Father /&gt;, rootElement);</span><br></pre></td></tr></table></figure>
<ul>
<li><a href="https://codesandbox.io/s/x91k4r55lw" target="_blank" rel="noopener">在线代码</a></li>
</ul>
<blockquote>
<p>两个组件都有title样式 我只想让 <father> 字体颜色变红</father></p>
</blockquote>
<ul>
<li>结果 <sun> 也变红了</sun></li>
</ul>
<blockquote>
<h3 id="唯一的办法就是给所有的组件加上一个前缀"><a href="#唯一的办法就是给所有的组件加上一个前缀" class="headerlink" title="唯一的办法就是给所有的组件加上一个前缀"></a>唯一的办法就是给所有的组件加上一个前缀</h3></blockquote>
<p>如</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">.father-title&#123; ... &#125;</span><br><span class="line">.sun-title&#123; ... &#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>这个方式叫做—— BEM命名法(思路就是加前缀)</p>
</blockquote>
<ul>
<li>为了防止各个组件之间的冲突，我们采用了加前缀的方式解决</li>
</ul>
<p>styles.css</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">.father-title &#123;</span><br><span class="line">  color: red;</span><br><span class="line">  border: 1px solid red;</span><br><span class="line">  padding: 10px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.sun-title &#123;</span><br><span class="line">  color: green;</span><br><span class="line">  border: 1px solid green;</span><br><span class="line">  padding: 10px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>index.js </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">import React from &quot;react&quot;;</span><br><span class="line">import ReactDOM from &quot;react-dom&quot;;</span><br><span class="line"></span><br><span class="line">import &quot;./styles.css&quot;;</span><br><span class="line"></span><br><span class="line">function Father() &#123;</span><br><span class="line">  return (</span><br><span class="line">    &lt;div className=&quot;father-title&quot;&gt;</span><br><span class="line">      父亲组件</span><br><span class="line">      &lt;Sun /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line">function Sun() &#123;</span><br><span class="line">  return (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;div className=&quot;sun-title&quot;&gt;儿子组件&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const rootElement = document.getElementById(&quot;root&quot;);</span><br><span class="line">ReactDOM.render(&lt;Father /&gt;, rootElement);</span><br></pre></td></tr></table></figure>
<ul>
<li><a href="https://codesandbox.io/s/l40v346mpz" target="_blank" rel="noopener">在线代码</a></li>
</ul>
<blockquote>
<p>如果你想动态设置主题 theme </p>
</blockquote>
<ul>
<li>ES6 字符串的拼接来设置</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function Sun(props) &#123;</span><br><span class="line">    const theme = props.theme;</span><br><span class="line">    return (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;div className=`sun-title sun-$&#123;theme&#125;`&gt;儿子组件&lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<h3 id="有没有一种方式让我写多个-class更加的简单一点？"><a href="#有没有一种方式让我写多个-class更加的简单一点？" class="headerlink" title="有没有一种方式让我写多个 class更加的简单一点？"></a>有没有一种方式让我写多个 class更加的简单一点？</h3></blockquote>
<ul>
<li>于是就有人发明了 <a href="https://github.com/JedWatson/classnames" target="_blank" rel="noopener">classnames</a></li>
<li>google 搜 react classnames 得到一个 JedWatson写的库</li>
<li>在 <a href="https://codesandbox.io" target="_blank" rel="noopener">https://codesandbox.io</a> 上新建react项目</li>
<li>添加依赖 搜索 classnames</li>
</ul>
<p>styles.css</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">.App &#123;</span><br><span class="line">  font-family: sans-serif;</span><br><span class="line">  text-align: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.red &#123;</span><br><span class="line">  color: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.border10 &#123;</span><br><span class="line">  border: 10px solid red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>index.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import React from &quot;react&quot;;</span><br><span class="line">import ReactDOM from &quot;react-dom&quot;;</span><br><span class="line">import classNames from &quot;classnames&quot;;</span><br><span class="line">import &quot;./styles.css&quot;;</span><br><span class="line"></span><br><span class="line">function App() &#123;</span><br><span class="line">  return (</span><br><span class="line">    &lt;div className=&quot;App&quot;&gt;</span><br><span class="line">      &lt;h1 className=&#123;classNames(&quot;red&quot;, &quot;border10&quot;)&#125;&gt;Hello CodeSandbox&lt;/h1&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const rootElement = document.getElementById(&quot;root&quot;);</span><br><span class="line">ReactDOM.render(&lt;App /&gt;, rootElement);</span><br></pre></td></tr></table></figure>
<ul>
<li><a href="https://codesandbox.io/s/r0056rmlnq" target="_blank" rel="noopener">在线代码</a></li>
<li>唯一的感觉就是比之前更麻烦了</li>
</ul>
<blockquote>
<h3 id="强迫症的心理-处女座-——模块化"><a href="#强迫症的心理-处女座-——模块化" class="headerlink" title="强迫症的心理(处女座)——模块化"></a>强迫症的心理(处女座)——模块化</h3></blockquote>
<p>每个组件对应一个目录 对应自己的css</p>
<ul>
<li><a href="https://codesandbox.io/s/vnj410l9yl" target="_blank" rel="noopener">在线代码</a></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">|src</span><br><span class="line">--|topBar</span><br><span class="line">----|topBar.css</span><br><span class="line">----|topBar.js</span><br><span class="line">--|x</span><br><span class="line">----|x.css</span><br><span class="line">----|x.js</span><br><span class="line">--|index.js</span><br></pre></td></tr></table></figure>
<blockquote>
<p>强迫症的执念——我就不想用前缀</p>
</blockquote>
<ol>
<li>两个title 自己分开</li>
<li>css:做不到</li>
<li>前端：css go die !</li>
</ol>
<blockquote>
<p>既然你css做不到那你就靠边站，我用js</p>
</blockquote>
<ul>
<li>CSS in JS 方案</li>
</ul>
<h3 id="CSS-in-JS"><a href="#CSS-in-JS" class="headerlink" title="CSS in JS"></a>CSS in JS</h3><p>简单来说这个方案大概有20种</p>
<ul>
<li>google 搜索 github css in js</li>
<li>你会搜到一个仓库 <a href="https://github.com/MicheleBertoli/css-in-js" target="_blank" rel="noopener">css-in-js</a></li>
<li>里面收录了所有 css in js 的方案 那么有多少呢？</li>
<li>大概 60多种，开不开心有60多种</li>
</ul>
<blockquote>
<p>此时有一个问题，为什么做前端架构很难呢？</p>
</blockquote>
<ul>
<li>没有三年的项目经验</li>
<li>没整过这些奇怪的库</li>
</ul>
<blockquote>
<p>有没有什么在前端一开始觉得很NB到后面变得很垃圾</p>
</blockquote>
<ul>
<li>grunt 三年前 三年后</li>
<li>angular 1.x</li>
</ul>
<blockquote>
<p>如何区分这些库呢？  </p>
</blockquote>
<ul>
<li>看star数量</li>
</ul>
<blockquote>
<p>筛选css in js 的方案</p>
</blockquote>
<ul>
<li><a href="https://github.com/styled-components/styled-components" target="_blank" rel="noopener">styled-components</a> 17306 star</li>
<li><a href="https://github.com/emotion-js/emotion" target="_blank" rel="noopener">emotion</a></li>
<li><a href="https://github.com/gajus/react-css-modules" target="_blank" rel="noopener">react-css-modules</a></li>
<li><a href="https://github.com/FormidableLabs/radium" target="_blank" rel="noopener">radium</a> </li>
</ul>
<h3 id="styled-components"><a href="#styled-components" class="headerlink" title="styled-components"></a>styled-components</h3><ul>
<li><a href="https://codesandbox.io" target="_blank" rel="noopener">https://codesandbox.io</a> 上建立react</li>
<li>安装依赖 npm install –save styled-components</li>
</ul>
<p>index.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">import React from &quot;react&quot;;</span><br><span class="line">import ReactDOM from &quot;react-dom&quot;;</span><br><span class="line">import styled from &quot;styled-components&quot;;</span><br><span class="line">import &quot;./styles.css&quot;;</span><br><span class="line"></span><br><span class="line">const Button = styled.button`</span><br><span class="line">  border-radius: 3px;</span><br><span class="line">  border: 1px solid #666;</span><br><span class="line">  color: #333;</span><br><span class="line">  margin: 0 1em;</span><br><span class="line">  padding: 0.25em 1em;</span><br><span class="line">`;</span><br><span class="line"></span><br><span class="line">function App() &#123;</span><br><span class="line">  return (</span><br><span class="line">    &lt;div className=&quot;App&quot;&gt;</span><br><span class="line">      &lt;Button&gt;按钮&lt;/Button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const rootElement = document.getElementById(&quot;root&quot;);</span><br><span class="line">ReactDOM.render(&lt;App /&gt;, rootElement);</span><br></pre></td></tr></table></figure>
<ul>
<li><a href="https://codesandbox.io/s/xpwjmyovy4" target="_blank" rel="noopener">在线代码</a></li>
<li>这样就解决了，你写前缀就浑身难受的心态</li>
<li>强迫症是前端的原始动力</li>
<li>而且你的世界从此没有了 .css文件</li>
</ul>
<p>在写一个topbar.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">import React from &quot;react&quot;;</span><br><span class="line">import styled from &quot;styled-components&quot;;</span><br><span class="line"></span><br><span class="line">export default function Topbar(props) &#123;</span><br><span class="line">  const theme = props.theme; // &apos;white | black&apos;</span><br><span class="line"></span><br><span class="line">  const onClick = () =&gt; &#123;</span><br><span class="line">    console.log(1);</span><br><span class="line">  &#125;;</span><br><span class="line">  const Logo = styled.div`</span><br><span class="line">    width: 40px;</span><br><span class="line">    height: 40px;</span><br><span class="line">    background: grey;</span><br><span class="line">  `;</span><br><span class="line">  const Nav = styled.nav`</span><br><span class="line">    height: 30px;</span><br><span class="line">    background: #333;</span><br><span class="line">    width: 200px;</span><br><span class="line">    color: white;</span><br><span class="line">    margin-left: 10px;</span><br><span class="line">  `;</span><br><span class="line">  const Wrapper = styled.div`</span><br><span class="line">    display: flex;</span><br><span class="line">    align-items: center;</span><br><span class="line">    border: 1px solid black;</span><br><span class="line">    padding: 10px;</span><br><span class="line">    background: $&#123;theme&#125;;</span><br><span class="line">  `;</span><br><span class="line">  return (</span><br><span class="line">    &lt;Wrapper&gt;</span><br><span class="line">      &lt;Logo&gt;logo&lt;/Logo&gt;</span><br><span class="line">      &lt;Nav&gt;nav&lt;/Nav&gt;</span><br><span class="line">    &lt;/Wrapper&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>此时你发现违背了 多年来前端的思想  内容样式分离</p>
</blockquote>
<ul>
<li>又回到解放前了</li>
<li>react 说 我不仅内容混在一起 行为也要混在一起</li>
</ul>
<blockquote>
<p>styled-components</p>
</blockquote>
<ul>
<li>目前react css比较火的方案</li>
<li>可以再也看不到css文件</li>
<li>不需要定义class</li>
<li>而且从工程角度来说——这个方案对新人非常好，不会因为你改一个样式造成整个项目瘫痪了，你只需要关心自己的组件</li>
</ul>
<h3 id="emotion方案"><a href="#emotion方案" class="headerlink" title="emotion方案"></a>emotion方案</h3><ul>
<li><p><a href="https://github.com/emotion-js/emotion" target="_blank" rel="noopener">emotion</a></p>
</li>
<li><p>新建 <a href="https://codesandbox.io/" target="_blank" rel="noopener">https://codesandbox.io/</a> 项目</p>
</li>
<li>安装依赖 @emotion/core”</li>
<li>x.js</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">/** @jsx jsx */</span><br><span class="line">import React from &quot;react&quot;;</span><br><span class="line">import &#123; jsx &#125; from &quot;@emotion/core&quot;;</span><br><span class="line"></span><br><span class="line">export default function X(props) &#123;</span><br><span class="line">  const theme = props.theme;</span><br><span class="line">  return (</span><br><span class="line">    &lt;div</span><br><span class="line">      css=&#123;&#123;</span><br><span class="line">        display: &quot;flex&quot;,</span><br><span class="line">        alignItems: &quot;center&quot;,</span><br><span class="line">        background: theme,</span><br><span class="line">        padding: 10</span><br><span class="line">      &#125;&#125;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;div</span><br><span class="line">        css=&#123;&#123;</span><br><span class="line">          display: &quot;inline-block&quot;,</span><br><span class="line">          color: &quot;red&quot;,</span><br><span class="line">          fontSize: 20,</span><br><span class="line">          white: 40,</span><br><span class="line">          height: 40,</span><br><span class="line">          background: &quot;grey&quot;</span><br><span class="line">        &#125;&#125;</span><br><span class="line">      &gt;</span><br><span class="line">        logo</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;nav</span><br><span class="line">        css=&#123;&#123;</span><br><span class="line">          width: 200,</span><br><span class="line">          height: 30,</span><br><span class="line">          background: &quot;#333&quot;,</span><br><span class="line">          marginLeft: 10</span><br><span class="line">        &#125;&#125;</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>有个坑就是第一行必须写那个注释</li>
<li>根据与 直接 style=”color:red;” 没区别</li>
<li>强烈不推荐用</li>
</ul>
<h3 id="react-css-modules"><a href="#react-css-modules" class="headerlink" title="react-css-modules"></a>react-css-modules</h3><ul>
<li><p><a href="https://github.com/gajus/react-css-modules" target="_blank" rel="noopener">react-css-modules</a></p>
</li>
<li><p>新建项目 <a href="https://codesandbox.io" target="_blank" rel="noopener">https://codesandbox.io</a></p>
</li>
<li>安装依赖 react-css-modules</li>
<li>坑来了——需要配置 webpack</li>
</ul>
<p>我放弃了——为什么webpack还活着</p>
<blockquote>
<p>如果你成功了，你就可以这样写样式了</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">import React from &apos;react&apos;;</span><br><span class="line">import CSSModules from &apos;react-css-modules&apos;;</span><br><span class="line">import styles from &apos;./table.css&apos;;</span><br><span class="line"></span><br><span class="line">class Table extends React.Component &#123;</span><br><span class="line">    render () &#123;</span><br><span class="line">        return &lt;div styleName=&apos;table&apos;&gt;</span><br><span class="line">            &lt;div styleName=&apos;row&apos;&gt;</span><br><span class="line">                &lt;div styleName=&apos;cell&apos;&gt;A0&lt;/div&gt;</span><br><span class="line">                &lt;div styleName=&apos;cell&apos;&gt;B0&lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default CSSModules(Table, styles);</span><br></pre></td></tr></table></figure>
<ul>
<li><a href="https://github.com/gajus/react-css-modules" target="_blank" rel="noopener">https://github.com/gajus/react-css-modules</a></li>
<li>好处就是 styleName=’table’ 这个table跟其他的table不会有重叠</li>
<li>唯一的改变就是把 className —&gt; styleName</li>
<li>webpack就是一步一个坑</li>
</ul>
<h3 id="radium"><a href="#radium" class="headerlink" title="radium"></a><a href="https://github.com/FormidableLabs/radium" target="_blank" rel="noopener">radium</a></h3><ul>
<li>看文档吧！</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">import Radium from &apos;radium&apos;;</span><br><span class="line">import React from &apos;react&apos;;</span><br><span class="line">import color from &apos;color&apos;;</span><br><span class="line"></span><br><span class="line">class Button extends React.Component &#123;</span><br><span class="line">  static propTypes = &#123;</span><br><span class="line">    kind: PropTypes.oneOf([&apos;primary&apos;, &apos;warning&apos;]).isRequired</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    // Radium extends the style attribute to accept an array. It will merge</span><br><span class="line">    // the styles in order. We use this feature here to apply the primary</span><br><span class="line">    // or warning styles depending on the value of the `kind` prop. Since its</span><br><span class="line">    // all just JavaScript, you can use whatever logic you want to decide which</span><br><span class="line">    // styles are applied (props, state, context, etc).</span><br><span class="line">    return (</span><br><span class="line">      &lt;button</span><br><span class="line">        style=&#123;[</span><br><span class="line">          styles.base,</span><br><span class="line">          styles[this.props.kind]</span><br><span class="line">        ]&#125;&gt;</span><br><span class="line">        &#123;this.props.children&#125;</span><br><span class="line">      &lt;/button&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Button = Radium(Button);</span><br><span class="line"></span><br><span class="line">// You can create your style objects dynamically or share them for</span><br><span class="line">// every instance of the component.</span><br><span class="line">var styles = &#123;</span><br><span class="line">  base: &#123;</span><br><span class="line">    color: &apos;#fff&apos;,</span><br><span class="line"></span><br><span class="line">    // Adding interactive state couldn&apos;t be easier! Add a special key to your</span><br><span class="line">    // style object (:hover, :focus, :active, or @media) with the additional rules.</span><br><span class="line">    &apos;:hover&apos;: &#123;</span><br><span class="line">      background: color(&apos;#0074d9&apos;).lighten(0.2).hexString()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  primary: &#123;</span><br><span class="line">    background: &apos;#0074D9&apos;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  warning: &#123;</span><br><span class="line">    background: &apos;#FF4136&apos;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li>单独看例子就——反人类</li>
</ul>
<h3 id="总结四个CSS-in-JS-方案"><a href="#总结四个CSS-in-JS-方案" class="headerlink" title="总结四个CSS in JS 方案"></a>总结四个CSS in JS 方案</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">1. styled-componends      </span><br><span class="line">const Title = styled.div` 样式代码...`</span><br><span class="line"></span><br><span class="line">2. emotion</span><br><span class="line">&lt;div css=&#123;对象&#125;&gt;</span><br><span class="line"></span><br><span class="line">3. css-module   </span><br><span class="line">&lt;div styleName=&quot;title&quot;&gt;  保证title不对其他组件有影响</span><br><span class="line"></span><br><span class="line">4. radium</span><br><span class="line">&lt;div style=&#123;[style.title,style.base]&#125;&gt;</span><br></pre></td></tr></table></figure>
<p>如果是我我觉得第三个可能是最好的！</p>
<blockquote>
<h3 id="回顾"><a href="#回顾" class="headerlink" title="回顾"></a>回顾</h3></blockquote>
<ul>
<li>避免 同名 .title 冲突 加前缀</li>
<li>不想加前缀，强迫症</li>
<li>css in js 得到 60多个方案</li>
<li>按照star 选了 4个 来实现不写前缀</li>
</ul>
<blockquote>
<h3 id="建议"><a href="#建议" class="headerlink" title="建议"></a>建议</h3></blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">如果写一个应用 app </span><br><span class="line">- 用 css-module</span><br><span class="line">- 或者 styled-componends </span><br><span class="line">因为它们还是在写 css</span><br><span class="line"></span><br><span class="line">如果写一个 UI库 lib</span><br><span class="line">- 使用旧的 css 方案 加前缀</span><br><span class="line">- 因为上面的方式会生成随机名字，你的组件样式就没法被覆盖了</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">.title  --&gt; title_xd0031 这个名字是随机的，没法覆盖</span><br><span class="line"></span><br><span class="line">.x-title --&gt; .x-title  不帮你生成名字，可以进行改写和覆盖样式</span><br></pre></td></tr></table></figure>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/React入门/">React入门</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/01/24/React入门009之React生命周期/" title="React入门009之React生命周期" itemprop="url">React入门009之React生命周期</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Stevin" target="_blank" itemprop="author">Stevin</a>
		
  <p class="article-time">
    <time datetime="2019-01-24T13:20:37.000Z" itemprop="datePublished"> Published 2019-01-24</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="React生命周期"><a href="#React生命周期" class="headerlink" title="React生命周期"></a>React生命周期</h3><ul>
<li><a href="https://reactjs.org/docs/state-and-lifecycle.html" target="_blank" rel="noopener">英文文档</a></li>
<li><a href="https://react.docschina.org/docs/state-and-lifecycle.html" target="_blank" rel="noopener">中文文档</a></li>
</ul>
<p><img src="https://raw.githubusercontent.com/slTrust/note/master/react/react-study009-01.png" alt></p>
<blockquote>
<p>面试必考(但是平时用的不多)</p>
</blockquote>
<blockquote>
<h4 id="VanillaJS理解一个div的生命周期"><a href="#VanillaJS理解一个div的生命周期" class="headerlink" title="VanillaJS理解一个div的生命周期"></a>VanillaJS理解一个div的生命周期</h4></blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">let app = document.getElementById(&apos;root&apos;);</span><br><span class="line"></span><br><span class="line">// create 出现在js内存里</span><br><span class="line">let div = document.createElement(&apos;div&apos;);</span><br><span class="line">div.style.border = &apos;1px solid red&apos;;</span><br><span class="line"></span><br><span class="line">// mount 之前 </span><br><span class="line">let state = 0;</span><br><span class="line">div.innerHTML = `&lt;p&gt;$&#123;state&#125;&lt;/p&gt;</span><br><span class="line">                &lt;button&gt;add&lt;/button&gt;</span><br><span class="line">                &lt;button&gt;die&lt;/button&gt;</span><br><span class="line">                `;</span><br><span class="line"></span><br><span class="line">// mount 挂载</span><br><span class="line">app.appendChild(div);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">div.querySelector(&apos;button&apos;).onclick = ()=&gt;&#123;</span><br><span class="line">    state += 1</span><br><span class="line">    // update div</span><br><span class="line">    div.querySelector(&apos;p&apos;).innerText = state;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">div.querySelectorAll(&apos;button&apos;)[1].onclick = ()=&gt;&#123;</span><br><span class="line">    // remove div 但是要移干净</span><br><span class="line">    // 移除事件，移除引用</span><br><span class="line">    div.querySelector(&apos;button&apos;).onclick = null</span><br><span class="line">    div.querySelectorAll(&apos;button&apos;)[1].onclick = null</span><br><span class="line">    div.remove()</span><br><span class="line">    div = null</span><br><span class="line">    // 此时才是真正的  destroy div</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>人有生/老/病/死<br>div有 create / mount / update / destroy (生 挂 更 死)</p>
</blockquote>
<h3 id="此时看React版的生命周期-完整版"><a href="#此时看React版的生命周期-完整版" class="headerlink" title="此时看React版的生命周期(完整版)"></a>此时看React版的生命周期(完整版)</h3><p><a href="https://codesandbox.io/s/n9lj1nplxp" target="_blank" rel="noopener">在线代码</a></p>
<ul>
<li>constructor   创建</li>
<li>componentWillMount 将要挂载</li>
<li>render 填充/更新</li>
<li>componentDidMount 挂载完毕</li>
<li>componentWillUpdate 更新之前</li>
<li>shouldComponentUpdate 要不要更新</li>
<li>componentDidUpdate 更新之后</li>
<li>componentWillUnmount 没死之前</li>
<li>componentWillReceiveProps 父组件传递props了</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line">import React from &quot;react&quot;;</span><br><span class="line">import ReactDOM from &quot;react-dom&quot;;</span><br><span class="line">import &quot;./styles.css&quot;;</span><br><span class="line"></span><br><span class="line">let div = document.createElement(&quot;div&quot;);</span><br><span class="line">document.body.appendChild(div);</span><br><span class="line">console.log = function(content) &#123;</span><br><span class="line">  div.innerHTML += `$&#123;content&#125;&lt;br&gt;`;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Baba extends React.Component &#123;</span><br><span class="line">  constructor() &#123;</span><br><span class="line">    super();</span><br><span class="line">    this.state = &#123;</span><br><span class="line">      hasChild: true</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  onClick() &#123;</span><br><span class="line">    this.setState(&#123;</span><br><span class="line">      hasChild: false</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  callSon() &#123;</span><br><span class="line">    this.setState(&#123;</span><br><span class="line">      word: &quot;你还好吧&quot;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        我是你爸爸</span><br><span class="line">        &lt;button onClick=&#123;() =&gt; this.onClick()&#125;&gt;kill son&lt;/button&gt;</span><br><span class="line">        &lt;button onClick=&#123;() =&gt; this.callSon()&#125;&gt;call son&lt;/button&gt;</span><br><span class="line">        &#123;this.state.hasChild ? &lt;App word=&#123;this.state.word&#125; /&gt; : null&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class App extends React.Component &#123;</span><br><span class="line">  onClick() &#123;</span><br><span class="line">    console.log(&quot;用户点击了&quot;);</span><br><span class="line">    this.setState(&#123;</span><br><span class="line">      n: this.state.n + 1</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  updateX() &#123;</span><br><span class="line">    this.setState(&#123;</span><br><span class="line">      x: this.state.x + &quot;!&quot;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  constructor() &#123;</span><br><span class="line">    super();</span><br><span class="line">    this.state = &#123;</span><br><span class="line">      n: 0,</span><br><span class="line">      x: &quot;不展示&quot;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  componentWillMount() &#123;</span><br><span class="line">    console.log(&quot;将要 mount App&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    // update</span><br><span class="line">    console.log(&quot;填充/更新 App 的内容&quot;);</span><br><span class="line">    return (</span><br><span class="line">      &lt;div className=&quot;App&quot;&gt;</span><br><span class="line">        &#123;this.state.n&#125;</span><br><span class="line">        &lt;br /&gt;</span><br><span class="line">        我爸说 &#123;this.props.word&#125;</span><br><span class="line">        &lt;br /&gt;</span><br><span class="line">        &lt;button onClick=&#123;() =&gt; this.onClick()&#125;&gt;+1&lt;/button&gt;</span><br><span class="line">        &lt;button onClick=&#123;() =&gt; this.updateX()&#125;&gt;update x&lt;/button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    console.log(&quot;mount App 完毕&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  componentWillUpdate() &#123;</span><br><span class="line">    console.log(&quot;update App 之前&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  shouldComponentUpdate(nextProps, nextState) &#123;</span><br><span class="line">    console.log(&quot;要不要更新呢？&quot;);</span><br><span class="line">    if (this.state.n === nextState.n) &#123;</span><br><span class="line">      return false;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      return true;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  //update is render</span><br><span class="line">  componentDidUpdate() &#123;</span><br><span class="line">    console.log(&quot;update App 之后&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  componentWillUnmount() &#123;</span><br><span class="line">    console.log(&quot;App 快要死了，记得喂狗&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  componentWillReceiveProps() &#123;</span><br><span class="line">    console.log(&quot;我爸说话了&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const rootElement = document.getElementById(&quot;root&quot;);</span><br><span class="line">ReactDOM.render(&lt;Baba /&gt;, rootElement);</span><br></pre></td></tr></table></figure>
<h3 id="我们在页面一般做什么？"><a href="#我们在页面一般做什么？" class="headerlink" title="我们在页面一般做什么？"></a>我们在页面一般做什么？</h3><ol>
<li>ajax请求数据</li>
<li>更新数据 setState</li>
<li>事件监听 onClick</li>
<li>初始化state</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">什么时候请求数据呢？ 理论上越早越好，任何周期都可以发请求</span><br><span class="line">- 创建的时候  (推荐)</span><br><span class="line">- 用户点击事件触发的时候 (推荐)</span><br><span class="line">- 组件将要 mount 的时候</span><br><span class="line">- mount之后</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">什么时候初始化呢？</span><br><span class="line">- 可以在 constructor (推荐)</span><br><span class="line">- 可以在 componentWillMount 里 (不推荐)</span><br><span class="line">- render呢？ 可以 但是要在return之前 因为此时要用到 state 了</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">什么时候更新 state呢？</span><br><span class="line">- 在 constructor 创建state之后 setState 不可以报错 Can&apos;t call setState on a component that is not yet mounted. </span><br><span class="line">- 不能在 render 里 setState() 这样就死循环了 因为 setState会触发 render</span><br><span class="line">- 不能在 mount 之前 也不能在 render 里 setState</span><br><span class="line">- 为什么在 componentWillUpdate 不能 因为setState会触发  将要更新了 而此时 setState 死循环</span><br><span class="line">- componentWillUnmount 可以  但是在它死之前 没意义啊</span><br><span class="line">- 一般在 componentWillReceiveProps / componentWillMount / 事件监听里</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">是否决定更新的函数</span><br><span class="line">- shouldComponentUpdate 返回 return false 就不更新</span><br><span class="line">- 极其特殊的情况才用—— 一般用不到</span><br></pre></td></tr></table></figure>
<h3 id="面试"><a href="#面试" class="headerlink" title="面试"></a>面试</h3><blockquote>
<p>面试：什么情况下用 shouldComponentUpdate 允许我们</p>
</blockquote>
<p>手动地判断是否要进行组件更新，根据组件的应用场景设置函数的合理返回值能够帮我们避免不必要的更新</p>
<ul>
<li><p><a href="https://zhuanlan.zhihu.com/p/24856035" target="_blank" rel="noopener">知乎专栏</a></p>
</li>
<li><p><a href="https://juejin.im/post/5b2215f76fb9a00e8f795cd1" target="_blank" rel="noopener">掘金</a></p>
</li>
</ul>
<blockquote>
<p>1.请说出React所有生命周期函数</p>
</blockquote>
<blockquote>
<p>2.请问 shouldComponentUpdate 为什么那么重要</p>
</blockquote>
<ul>
<li>可以自定义是否更新组件</li>
<li>优化更新的效率</li>
</ul>
<blockquote>
<p>3.请问ajax在什么时候用？</p>
</blockquote>
<ul>
<li>componentDidMount 原因是 constructor 里不能用 setState</li>
<li>在 fb里 多次调用会造成不稳定 (其实很多人也不知道为什么fb会造成不稳定)</li>
</ul>
<blockquote>
<p>4.用户点击按钮修改state会触发那些周期函数</p>
</blockquote>
<ul>
<li>shouldComponentUpdate</li>
<li>componentWillUpdate</li>
<li>render</li>
<li>componentDidUpdate</li>
</ul>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/React入门/">React入门</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/01/23/React入门008之Router/" title="React入门008之Router" itemprop="url">React入门008之Router</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Stevin" target="_blank" itemprop="author">Stevin</a>
		
  <p class="article-time">
    <time datetime="2019-01-23T12:57:45.000Z" itemprop="datePublished"> Published 2019-01-23</time>
    
  </p>
</header>
    <div class="article-content">
        
        <blockquote>
<p>先来一个选项卡</p>
</blockquote>
<ul>
<li>打开 <a href="https://codesandbox.io/" target="_blank" rel="noopener">https://codesandbox.io/</a> 选择react</li>
<li>注意我用的react版本是16.7  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;dependencies&quot;: &#123;</span><br><span class="line">    &quot;react&quot;: &quot;16.7.0-alpha.0&quot;,</span><br><span class="line">    &quot;react-dom&quot;: &quot;16.7.0-alpha.0&quot;,</span><br><span class="line">    &quot;react-scripts&quot;: &quot;2.0.3&quot;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>style.css</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">.box &#123;</span><br><span class="line">  border: 1px solid #ccc;</span><br><span class="line">  text-align: center;</span><br><span class="line">  padding: 100px 0;</span><br><span class="line">  width: 90%;</span><br><span class="line">  margin: 0 auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>index.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">import React from &quot;react&quot;;</span><br><span class="line">import ReactDOM from &quot;react-dom&quot;;</span><br><span class="line">import &#123; useState &#125; from &quot;react&quot;;</span><br><span class="line">import &quot;./styles.css&quot;;</span><br><span class="line"></span><br><span class="line">function Login() &#123;</span><br><span class="line">  return &lt;div className=&quot;box&quot;&gt;登录&lt;/div&gt;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function Register() &#123;</span><br><span class="line">  return &lt;div className=&quot;box&quot;&gt;注册&lt;/div&gt;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function App() &#123;</span><br><span class="line">  let [ui, setUi] = useState(&quot;登录&quot;);</span><br><span class="line">  let onClickLogin = () =&gt; setUi(&quot;登录&quot;);</span><br><span class="line">  let onClickRegister = () =&gt; setUi(&quot;注册&quot;);</span><br><span class="line">  return (</span><br><span class="line">    &lt;div className=&quot;App&quot;&gt;</span><br><span class="line">      &lt;button onClick=&#123;onClickLogin&#125;&gt;login&lt;/button&gt;</span><br><span class="line">      &lt;button onClick=&#123;onClickRegister&#125;&gt;register&lt;/button&gt;</span><br><span class="line">      &lt;div&gt;&#123;ui === &quot;登录&quot; ? &lt;Login /&gt; : &lt;Register /&gt;&#125;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const rootElement = document.getElementById(&quot;root&quot;);</span><br><span class="line">ReactDOM.render(&lt;App /&gt;, rootElement);</span><br></pre></td></tr></table></figure>
<ul>
<li><a href="https://codesandbox.io/s/y2y4qvl3jx" target="_blank" rel="noopener">在线代码</a></li>
</ul>
<blockquote>
<p>需求来了，我现在想把链接分享给别人，如分享注册页面，结果链接打开还是登录</p>
</blockquote>
<h3 id="使用hash做路由"><a href="#使用hash做路由" class="headerlink" title="使用hash做路由"></a>使用hash做路由</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hash 就是锚点  就是url后面有个 &apos;#&apos;+path</span><br></pre></td></tr></table></figure>
<ul>
<li>[在线代码(<a href="https://codesandbox.io/s/n41xmw192l" target="_blank" rel="noopener">https://codesandbox.io/s/n41xmw192l</a>)</li>
<li><a href="https://k3x1jy7o2o.codesandbox.io/#login" target="_blank" rel="noopener">https://k3x1jy7o2o.codesandbox.io/#login</a></li>
<li><a href="https://k3x1jy7o2o.codesandbox.io/#register" target="_blank" rel="noopener">https://k3x1jy7o2o.codesandbox.io/#register</a></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">import React from &quot;react&quot;;</span><br><span class="line">import ReactDOM from &quot;react-dom&quot;;</span><br><span class="line">import &#123; useState &#125; from &quot;react&quot;;</span><br><span class="line">import &quot;./styles.css&quot;;</span><br><span class="line"></span><br><span class="line">function Login() &#123;</span><br><span class="line">  return &lt;div class=&quot;box&quot;&gt;登录&lt;/div&gt;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function Register() &#123;</span><br><span class="line">  return &lt;div class=&quot;box&quot;&gt;注册&lt;/div&gt;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function App() &#123;</span><br><span class="line">  let hash = window.location.hash;</span><br><span class="line">  // hash默认是带 &apos;#&apos;号的 </span><br><span class="line">  let initUi = hash === &apos;#register&apos;?&apos;注册&apos;:&apos;登录&apos;;</span><br><span class="line"></span><br><span class="line">  let [ui, setUi] = useState(&quot;登录&quot;);</span><br><span class="line">  let onClickLogin = () =&gt; &#123;</span><br><span class="line">    setUi(&quot;登录&quot;);</span><br><span class="line">    window.location.hash = &apos;login&apos;</span><br><span class="line">  &#125;;</span><br><span class="line">  let onClickRegister = () =&gt; &#123;</span><br><span class="line">    setUi(&quot;注册&quot;);</span><br><span class="line">    window.location.hash = &apos;register&apos;</span><br><span class="line">  &#125;;</span><br><span class="line">  return (</span><br><span class="line">    &lt;div className=&quot;App&quot;&gt;</span><br><span class="line">      &lt;button onClick=&#123;onClickLogin&#125;&gt;login&lt;/button&gt;</span><br><span class="line">      &lt;button onClick=&#123;onClickRegister&#125;&gt;register&lt;/button&gt;</span><br><span class="line">      &lt;div&gt;&#123;ui === &quot;登录&quot; ? &lt;Login /&gt; : &lt;Register /&gt;&#125;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const rootElement = document.getElementById(&quot;root&quot;);</span><br><span class="line">ReactDOM.render(&lt;App /&gt;, rootElement);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>以上我们完成了</p>
</blockquote>
<ul>
<li>用户根据 hash 值来进入对应页面</li>
<li>虽然url有点丑，先忍着吧！</li>
</ul>
<h3 id="除了-hash-还能用什么"><a href="#除了-hash-还能用什么" class="headerlink" title="除了 hash 还能用什么"></a>除了 hash 还能用什么</h3><ul>
<li>window.location.pathname</li>
</ul>
<blockquote>
<p>location.pathname 的问题</p>
</blockquote>
<ul>
<li>修改路径会造成页面刷新</li>
<li>如果后台不进行url重定向(单页应用url指向index.html) 就会造成 404</li>
</ul>
<h3 id="不刷新修改页面路径的API——pushstate-API"><a href="#不刷新修改页面路径的API——pushstate-API" class="headerlink" title="不刷新修改页面路径的API——pushstate API"></a>不刷新修改页面路径的API——pushstate API</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">window.history.pushState(null,&apos;&apos;,&apos;/login&apos;)</span><br><span class="line">window.history.pushState(null,&apos;&apos;,&apos;/register&apos;)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>虽然这样改不造成页面刷新</p>
</blockquote>
<p>但是</p>
<ul>
<li>如果后台不进行url重写 就会报 404 如 <a href="https://www.baidu.com/login" target="_blank" rel="noopener">https://www.baidu.com/login</a></li>
<li>codesendbox不会404是因为 服务器配置好了。</li>
</ul>
<blockquote>
<h4 id="三种方式"><a href="#三种方式" class="headerlink" title="三种方式"></a>三种方式</h4></blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">window.location.hash = // 让url变化同时不刷新页面</span><br><span class="line">✅ </span><br><span class="line"></span><br><span class="line">window.location.pathname =  // 会刷新页面 ，基本不考虑</span><br><span class="line">x 肯定不用这个</span><br><span class="line"></span><br><span class="line">window.history.pushState(null,&apos;&apos;,path) // 不刷新页面，修改路径 </span><br><span class="line">? 这个是不确定的</span><br><span class="line">    因为有两种情况</span><br><span class="line">        1. 后端会将所有路径指向首页 就可以这样做</span><br><span class="line">        2. 后端傻X 那你就放弃吧</span><br><span class="line">        3. 既然后端傻X，那你就学node自己做后端控制url 抢他饭碗</span><br></pre></td></tr></table></figure>
<blockquote>
<p>什么叫url指向首页</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">你可以在codesendbox里 创建一个react项目 然后在浏览器的路径后随便修改</span><br><span class="line">输入如下路径都进入首页</span><br><span class="line"></span><br><span class="line">https://www.xxx.com/xxx</span><br><span class="line">https://www.xxx.com/bbb</span><br><span class="line">https://www.xxx.com/ccc</span><br><span class="line">https://www.xxx.com/fuck</span><br><span class="line">https://www.xxx.com/shit</span><br></pre></td></tr></table></figure>
<blockquote>
<p>最稳妥的方式是用 hash 100%没问题<br>最不靠谱的是用 pathname 因为会刷新页面<br>有个靠谱后端的情况下 用 pushState 或者你会nodeJs自己 控制url指向 index.html</p>
</blockquote>
<h3 id="用pushState实现路由"><a href="#用pushState实现路由" class="headerlink" title="用pushState实现路由"></a>用pushState实现路由</h3><p>index.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">import React from &quot;react&quot;;</span><br><span class="line">import ReactDOM from &quot;react-dom&quot;;</span><br><span class="line">import &#123; useState &#125; from &quot;react&quot;;</span><br><span class="line">import &quot;./styles.css&quot;;</span><br><span class="line"></span><br><span class="line">function Login() &#123;</span><br><span class="line">  return &lt;div className=&quot;box&quot;&gt;登录&lt;/div&gt;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function Register() &#123;</span><br><span class="line">  return &lt;div className=&quot;box&quot;&gt;注册&lt;/div&gt;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function App() &#123;</span><br><span class="line">  let path = window.location.pathname;</span><br><span class="line">  // hash默认是带 &apos;#&apos;号的</span><br><span class="line">  let initUi = path === &quot;/register&quot; ? &quot;注册&quot; : &quot;登录&quot;;</span><br><span class="line">  console.log(initUi);</span><br><span class="line">  let [ui, setUi] = useState(initUi);</span><br><span class="line">  let onClickLogin = () =&gt; &#123;</span><br><span class="line">    setUi(&quot;登录&quot;);</span><br><span class="line">    history.pushState(null, &quot;&quot;, &quot;login&quot;);</span><br><span class="line">  &#125;;</span><br><span class="line">  let onClickRegister = () =&gt; &#123;</span><br><span class="line">    setUi(&quot;注册&quot;);</span><br><span class="line">    history.pushState(null, &quot;&quot;, &quot;register&quot;);</span><br><span class="line">  &#125;;</span><br><span class="line">  return (</span><br><span class="line">    &lt;div className=&quot;App&quot;&gt;</span><br><span class="line">      &lt;button onClick=&#123;onClickLogin&#125;&gt;login&lt;/button&gt;</span><br><span class="line">      &lt;button onClick=&#123;onClickRegister&#125;&gt;register&lt;/button&gt;</span><br><span class="line">      &lt;div&gt;&#123;ui === &quot;登录&quot; ? &lt;Login /&gt; : &lt;Register /&gt;&#125;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const rootElement = document.getElementById(&quot;root&quot;);</span><br><span class="line">ReactDOM.render(&lt;App /&gt;, rootElement);</span><br></pre></td></tr></table></figure>
<ul>
<li><a href="https://4qqoy05wo9.codesandbox.io/register" target="_blank" rel="noopener">https://4qqoy05wo9.codesandbox.io/register</a></li>
<li><a href="https://4qqoy05wo9.codesandbox.io/login" target="_blank" rel="noopener">https://4qqoy05wo9.codesandbox.io/login</a></li>
<li><a href="https://codesandbox.io/s/kwz7j1w7or" target="_blank" rel="noopener">在线代码</a></li>
</ul>
<blockquote>
<p>分析：现在可以解决路由问题了</p>
</blockquote>
<blockquote>
<h4 id="新的问题：无穷多个路由的时候怎么办"><a href="#新的问题：无穷多个路由的时候怎么办" class="headerlink" title="新的问题：无穷多个路由的时候怎么办"></a>新的问题：无穷多个路由的时候怎么办</h4></blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">- login</span><br><span class="line">- register</span><br><span class="line">- index</span><br><span class="line">- trade</span><br><span class="line">- user   // 用户列表</span><br><span class="line">- user/1 //  用户id为1的</span><br><span class="line">- user/2 //  用户id为2的</span><br><span class="line">- ...</span><br><span class="line">- user/100  //用户id为100的</span><br><span class="line"></span><br><span class="line">此时 </span><br><span class="line"></span><br><span class="line">if else 明显不够用</span><br></pre></td></tr></table></figure>
<blockquote>
<p>使用库ReactRouter</p>
</blockquote>
<h3 id="ReactRouter"><a href="#ReactRouter" class="headerlink" title="ReactRouter"></a>ReactRouter</h3><ul>
<li>强烈建议看英文文档</li>
<li>强烈建议看英文文档</li>
<li><p>强烈建议看英文文档</p>
</li>
<li><p><a href="http://react-guide.github.io/react-router-cn/" target="_blank" rel="noopener">这个文档是中文的但是用的是老版本也就是过时的网页，各种问题</a> </p>
</li>
<li><p>你可以打开github 搜 router 选择 react的router <a href="https://github.com/ReactTraining/react-router" target="_blank" rel="noopener">https://github.com/ReactTraining/react-router</a></p>
</li>
<li><p>或者 google 搜 react router 得到一个网址<a href="https://github.com/ReactTraining/react-router" target="_blank" rel="noopener">https://github.com/ReactTraining/react-router</a></p>
</li>
<li><p><a href="https://reacttraining.com/react-router/" target="_blank" rel="noopener">点击预览链接</a></p>
</li>
<li><p><a href="https://reacttraining.com/react-router/web/guides/quick-start" target="_blank" rel="noopener">选择web</a></p>
</li>
<li><p>开始抄</p>
</li>
</ul>
<p>初始化依赖(如果你用的create-react-app命令)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm install -g create-react-app</span><br><span class="line">create-react-app demo-app</span><br><span class="line">cd demo-app</span><br><span class="line"></span><br><span class="line">npm install react-router-dom</span><br></pre></td></tr></table></figure>
<p>如果你用的 codesendbox.io 那就直接安装依赖 react-router-dom</p>
<p>index.js <a href="https://codesandbox.io/s/m781mqxooy" target="_blank" rel="noopener">在线代码</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">import React from &quot;react&quot;;</span><br><span class="line">import ReactDOM from &quot;react-dom&quot;;</span><br><span class="line">import &#123; BrowserRouter as Router, Route, Link &#125; from &quot;react-router-dom&quot;;</span><br><span class="line"></span><br><span class="line">const Index = () =&gt; &lt;h2&gt;Home&lt;/h2&gt;;</span><br><span class="line">const About = () =&gt; &lt;h2&gt;About&lt;/h2&gt;;</span><br><span class="line">const Users = () =&gt; &lt;h2&gt;Users&lt;/h2&gt;;</span><br><span class="line"></span><br><span class="line">function App() &#123;</span><br><span class="line">  return (</span><br><span class="line">    &lt;div className=&quot;App&quot;&gt;</span><br><span class="line">      &lt;Router&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;nav&gt;</span><br><span class="line">            &lt;ul&gt;</span><br><span class="line">              &lt;li&gt;</span><br><span class="line">                &lt;Link to=&quot;/&quot;&gt;Home&lt;/Link&gt;</span><br><span class="line">              &lt;/li&gt;</span><br><span class="line">              &lt;li&gt;</span><br><span class="line">                &lt;Link to=&quot;/about/&quot;&gt;About&lt;/Link&gt;</span><br><span class="line">              &lt;/li&gt;</span><br><span class="line">              &lt;li&gt;</span><br><span class="line">                &lt;Link to=&quot;/users/&quot;&gt;Users&lt;/Link&gt;</span><br><span class="line">              &lt;/li&gt;</span><br><span class="line">            &lt;/ul&gt;</span><br><span class="line">          &lt;/nav&gt;</span><br><span class="line"></span><br><span class="line">          &lt;Route path=&quot;/&quot; exact component=&#123;Index&#125; /&gt;</span><br><span class="line">          &lt;Route path=&quot;/about/&quot; component=&#123;About&#125; /&gt;</span><br><span class="line">          &lt;Route path=&quot;/users/&quot; component=&#123;Users&#125; /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/Router&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const rootElement = document.getElementById(&quot;root&quot;);</span><br><span class="line">ReactDOM.render(&lt;App /&gt;, rootElement);</span><br></pre></td></tr></table></figure>
<p>唯一的坑在这里</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import &#123; BrowserRouter as Router, Route, Link &#125; from &quot;react-router-dom&quot;;</span><br></pre></td></tr></table></figure>
<p>如果是你？ 你搜索后会选择去中文文档还是英文的？</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">中文——给你个例子——死活运行不了</span><br><span class="line"></span><br><span class="line">英文——照着抄 (少走弯路)</span><br></pre></td></tr></table></figure>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/React入门/">React入门</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/01/22/React入门007之Hooks/" title="React入门007之Hooks" itemprop="url">React入门007之Hooks</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Stevin" target="_blank" itemprop="author">Stevin</a>
		
  <p class="article-time">
    <time datetime="2019-01-22T13:17:32.000Z" itemprop="datePublished"> Published 2019-01-22</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="Hooks"><a href="#Hooks" class="headerlink" title="Hooks"></a>Hooks</h3><ul>
<li><p>英文教程<a href="https://reactjs.org/docs/hooks-intro.html" target="_blank" rel="noopener">there</a> and <a href="https://reactjs.org/docs/hooks-reference.html" target="_blank" rel="noopener">there</a></p>
</li>
<li><p>中午教程<a href="https://github.com/dt-fe/weekly/blob/master/79.%E7%B2%BE%E8%AF%BB%E3%80%8AReact%20Hooks%E3%80%8B.md" target="_blank" rel="noopener">这里</a></p>
</li>
</ul>
<p>React新的API最新支持Hooks版本为16.7,需要单独安装</p>
<blockquote>
<p>那么开始</p>
</blockquote>
<ol>
<li>在 <a href="https://codesandbox.io/" target="_blank" rel="noopener">https://codesandbox.io/</a>上新建一个react项目</li>
<li>在Dependencies上能看到React的版本(hooks的支持要求16.7.0-alpha)</li>
<li><p>修改package.json</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"> &quot;dependencies&quot;: &#123;</span><br><span class="line">    &quot;react&quot;: &quot;16.7.0-alpha&quot;,</span><br><span class="line">    &quot;react-dom&quot;: &quot;16.7.0-alpha&quot;,</span><br><span class="line">    &quot;react-scripts&quot;: &quot;2.0.3&quot;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">//此时保存报错了</span><br><span class="line">// 在命令行查看react的所有版本</span><br><span class="line">npm info react versions</span><br><span class="line">// 查看最新版本</span><br><span class="line">npm info react versions</span><br><span class="line"></span><br><span class="line">//再次修改 package.json</span><br><span class="line"></span><br><span class="line">&quot;dependencies&quot;: &#123;</span><br><span class="line">    &quot;react&quot;: &quot;16.7.0-alpha.2&quot;,</span><br><span class="line">    &quot;react-dom&quot;: &quot;16.7.0-alpha.2&quot;,</span><br><span class="line">    &quot;react-scripts&quot;: &quot;2.0.3&quot;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
</li>
<li><p>开始写我们的react应用 index.js</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import React from &quot;react&quot;;</span><br><span class="line">import ReactDOM from &quot;react-dom&quot;;</span><br><span class="line"></span><br><span class="line">function App() &#123;</span><br><span class="line">    return &lt;div className=&quot;App&quot;&gt;hello&lt;/div&gt;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const rootElement = document.getElementById(&quot;root&quot;);</span><br><span class="line">ReactDOM.render(&lt;App /&gt;, rootElement);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="useState使用"><a href="#useState使用" class="headerlink" title="useState使用"></a>useState使用</h3><blockquote>
<p>有状态的函数组件</p>
</blockquote>
<p>16.7以前只有class组件有状态，16.7开始，函数是可以有状态的</p>
<p>index.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">import React from &quot;react&quot;;</span><br><span class="line">import ReactDOM from &quot;react-dom&quot;;</span><br><span class="line"></span><br><span class="line">// step01 引入 useState</span><br><span class="line">import &#123; useState &#125; from &quot;react&quot;;</span><br><span class="line"></span><br><span class="line">function App() &#123;</span><br><span class="line">  // 这样定义肯定不行</span><br><span class="line">  // let count = 0;</span><br><span class="line">  // let add = function()&#123;&#125;</span><br><span class="line"></span><br><span class="line">  // 正确定义状态</span><br><span class="line">  const [count, setCount] = useState(0); //count 初始值是 0</span><br><span class="line">  const add = () =&gt; &#123;</span><br><span class="line">    setCount(count + 1);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  const minus = () =&gt; &#123;</span><br><span class="line">    setCount(count - 1);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;div&gt;&#123;count&#125;&lt;/div&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;button onClick=&#123;add&#125;&gt;+1&lt;/button&gt;</span><br><span class="line">        &lt;button onClick=&#123;minus&#125;&gt;-1&lt;/button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const rootElement = document.getElementById(&quot;root&quot;);</span><br><span class="line">ReactDOM.render(&lt;App /&gt;, rootElement);</span><br></pre></td></tr></table></figure>
<p><a href="https://codesandbox.io/s/86j8zn7ll" target="_blank" rel="noopener">代码</a></p>
<p>核心代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const [ </span><br><span class="line">        count, // 值</span><br><span class="line">        setCount // 更新函数</span><br><span class="line">    ] = useState(0); </span><br><span class="line"></span><br><span class="line">// useState 函数会返回一个数组</span><br><span class="line">// 数组第一项表示 count的值</span><br><span class="line">// 数组第二项表示 count的更新函数</span><br></pre></td></tr></table></figure>
<blockquote>
<h4 id="自从有了useState之后，就不需要一个class去维护状态"><a href="#自从有了useState之后，就不需要一个class去维护状态" class="headerlink" title="自从有了useState之后，就不需要一个class去维护状态"></a>自从有了useState之后，就不需要一个class去维护状态</h4></blockquote>
<ul>
<li>直接 useState(初始值)</li>
<li>setCount(count+1)  /  setCount(count -1) 就可以改变状态</li>
</ul>
<p>而如果用之前的class组件写法是这样的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">// 用 class写组件</span><br><span class="line">class App2 extends React.Component &#123;</span><br><span class="line">  constructor() &#123;</span><br><span class="line">    super();</span><br><span class="line">    this.state = &#123;</span><br><span class="line">      count: 0</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  add() &#123;</span><br><span class="line">    this.setState(&#123;</span><br><span class="line">      count: this.state.count + 1</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  minus() &#123;</span><br><span class="line">    this.setState(&#123;</span><br><span class="line">      count: this.state.count - 1</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        app2</span><br><span class="line">        &lt;div&gt;&#123;this.state.count&#125;&lt;/div&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;button onClick=&#123;this.add.bind(this)&#125;&gt;+1&lt;/button&gt;</span><br><span class="line">          &lt;button onClick=&#123;this.minus.bind(this)&#125;&gt;-1&lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>结论就是：</p>
</blockquote>
<ul>
<li>用了hooks 之后语法简介了很多</li>
<li>再也不用class的方式写组件了</li>
<li>注意要将react升级到16.7.0</li>
<li>同时这里可以很爽的给数据赋值，不用setState了</li>
</ul>
<h4 id="useState的更多例子"><a href="#useState的更多例子" class="headerlink" title="useState的更多例子"></a>useState的更多例子</h4><p>复杂对象如何修改值？</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">import React from &quot;react&quot;;</span><br><span class="line">import ReactDOM from &quot;react-dom&quot;;</span><br><span class="line"></span><br><span class="line">// step01 引入 useState</span><br><span class="line">import &#123; useState &#125; from &quot;react&quot;;</span><br><span class="line"></span><br><span class="line">function App() &#123;</span><br><span class="line">  const [count, setCount] = useState(0); //count 初始值是 0</span><br><span class="line">  const [user, setUser] = useState(&#123; name: &quot;hjx&quot;, age: 18 &#125;);</span><br><span class="line"></span><br><span class="line">  const add = () =&gt; &#123;</span><br><span class="line">    setCount(count + 1);</span><br><span class="line">  &#125;;</span><br><span class="line">  const minus = () =&gt; &#123;</span><br><span class="line">    setCount(count - 1);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  const addAge = () =&gt; &#123;</span><br><span class="line">    setUser(&#123;</span><br><span class="line">      ...user,</span><br><span class="line">      age: user.age + 1</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">  return (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;div&gt;&#123;count&#125;&lt;/div&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;button onClick=&#123;add&#125;&gt;+1&lt;/button&gt;</span><br><span class="line">        &lt;button onClick=&#123;minus&#125;&gt;-1&lt;/button&gt;</span><br><span class="line">        &lt;hr /&gt;</span><br><span class="line">        userInfo:姓名 &#123;user.name&#125; 年纪&#123;user.age&#125;</span><br><span class="line">        &lt;button onClick=&#123;addAge&#125;&gt;age++&lt;/button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const rootElement = document.getElementById(&quot;root&quot;);</span><br><span class="line">ReactDOM.render(&lt;App /&gt;, rootElement);</span><br></pre></td></tr></table></figure>
<ul>
<li><a href="https://codesandbox.io/s/km4n666z2r" target="_blank" rel="noopener">线上代码</a></li>
</ul>
<blockquote>
<p>user添加爱好 hobbies</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">import React from &quot;react&quot;;</span><br><span class="line">import ReactDOM from &quot;react-dom&quot;;</span><br><span class="line"></span><br><span class="line">// step01 引入 useState</span><br><span class="line">import &#123; useState &#125; from &quot;react&quot;;</span><br><span class="line"></span><br><span class="line">function App() &#123;</span><br><span class="line">  const [count, setCount] = useState(0); //count 初始值是 0</span><br><span class="line">  const [user, setUser] = useState(&#123;</span><br><span class="line">    name: &quot;hjx&quot;,</span><br><span class="line">    age: 18,</span><br><span class="line">    hobbies: [&quot;火影&quot;, &quot;编程&quot;, &quot;王者&quot;]</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  const add = () =&gt; &#123;</span><br><span class="line">    setCount(count + 1);</span><br><span class="line">  &#125;;</span><br><span class="line">  const minus = () =&gt; &#123;</span><br><span class="line">    setCount(count - 1);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  const addAge = () =&gt; &#123;</span><br><span class="line">    setUser(&#123;</span><br><span class="line">      ...user,</span><br><span class="line">      age: user.age + 1</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">  const addHobbie = () =&gt; &#123;</span><br><span class="line">    let num = parseInt(Math.random() * 100);</span><br><span class="line">    setUser(&#123;</span><br><span class="line">      ...user,</span><br><span class="line">      hobbies: [...user.hobbies, num]</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;div&gt;&#123;count&#125;&lt;/div&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;button onClick=&#123;add&#125;&gt;+1&lt;/button&gt;</span><br><span class="line">        &lt;button onClick=&#123;minus&#125;&gt;-1&lt;/button&gt;</span><br><span class="line">        &lt;hr /&gt;</span><br><span class="line">        userInfo:姓名 &#123;user.name&#125; 年纪&#123;user.age&#125;</span><br><span class="line">        &lt;button onClick=&#123;addAge&#125;&gt;age++&lt;/button&gt;</span><br><span class="line">        &lt;hr /&gt;</span><br><span class="line">        爱好：&#123;user.hobbies.join(&quot;,&quot;)&#125;</span><br><span class="line">        &lt;button onClick=&#123;addHobbie&#125;&gt;Hobbie++&lt;/button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const rootElement = document.getElementById(&quot;root&quot;);</span><br><span class="line">ReactDOM.render(&lt;App /&gt;, rootElement);</span><br></pre></td></tr></table></figure>
<ul>
<li><a href="https://codesandbox.io/s/jn8rmnvo35" target="_blank" rel="noopener">在线代码</a></li>
</ul>
<blockquote>
<p>删除 hobbies第二项怎么处理</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">import React from &quot;react&quot;;</span><br><span class="line">import ReactDOM from &quot;react-dom&quot;;</span><br><span class="line"></span><br><span class="line">// step01 引入 useState</span><br><span class="line">import &#123; useState &#125; from &quot;react&quot;;</span><br><span class="line"></span><br><span class="line">function App() &#123;</span><br><span class="line">  const [count, setCount] = useState(0); //count 初始值是 0</span><br><span class="line">  const [user, setUser] = useState(&#123;</span><br><span class="line">    name: &quot;hjx&quot;,</span><br><span class="line">    age: 18,</span><br><span class="line">    hobbies: [&quot;火影&quot;, &quot;编程&quot;, &quot;王者&quot;]</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  const add = () =&gt; &#123;</span><br><span class="line">    setCount(count + 1);</span><br><span class="line">  &#125;;</span><br><span class="line">  const minus = () =&gt; &#123;</span><br><span class="line">    setCount(count - 1);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  const addAge = () =&gt; &#123;</span><br><span class="line">    setUser(&#123;</span><br><span class="line">      ...user,</span><br><span class="line">      age: user.age + 1</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">  const addHobbie = () =&gt; &#123;</span><br><span class="line">    let num = parseInt(Math.random() * 100);</span><br><span class="line">    setUser(&#123;</span><br><span class="line">      ...user,</span><br><span class="line">      hobbies: [...user.hobbies, num]</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  const removeHobbie = () =&gt; &#123;</span><br><span class="line">    user.hobbies.splice(1, 1);</span><br><span class="line">    setUser(&#123;</span><br><span class="line">      ...user,</span><br><span class="line">      hobbies: [...user.hobbies]</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;div&gt;&#123;count&#125;&lt;/div&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;button onClick=&#123;add&#125;&gt;+1&lt;/button&gt;</span><br><span class="line">        &lt;button onClick=&#123;minus&#125;&gt;-1&lt;/button&gt;</span><br><span class="line">        &lt;hr /&gt;</span><br><span class="line">        userInfo:姓名 &#123;user.name&#125; 年纪&#123;user.age&#125;</span><br><span class="line">        &lt;button onClick=&#123;addAge&#125;&gt;age++&lt;/button&gt;</span><br><span class="line">        &lt;hr /&gt;</span><br><span class="line">        爱好：&#123;user.hobbies.join(&quot;,&quot;)&#125;</span><br><span class="line">        &lt;button onClick=&#123;addHobbie&#125;&gt;Hobbie++&lt;/button&gt;</span><br><span class="line">        &lt;button onClick=&#123;removeHobbie&#125;&gt;删除第二个Hobbie&lt;/button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const rootElement = document.getElementById(&quot;root&quot;);</span><br><span class="line">ReactDOM.render(&lt;App /&gt;, rootElement);</span><br></pre></td></tr></table></figure>
<ul>
<li><a href="https://codesandbox.io/s/rjzzpypmko" target="_blank" rel="noopener">在线代码</a></li>
</ul>
<blockquote>
<p>以上就是hooks的基本使用</p>
</blockquote>
<blockquote>
<h4 id="疑问？能不能将-const-count-setCount-useState-0-放在函数组件外"><a href="#疑问？能不能将-const-count-setCount-useState-0-放在函数组件外" class="headerlink" title="疑问？能不能将 const [count, setCount] = useState(0) 放在函数组件外"></a>疑问？能不能将 const [count, setCount] = useState(0) 放在函数组件外</h4></blockquote>
<ul>
<li>这是API没有告诉我们的，会报错</li>
<li>没有为什么，就是不准</li>
</ul>
<blockquote>
<h4 id="疑问2-能不能修改-const-count-setCount-useState-0-名字"><a href="#疑问2-能不能修改-const-count-setCount-useState-0-名字" class="headerlink" title="疑问2 能不能修改  const [count, setCount] = useState(0) 名字"></a>疑问2 能不能修改  const [count, setCount] = useState(0) 名字</h4></blockquote>
<ul>
<li>可以</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const [x, y] = useState(0)</span><br><span class="line">const add = () =&gt; &#123;</span><br><span class="line">    y(x + 1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="useEffect使用"><a href="#useEffect使用" class="headerlink" title="useEffect使用"></a>useEffect使用</h3><ul>
<li><a href="https://reactjs.org/docs/hooks-effect.html" target="_blank" rel="noopener">文档</a></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">//没有作用的函数</span><br><span class="line">function fn()&#123;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 有作用的函数</span><br><span class="line">function fn2()&#123; console.log(1) &#125;</span><br><span class="line"></span><br><span class="line">// 有作用的函数</span><br><span class="line">function fn3(a,b)&#123; return a + b &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// fn2 和 fn3 的区别</span><br><span class="line">// fn2会让人有疑问 哪里来的 console</span><br><span class="line">// fn3 不会让人有  a,b是哪里来的感觉</span><br></pre></td></tr></table></figure>
<blockquote>
<p>如果你在函数里看到了 不知道从哪里来的东西  这个函数就是有副作用的函数</p>
</blockquote>
<ul>
<li>因为它依赖了<a href="比如你把家里收拾的很干净，此时突然从窗户里飘来个塑料袋，你就会觉得这东西不好">不知道从哪里来的东西</a></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// 来看什么是副作用</span><br><span class="line">function fn2()&#123; console.log(1) &#125;</span><br><span class="line"></span><br><span class="line">fn2() //打印 1</span><br><span class="line"></span><br><span class="line">fn2() //打印 1</span><br><span class="line"></span><br><span class="line">console.log = function()&#123; &#125;</span><br><span class="line"></span><br><span class="line">fn2() //什么都不打印</span><br><span class="line"></span><br><span class="line">// 如果你依赖的东西不知道从哪里来的</span><br><span class="line">// 如果这个东西突然有一天被人改了，你也不知道</span><br><span class="line">// 这就是 有副作用的函数的问题</span><br><span class="line"></span><br><span class="line">// 再看 fn3 无论你怎么修改 都是返回 a+b的结果 </span><br><span class="line">// fn3就叫做——纯函数 (不依赖外部不知道哪里来的东西的函数)</span><br></pre></td></tr></table></figure>
<blockquote>
<h4 id="什么情况下用-effect"><a href="#什么情况下用-effect" class="headerlink" title="什么情况下用 effect"></a>什么情况下用 effect</h4></blockquote>
<p>在 index.html 里添加一个节点元素 id=box1</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;box1&quot; style=&quot;border:1px solid red;&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;div id=&quot;root&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>index.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">import React from &quot;react&quot;;</span><br><span class="line">import ReactDOM from &quot;react-dom&quot;;</span><br><span class="line"></span><br><span class="line">// step01 引入 useState</span><br><span class="line">import &#123; useState, useEffect &#125; from &quot;react&quot;;</span><br><span class="line"></span><br><span class="line">function App() &#123;</span><br><span class="line">  const [count, setCount] = useState(0); //count 初始值是 0</span><br><span class="line"></span><br><span class="line">  const add = () =&gt; &#123;</span><br><span class="line">    setCount(count + 1);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  useEffect(() =&gt; &#123;</span><br><span class="line">    // 你不知道 box1是从哪里来的</span><br><span class="line">    document.querySelector(&quot;#box1&quot;).innerText = count;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;div&gt;&#123;count&#125;&lt;/div&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;button onClick=&#123;add&#125;&gt;+1&lt;/button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const rootElement = document.getElementById(&quot;root&quot;);</span><br><span class="line">ReactDOM.render(&lt;App /&gt;, rootElement);</span><br></pre></td></tr></table></figure>
<ul>
<li><a href="https://codesandbox.io/s/njy6zq7n0" target="_blank" rel="noopener">线上代码</a></li>
</ul>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/React入门/">React入门</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/01/17/React入门006之ContextApi03换肤功能/" title="React入门006之ContextApi03换肤功能" itemprop="url">React入门006之ContextApi03换肤功能</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Stevin" target="_blank" itemprop="author">Stevin</a>
		
  <p class="article-time">
    <time datetime="2019-01-17T14:08:43.000Z" itemprop="datePublished"> Published 2019-01-17</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="换肤功能"><a href="#换肤功能" class="headerlink" title="换肤功能"></a>换肤功能</h3><ul>
<li><a href="https://codesandbox.io/s/l7k39r562q" target="_blank" rel="noopener">在线代码</a></li>
</ul>
<p>index.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">import React from &quot;react&quot;;</span><br><span class="line">import ReactDOM from &quot;react-dom&quot;;</span><br><span class="line"></span><br><span class="line">import &quot;./styles.css&quot;;</span><br><span class="line"></span><br><span class="line">const themeContext = React.createContext();</span><br><span class="line"></span><br><span class="line">function Button() &#123;</span><br><span class="line">  return &lt;button&gt;button&lt;/button&gt;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function Input() &#123;</span><br><span class="line">  return &lt;input /&gt;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function Box(props) &#123;</span><br><span class="line">  return &lt;div className=&#123;`box $&#123;props.theme&#125;`&#125;&gt;&#123;props.children&#125;&lt;/div&gt;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class App extends React.Component &#123;</span><br><span class="line">  constructor() &#123;</span><br><span class="line">    super();</span><br><span class="line">    this.state = &#123;</span><br><span class="line">      theme: &quot;light&quot;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  change() &#123;</span><br><span class="line">    let res = this.state.theme === &quot;green&quot; ? &quot;red&quot; : &quot;green&quot;;</span><br><span class="line">    this.setState(&#123;</span><br><span class="line">      theme: res</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;themeContext.Provider value=&#123;this.state.theme&#125;&gt;</span><br><span class="line">        &lt;div className=&quot;App&quot;&gt;</span><br><span class="line">          &lt;button onClick=&#123;this.change.bind(this)&#125;&gt;换肤&lt;/button&gt;</span><br><span class="line">          &lt;themeContext.Consumer&gt;</span><br><span class="line">            &#123;theme =&gt; &#123;</span><br><span class="line">              return (</span><br><span class="line">                &lt;div&gt;</span><br><span class="line">                  &lt;Box theme=&#123;theme&#125;&gt;</span><br><span class="line">                    &lt;Button /&gt;</span><br><span class="line">                  &lt;/Box&gt;</span><br><span class="line">                  &lt;Box theme=&#123;theme&#125;&gt;</span><br><span class="line">                    &lt;Input /&gt;</span><br><span class="line">                  &lt;/Box&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              );</span><br><span class="line">            &#125;&#125;</span><br><span class="line">          &lt;/themeContext.Consumer&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/themeContext.Provider&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const rootElement = document.getElementById(&quot;root&quot;);</span><br><span class="line">ReactDOM.render(&lt;App /&gt;, rootElement);</span><br></pre></td></tr></table></figure>
<p>style.css</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">.App &#123;</span><br><span class="line">  font-family: sans-serif;</span><br><span class="line">  text-align: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.box.green &#123;</span><br><span class="line">  border: 1px solid green;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.box.red &#123;</span><br><span class="line">  border: 1px solid red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/React入门/">React入门</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <a class="extend prev" rel="prev" href="/page/21/"><span></span>Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/20/">20</a><a class="page-number" href="/page/21/">21</a><span class="page-number current">22</span><a class="page-number" href="/page/23/">23</a><a class="page-number" href="/page/24/">24</a><span class="space">&hellip;</span><a class="page-number" href="/page/53/">53</a><a class="extend next" rel="next" href="/page/23/">Next<span></span></a>
  </nav>

</div>
      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">

  


  

  
<div class="tagslist">
	<p class="asidetitle">Tags</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/oak/" title="oak">oak<sup>71</sup></a></li>
			
		
			
				<li><a href="/tags/前端知识点/" title="前端知识点">前端知识点<sup>43</sup></a></li>
			
		
			
				<li><a href="/tags/java/" title="java">java<sup>37</sup></a></li>
			
		
			
				<li><a href="/tags/Node后端/" title="Node后端">Node后端<sup>36</sup></a></li>
			
		
			
				<li><a href="/tags/M06/" title="M06">M06<sup>29</sup></a></li>
			
		
			
				<li><a href="/tags/fullstack/" title="fullstack">fullstack<sup>27</sup></a></li>
			
		
			
				<li><a href="/tags/M07/" title="M07">M07<sup>27</sup></a></li>
			
		
			
				<li><a href="/tags/python/" title="python">python<sup>26</sup></a></li>
			
		
			
				<li><a href="/tags/M08/" title="M08">M08<sup>25</sup></a></li>
			
		
			
				<li><a href="/tags/ReactWheels/" title="ReactWheels">ReactWheels<sup>24</sup></a></li>
			
		
			
				<li><a href="/tags/M04/" title="M04">M04<sup>22</sup></a></li>
			
		
			
				<li><a href="/tags/M03/" title="M03">M03<sup>20</sup></a></li>
			
		
			
				<li><a href="/tags/M02/" title="M02">M02<sup>17</sup></a></li>
			
		
			
				<li><a href="/tags/React入门/" title="React入门">React入门<sup>17</sup></a></li>
			
		
			
				<li><a href="/tags/TS入门/" title="TS入门">TS入门<sup>16</sup></a></li>
			
		
			
				<li><a href="/tags/CSS/" title="CSS">CSS<sup>10</sup></a></li>
			
		
			
				<li><a href="/tags/ES6速学/" title="ES6速学">ES6速学<sup>9</sup></a></li>
			
		
			
				<li><a href="/tags/M01/" title="M01">M01<sup>9</sup></a></li>
			
		
			
				<li><a href="/tags/vue/" title="vue">vue<sup>8</sup></a></li>
			
		
			
				<li><a href="/tags/mongodb/" title="mongodb">mongodb<sup>7</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">Links</p>
    <ul>
        
          <li>
            
            	<a href="https://coderq.com" target="_blank" title="一个面向程序员交流分享的新一代社区">码农圈</a>
            
          </li>
        
          <li>
            
            	<a href="http://wuchong.me" target="_blank" title="Jark&#39;s Blog">Jark&#39;s Blog</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS</a>
</div>

  <div class="weiboshow">
  <p class="asidetitle">Weibo</p>
    <iframe width="100%" height="119" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=119&fansRow=2&ptype=1&speed=0&skin=9&isTitle=1&noborder=1&isWeibo=0&isFans=0&uid=&verifier=b3593ceb&dpc=1"></iframe>
</div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello ,I&#39;m Larry Page in Google. <br/>
			This is my blog,believe it or not.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/2176287895" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2021 
		
		<a href="/about" target="_blank" title="Stevin">Stevin</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>












<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e6d1f421bbc9962127a50488f9ed37d1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="Back to Top"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
 </html>
