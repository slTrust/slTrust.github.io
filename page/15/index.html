
 <!DOCTYPE HTML>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
  
    <title>Almost</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="Stevin">
    

    
    <meta property="og:type" content="website">
<meta property="og:title" content="Almost">
<meta property="og:url" content="http://yoursite.com/page/15/index.html">
<meta property="og:site_name" content="Almost">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Almost">

    
    <link rel="alternative" href="/atom.xml" title="Almost" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
</head>
</html>
  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="Almost" title="Almost"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Almost">Almost</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="Search" />
						<input type="hidden" name="q" value="site:yoursite.com">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/07/02/ZB-008-java运算系统/" title="ZB-008-java运算系统" itemprop="url">ZB-008-java运算系统</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Stevin" target="_blank" itemprop="author">Stevin</a>
		
  <p class="article-time">
    <time datetime="2019-07-02T13:45:57.000Z" itemprop="datePublished"> Published 2019-07-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="基本运算符"><a href="#基本运算符" class="headerlink" title="基本运算符"></a>基本运算符</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">+</span><br><span class="line">- </span><br><span class="line">*</span><br><span class="line">/</span><br><span class="line">% 取余  取余运算是带符号运算</span><br><span class="line"></span><br><span class="line">+=</span><br><span class="line">-=</span><br><span class="line">*=</span><br><span class="line">/=</span><br><span class="line">%=</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">int a = 1 + 1; // int</span><br><span class="line">int b = 5 / 2; // int</span><br><span class="line"></span><br><span class="line">5.0/2; double</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 是否是奇数</span><br><span class="line">public static boolean isOdd(int n)&#123;</span><br><span class="line">    reutrn n % 2 !=0; </span><br><span class="line">    // n % 2 == 1; 取余是带符号运算</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="自增自减"><a href="#自增自减" class="headerlink" title="自增自减"></a>自增自减</h3><ul>
<li><code>++</code></li>
<li><code>--</code></li>
</ul>
<p><code>i++</code> 和 <code>++i</code> 不一样</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">int a = 0;</span><br><span class="line">int b = 0;</span><br><span class="line"></span><br><span class="line">System.out.println(a++); // 0</span><br><span class="line">System.out.println(++b); // 1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">a++ 分两步</span><br><span class="line">1. a = 0 作为表达式的值</span><br><span class="line">2. a = a + 1 </span><br><span class="line"></span><br><span class="line">++b 分两步</span><br><span class="line">1. a = a + 1 作为表达式的值</span><br><span class="line">2. 把结果作为表达式的值</span><br></pre></td></tr></table></figure>
<h3 id="比较运算符"><a href="#比较运算符" class="headerlink" title="比较运算符"></a>比较运算符</h3><ul>
<li><code>&gt;</code></li>
<li><code>&lt;</code></li>
<li><code>&gt;=</code></li>
<li><code>&lt;=</code></li>
<li><code>==</code></li>
<li><code>!=</code></li>
</ul>
<h3 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h3><ul>
<li><code>&amp;&amp;</code> 与</li>
<li><code>||</code> 或</li>
<li><code>!</code> 非</li>
<li>短路特性</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Boolean b = ?</span><br><span class="line"></span><br><span class="line">// 1 true =&gt; ture</span><br><span class="line">// 2 false =&gt; false</span><br><span class="line">// 3 null =&gt; false</span><br><span class="line"></span><br><span class="line">// 使用短路特性，如果不是 b = null的时候报错 空指针</span><br><span class="line">if( b != null &amp;&amp; b)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="三元运算"><a href="#三元运算" class="headerlink" title="三元运算"></a>三元运算</h3><ul>
<li><code>?:</code></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">int a = 3;</span><br><span class="line">int res = a &gt; 3 ? 1: -1;</span><br></pre></td></tr></table></figure>
<h3 id="位运算符"><a href="#位运算符" class="headerlink" title="位运算符"></a>位运算符</h3><ul>
<li><code>~</code>按位取反</li>
<li><code>&amp; &amp;=</code> 按位与</li>
<li><code>| |=</code> 按位或</li>
<li><code>^ ^=</code> 异或</li>
<li><code>&lt;&lt; &lt;&lt;=</code> 带符号左移</li>
<li><code>&gt;&gt; &gt;&gt;=</code> 带符号右移</li>
<li><code>&gt;&gt;&gt; &gt;&gt;&gt;=</code> 无符号右移(总是补0)</li>
</ul>
<blockquote>
<p>取反</p>
</blockquote>
<p>计算机中 <strong>负数使用 补码表示的</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">int a = 3;</span><br><span class="line">存在计算机里是 32位 4字节</span><br><span class="line">00000000 00000000 00000000 00000011</span><br><span class="line"></span><br><span class="line">~a 得到什么？ -4 为啥</span><br><span class="line"></span><br><span class="line">补码 ===&gt; 按位取反</span><br><span class="line">0000 0011 数字3</span><br><span class="line">第一步 按位取反</span><br><span class="line">1111 1100</span><br><span class="line">第二步 补码 = 反码+1</span><br><span class="line">1111 1101 得到数字-3</span><br><span class="line"></span><br><span class="line">如果首位为“符号位” 那么</span><br><span class="line">00000011 是数字 3</span><br><span class="line">10000011 是数字 -3</span><br><span class="line"></span><br><span class="line">如果是无符号就要用到补码了</span><br></pre></td></tr></table></figure>
<h3 id="烧脑的来了"><a href="#烧脑的来了" class="headerlink" title="烧脑的来了"></a>烧脑的来了</h3><p><code>+ - * /</code> 是在电脑中的 <strong>CPU</strong> 负责运算的，是一种硬件电路</p>
<ul>
<li><p>对于基本的运算 <code>+ -</code> 我们能不能统一为一种电路</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">就是一种 加法 的运算 既可以处理 &quot;+&quot; 也可以处理 “-”</span><br></pre></td></tr></table></figure>
</li>
<li><p>这种背景下</p>
</li>
<li>补码出现了</li>
</ul>
<blockquote>
<p>例子 5 - 3 </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">5 - 3 等价于 5 + (-3)</span><br><span class="line"></span><br><span class="line">这样就可以用 “加法” 来完成  5 - 3 的运算</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">5 的二进制表示</span><br><span class="line">0000 0101</span><br><span class="line"></span><br><span class="line">3 的二进制表示</span><br><span class="line">0000 0011</span><br><span class="line"></span><br><span class="line">-3 的二进制表示 </span><br><span class="line">0000 0011 数字 3 取反 </span><br><span class="line">1111 1100 反码  计算机里代表 -4</span><br><span class="line">1111 1101 补码</span><br><span class="line"></span><br><span class="line">5 + (-3)</span><br><span class="line">    0000 0101</span><br><span class="line">    1111 1101</span><br><span class="line">-------------</span><br><span class="line">    0000 0010</span><br></pre></td></tr></table></figure>
<h3 id="amp-amp-按位与-按位或"><a href="#amp-amp-按位与-按位或" class="headerlink" title="&amp; &amp;= 按位与| |= 按位或"></a><code>&amp; &amp;=</code> 按位与<code>| |=</code> 按位或</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">3 按位与 5</span><br><span class="line"></span><br><span class="line">0000 0011 =&gt; 5</span><br><span class="line">0000 0101 =&gt; 3</span><br><span class="line">————————————</span><br><span class="line">0000 0001 =&gt; 1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">6 按位或 8</span><br><span class="line"></span><br><span class="line">0000 0110 =&gt; 6</span><br><span class="line">0000 1000 =&gt; 8</span><br><span class="line">————————————</span><br><span class="line">0000 1110 =&gt; E</span><br></pre></td></tr></table></figure>
<h3 id="异或"><a href="#异或" class="headerlink" title="异或"></a>异或</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">5 异或 7</span><br><span class="line">0000 0101 =&gt; 5</span><br><span class="line">0000 0111 =&gt; 7</span><br><span class="line">_____________</span><br><span class="line">0000 0010 =&gt; 2</span><br><span class="line"></span><br><span class="line">不进位加法</span><br></pre></td></tr></table></figure>
<blockquote>
<h4 id="NB的异或公式"><a href="#NB的异或公式" class="headerlink" title="NB的异或公式"></a>NB的异或公式</h4></blockquote>
<ul>
<li>用处就是有些算法题可以用来加速计算  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">在一个很长的数组里找一个数字 独立存在的数字 答案是 3</span><br><span class="line">[11,22,33,44,12,12,4,3,4] 把所有数字全部异或一次</span><br></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x ^ y ^ y = x</span><br><span class="line"></span><br><span class="line">x ^ x = 0</span><br></pre></td></tr></table></figure>
<h3 id="左移-lt-lt"><a href="#左移-lt-lt" class="headerlink" title="左移&lt;&lt;"></a>左移<code>&lt;&lt;</code></h3><ul>
<li>左移的好处就是比乘法操作快</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">数字 5</span><br><span class="line">0000 0101</span><br><span class="line">&lt;&lt;</span><br><span class="line">0000 1010 得到 10 </span><br><span class="line"></span><br><span class="line">每左移一位 实际就是 *2</span><br><span class="line"></span><br><span class="line">5左移1位 ==&gt; 5*2 = 10</span><br><span class="line">5左移2位 ==&gt; 5*4 = 20</span><br></pre></td></tr></table></figure>
<h3 id="右移-gt-gt"><a href="#右移-gt-gt" class="headerlink" title="右移 &gt;&gt;"></a>右移 <code>&gt;&gt;</code></h3><ul>
<li>带符号   首位补 原先的符号位</li>
<li>不带符号 首位补0</li>
</ul>
<h3 id="位运算的场景"><a href="#位运算的场景" class="headerlink" title="位运算的场景"></a>位运算的场景</h3><ul>
<li><code>Modifier类</code></li>
</ul>
<blockquote>
<p>假设你有猫的 <strong>32个boolean值属性</strong> 萌不萌 胖不胖</p>
</blockquote>
<ul>
<li>第一种方式 存放32个 boolean 成员属性，这样导致每个布尔值(1字节)占据 32字节</li>
<li>另一种选择：<strong>一个int是 32位01组成,每位代表之前的boolean属性</strong> 这样 从32个字节 变成了 4字节</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">class Cat&#123;</span><br><span class="line">    public static final int 萌不萌 = 0x00000001;</span><br><span class="line">    public static final int 胖不胖 = 0x00000002;</span><br><span class="line">    public static final int 爱吃鱼 = 0x00000004;</span><br><span class="line">    public static final int 爱老鼠 = 0x00000008;</span><br><span class="line">    // 等等... </span><br><span class="line"></span><br><span class="line">    public static int final state = </span><br><span class="line">    Cat.萌不萌 | Cat.胖不胖 | Cat.爱吃鱼 | Cat.爱老鼠;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">0x00000001 =&gt; 16进制最后一位换成4位2进制数 0001 萌不萌</span><br><span class="line">0x00000002 =&gt; 16进制最后一位换成4位2进制数 0010 胖不胖</span><br><span class="line">0x00000004 =&gt; 16进制最后一位换成4位2进制数 0100 爱吃鱼</span><br><span class="line">0x00000008 =&gt; 16进制最后一位换成4位2进制数 1000 爱老鼠</span><br><span class="line"></span><br><span class="line">正好 每个位置的 “ 1 ”  都是错开的</span><br><span class="line"></span><br><span class="line">此时设置属性的时候只要 “或” </span><br><span class="line">public static int final state = </span><br><span class="line">    Cat.萌不萌 | Cat.胖不胖 | Cat.爱吃鱼 | Cat.爱老鼠;</span><br><span class="line">// 按位或之后得到 0000 1111</span><br><span class="line"></span><br><span class="line">那么我们如何知道 Cat 萌不萌 呢？</span><br><span class="line">只需要它让一个定义好的数字 &amp; 运算就行了</span><br><span class="line"></span><br><span class="line">// 萌不萌？</span><br><span class="line">1111 // 全部的 state </span><br><span class="line">0001 // 萌不萌的实际取值</span><br><span class="line">// 按位与的结果为</span><br><span class="line">res = 0001 </span><br><span class="line"></span><br><span class="line">结果只要比较 res 是不是 0 即可</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>设置值时候使用 按位或 ｜</strong></li>
<li><strong>取值值时候使用 按位与 &amp;</strong></li>
</ul>
<blockquote>
<p>参考练习题</p>
</blockquote>
<ul>
<li><a href="https://github.com/hcsp/bit-operation-setter-getter" target="_blank" rel="noopener">https://github.com/hcsp/bit-operation-setter-getter</a></li>
</ul>
<h3 id="字符串加法操作"><a href="#字符串加法操作" class="headerlink" title="字符串加法操作"></a>字符串加法操作</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">int a = 1;</span><br><span class="line">int b = 2;</span><br><span class="line">System.out.println(&quot;a=&quot; + a + &quot;,b=&quot; + b);</span><br><span class="line"></span><br><span class="line">// 你可以给 StringBuilder 打断点，因为字符串是不可变字符序列，所以 频繁拼接很浪费空间，于是会使用 StringBuilder 对一块内存进行操作</span><br></pre></td></tr></table></figure>
<ul>
<li>当你进行字符串加法的时候：它会调用这个对象的 toString, (a.toString(),b.toString())</li>
<li>然后在你进行很长的字符串加法时候，JDK内部会自动的帮你转化成 StringBuilder 调用，减轻内存压力，提高性能。</li>
</ul>
<h3 id="判断-char-类型-合法字符问题"><a href="#判断-char-类型-合法字符问题" class="headerlink" title="判断 char 类型 合法字符问题"></a>判断 char 类型 合法字符问题</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// 一个合法的十六进制的字符是：字符0-9，以及字符A/a/B/b/C/c/D/d/E/e/F/f （大小写都是合法的）</span><br><span class="line">// 编写一个方法，给定一个字符，若是合法的十六进制字符，返回true，否则返回false</span><br><span class="line">public static boolean isValidHexCharacter(char ch) &#123;</span><br><span class="line">  return (ch &gt;= &apos;0&apos; &amp;&amp; ch &lt;= &apos;9&apos;)</span><br><span class="line">          || (ch &gt;= &apos;a&apos; &amp;&amp; ch &lt;= &apos;f&apos;)</span><br><span class="line">          || (ch &gt;= &apos;A&apos; &amp;&amp; ch &lt;= &apos;F&apos;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/oak/">oak</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/07/01/ZB-007-java数据类型/" title="ZB-007-java数据类型" itemprop="url">ZB-007-java数据类型</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Stevin" target="_blank" itemprop="author">Stevin</a>
		
  <p class="article-time">
    <time datetime="2019-07-01T14:30:28.000Z" itemprop="datePublished"> Published 2019-07-01</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><ul>
<li><p>int 4字节 (4bytes 32bit)</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">int a = 10;</span><br><span class="line">int b = 011; //8进制</span><br><span class="line">int c = 0x11; // 16进制</span><br></pre></td></tr></table></figure>
</li>
<li><p>char 2字节</p>
</li>
<li>short 2字节</li>
</ul>
<h3 id="原生数据类型和引用数据类型"><a href="#原生数据类型和引用数据类型" class="headerlink" title="原生数据类型和引用数据类型"></a>原生数据类型和引用数据类型</h3><table>
<thead>
<tr>
<th>原生</th>
<th>引用</th>
</tr>
</thead>
<tbody>
<tr>
<td>int a= 1</td>
<td>String s = “a”</td>
</tr>
<tr>
<td>4字节存放 1这个值</td>
<td>假设 地址值：1234 存放 字符串”a”</td>
</tr>
</tbody>
</table>
<ul>
<li>只要能找到对应的类，就是引用数据类型</li>
<li>否则是原生数据类型</li>
</ul>
<blockquote>
<h4 id="基本数据类型"><a href="#基本数据类型" class="headerlink" title="基本数据类型"></a>基本数据类型</h4></blockquote>
<ul>
<li>byte  1字节</li>
<li>short 2字节</li>
<li>int 4字节（最大21亿）<br>  <strong>针对淘宝这种亿级用户最好不要用int使用 long</strong></li>
<li>long 8字节</li>
<li>float 4字节</li>
<li>double 8字节</li>
<li>char 2字节</li>
<li>boolean true/false</li>
<li>void? 不返回任何类型</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">int a = 1;</span><br><span class="line">byte b = (byte)128; // 会丢失精度</span><br><span class="line">long c = 22_0000_0000L; // 不推荐用 &quot;l&quot; 与 “1” 容易歧义</span><br><span class="line">float d = 0.1f;</span><br><span class="line">double e = 2e-3; //科学计数法</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// </span><br><span class="line">int f = 0x123;  // 十六进制</span><br><span class="line">int g = 0b1010101; // 二进制， java7之后出现的</span><br></pre></td></tr></table></figure>
<blockquote>
<p>如果你想知道原生数据类型的最大最小值是什么？</p>
</blockquote>
<ul>
<li>每一个原生数据类型对应一个装箱数据类型</li>
<li>对应的装箱数据类型里有两个常量 MIN_VALUE/MAX_VALUE</li>
</ul>
<blockquote>
<p>问题来了？如果强行存储超过范围的值会怎么样？</p>
</blockquote>
<ul>
<li>会溢出</li>
</ul>
<blockquote>
<p>浮点数是小数，在计算机中是<strong>近似表示</strong></p>
</blockquote>
<ul>
<li>浮点数只能比较大小，不要比较“<strong>相等</strong>”</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// </span><br><span class="line">float i = 0.1f;</span><br><span class="line">if(i==0.1f)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">double d = 0.2;</span><br><span class="line">if(Math.abs(d - 0.2) &lt; 0.000001)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h3><ol>
<li>整数除法是地板除</li>
<li><p>将所有类型提升到最⾼精度进⾏计算</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">int i = 1 + 1; // ok</span><br><span class="line">int b = 1 + 1.0;// not ,因为 1.0是双精度所以 类型都被提升了， 所以 结果是 double 值 需要强制类型转化 </span><br><span class="line">int c = (int)(1 + 1.0); // ok</span><br></pre></td></tr></table></figure>
</li>
<li><p>丢失精度时需要进⾏强制转换</p>
</li>
<li>char参与计算时使⽤ASCII码（Unicode码） <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">char c1 = &apos;a&apos;;</span><br><span class="line">char c2 = &apos;A&apos;;</span><br><span class="line">char c3 = &apos;你&apos;;</span><br><span class="line"></span><br><span class="line">char c4 = &apos;1&apos;; // 对应ASC码 为 49</span><br><span class="line">// c4 = c4 + 1; // 报错因为 + 1 是和 int值进行计</span><br><span class="line">算 必须进行强制转换</span><br><span class="line">c4 = (char)(c4 + 1); // c4的值是49 ,49+1 =50 ，50对应的字符是 &apos;2&apos;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ul>
<li><p>自动转换</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">byte b = 100;</span><br><span class="line">int i = b; // 可以直接转换</span><br></pre></td></tr></table></figure>
</li>
<li><p>强制转换</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">int i = 200;</span><br><span class="line">byte b = (byte) i; // 因为已经溢出了，所以要强制转换</span><br></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<h3 id="整数除法计算是-地板除-向下取整"><a href="#整数除法计算是-地板除-向下取整" class="headerlink" title="整数除法计算是 地板除(向下取整)"></a>整数除法计算是 地板除(向下取整)</h3></blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">int a = 3;</span><br><span class="line">int b = 2;</span><br><span class="line">int c = a / b; // 1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 因为设置了返回值是 double 所以 result 会自动提升为 double</span><br><span class="line">public static double divide(int a ,int b)&#123;</span><br><span class="line">    int result = a / b;</span><br><span class="line">    return result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">divide(3,2) //  1.0</span><br></pre></td></tr></table></figure>
<blockquote>
<p>精度问题,<strong>所有表达式中，参与计算的表达式都会提升到最高的精度进行计算，最后的结果也是最高精度</strong></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">int i = 1 + 1; // 没问题</span><br><span class="line"></span><br><span class="line">// int i2 = 1 + 1.0; // 有问题 与浮点数计算会变成double</span><br><span class="line">// 只能这样 强制转换</span><br><span class="line">int i2 = (int)(1 + 1.0);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>解决整型地板除损失精度问题</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public static double divide(int a ,int b)&#123;</span><br><span class="line">    double result = 1.0 * a / b;</span><br><span class="line">    return result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 或者</span><br><span class="line"></span><br><span class="line">public static double divide(int a ,int b)&#123;</span><br><span class="line">    double result = (double)a / b;</span><br><span class="line">    return result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<h4 id="void-类型"><a href="#void-类型" class="headerlink" title="void 类型"></a>void 类型</h4></blockquote>
<ul>
<li>所有的类型可以  类型.class 得到它的 class值</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Class c = String.class;</span><br><span class="line">Class intCLass = int.class;</span><br><span class="line">Class voidCLass = void.class;</span><br></pre></td></tr></table></figure>
<h3 id="装箱类型-引用类型"><a href="#装箱类型-引用类型" class="headerlink" title="装箱类型(引用类型)"></a>装箱类型(引用类型)</h3><ul>
<li>Byte(byte)</li>
<li>Short(short)</li>
<li>Integer(int)</li>
<li>Long(long)</li>
<li>Float(float)</li>
<li>Double(double)</li>
<li>Character(char)</li>
<li>Boolean(boolean)</li>
<li>Void?(void)</li>
</ul>
<p>任何原生数据类型都有对应的装箱类型</p>
<blockquote>
<p>自动装箱/自动拆箱</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public static int add(int i)&#123; return new Integer(i);&#125;</span><br><span class="line"></span><br><span class="line">int i = 100;</span><br><span class="line">Integer integer = i; // 自动装箱</span><br><span class="line">add(integer); // 自动拆箱</span><br></pre></td></tr></table></figure>
<blockquote>
<p>为什么要有引用类型</p>
<ul>
<li>容器类不接受原⽣数据类型  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// List里只接受引用类型，不接受原生类型</span><br><span class="line">List&lt;Integer&gt; a = new ArrayList&lt;&gt;();</span><br><span class="line">a.add(1); // 丢进去的是 int 自动装箱 为 Integer</span><br></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
<ul>
<li><p>可以赋值为null</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// boolean 只能有两种状态 true/false</span><br><span class="line"></span><br><span class="line">// 而装箱类型还有第三种状态 true/false/null</span><br><span class="line">Boolean state = null;</span><br></pre></td></tr></table></figure>
</li>
<li><p>提供额外的⽅法</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">String s = &quot;123&quot;;</span><br><span class="line">// 内存中对应 是一个 char[] 数组  </span><br><span class="line"></span><br><span class="line">// 而数字 内存中 4字节 01组成的序列</span><br><span class="line">int i = 123;</span><br></pre></td></tr></table></figure>
</li>
<li><p>⾃动装箱与拆箱</p>
</li>
</ul>
<h3 id="原⽣类型与引⽤类型带来的坑"><a href="#原⽣类型与引⽤类型带来的坑" class="headerlink" title="原⽣类型与引⽤类型带来的坑"></a>原⽣类型与引⽤类型带来的坑</h3><ul>
<li><p>对null拆箱将引发空指针异常</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Integer a = null;</span><br><span class="line">int i = a;// 空指针异常</span><br></pre></td></tr></table></figure>
</li>
<li><p>==与equals约定</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">int a = 5;</span><br><span class="line">int b = 5;</span><br><span class="line">a == b // true</span><br><span class="line"></span><br><span class="line">Integer c = 1000; // 假设内存地址 512</span><br><span class="line">Integer d = 1000; // 假设内存地址 600</span><br><span class="line">c == d // false 因为 “==“ 比较的是值，而引用类型的值是 ”地址“  512 != 600</span><br><span class="line"></span><br><span class="line">c.equals(d) // true</span><br></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>“==” </p>
</blockquote>
<p>比较二者是否相同</p>
<blockquote>
<p>“equals()”</p>
</blockquote>
<p>比较二者是否是不是相等</p>
<ul>
<li><h4 id="让你惊讶的地方！！！"><a href="#让你惊讶的地方！！！" class="headerlink" title="让你惊讶的地方！！！"></a>让你惊讶的地方！！！</h4></li>
<li><h4 id="让你惊讶的地方！！！-1"><a href="#让你惊讶的地方！！！-1" class="headerlink" title="让你惊讶的地方！！！"></a>让你惊讶的地方！！！</h4></li>
<li><h4 id="让你惊讶的地方！！！-2"><a href="#让你惊讶的地方！！！-2" class="headerlink" title="让你惊讶的地方！！！"></a>让你惊讶的地方！！！</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Integer e = 1;</span><br><span class="line">Integer f = 1;</span><br><span class="line"></span><br><span class="line">e == f // true 竟然相等了？ </span><br><span class="line">e.equals(f) // true</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">int类型是占据 4字节的空间，</span><br><span class="line">而 Object / Integer 这类引用数据类型 远比int占据的空间要多</span><br><span class="line"></span><br><span class="line">如果你频繁 </span><br><span class="line">Ingeter i = 1;  // 占据空间远远大于4字节</span><br><span class="line">Ingeter b = 2;  // 占据空间远远大于4字节</span><br><span class="line"></span><br><span class="line">所以java偷偷做了一件事</span><br><span class="line">对于非常小的数字则认为是常用的数字。</span><br><span class="line">则对其进行缓存 具体参考 IntegerCache的文档</span><br><span class="line">会对 -128～+127的 数字进行缓存，而不是重新创建对象</span><br></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>顺便提一句：Integer对象是不可变的</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Integer c = 1; // 内存地址 509</span><br><span class="line">c = c + 1; // +1 操作 此时 c的地址变成了 512</span><br><span class="line">// Integer 本身是不可变的</span><br></pre></td></tr></table></figure>
<h3 id="数组类型"><a href="#数组类型" class="headerlink" title="数组类型"></a>数组类型</h3><blockquote>
<p>面试题：请你给我解释一下数组是什么，为啥我没看见过数组类型的声明，却可以直接用呢？</p>
</blockquote>
<ul>
<li>数组类型是一种特殊的类型，JDK负责创建它</li>
</ul>
<blockquote>
<p>由JDK负责创建的特殊类型</p>
</blockquote>
<ul>
<li><code>X[] x = new X[10]</code> 长度为10的数组</li>
<li><code>X[] x = new X[]{5,4,3,2,1}</code> 长度为5的数组</li>
<li><code>X[] x = {5,4,3,2,1}</code></li>
<li>其中 X 也可以是数组类型   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">int[][] c = new int[][]&#123;&#123;1,2,3&#125;,&#123;4,5,6&#125;&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>数组的主要特性</p>
</blockquote>
<ul>
<li>长度不可变</li>
<li>类型安全 <code>String[] c = {&quot;a&quot;,&quot;b&quot;}; // 声明了是 String 就不能丢其他类型的东西</code></li>
<li>只有一个 length 属性</li>
<li>可以用下标去取对应元素 <code>a[1]</code></li>
<li>可以使用 for 循环</li>
</ul>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/oak/">oak</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/07/01/ZB-006-工具使用/" title="ZB-006-工具使用" itemprop="url">ZB-006-工具使用</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Stevin" target="_blank" itemprop="author">Stevin</a>
		
  <p class="article-time">
    <time datetime="2019-07-01T13:50:31.000Z" itemprop="datePublished"> Published 2019-07-01</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="maven"><a href="#maven" class="headerlink" title="maven"></a>maven</h3><ul>
<li>提供一个生命周期流程</li>
<li>每个插件可以把一小部分工作绑定到生命周期上</li>
<li>maven本身对这些事不做任何干涉，只定义生命周期</li>
<li>maven 每个阶段执行时都会把前面的每个阶段执行一遍</li>
<li><a href="https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html" target="_blank" rel="noopener">maven default lifecycle</a></li>
</ul>
<blockquote>
<p>参考资料</p>
</blockquote>
<ul>
<li><a href="https://github.com/slTrust/javaweb/tree/master/web012maven%E4%BD%BF%E7%94%A8" target="_blank" rel="noopener">https://github.com/slTrust/javaweb/tree/master/web012maven%E4%BD%BF%E7%94%A8</a></li>
</ul>
<blockquote>
<p>maven依赖的问题——传递性依赖</p>
</blockquote>
<ul>
<li>你的项目依赖多个库 A、B、C</li>
<li>而这个库A又依赖别的库 如C</li>
<li>此时 多个地方依赖 C C的版本如果不一致就会有问题</li>
</ul>
<blockquote>
<p>maven显示依赖树</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn dependency:tree</span><br></pre></td></tr></table></figure>
<h3 id="IDEA生产力翻倍的快捷键"><a href="#IDEA生产力翻倍的快捷键" class="headerlink" title="IDEA生产力翻倍的快捷键"></a>IDEA生产力翻倍的快捷键</h3><ul>
<li>万能键 ALT + ENTER 任何情况都可以使用</li>
<li>左侧项目结构面板右上角有个按钮 Scroll from Source 从源代码跳转</li>
<li>Search  everywhere: 双击 shift</li>
<li>查看定义：Declaration (command + B) (等价于按住command + 鼠标右键)</li>
<li>查看⽂件：Navigate - File</li>
<li><strong>⾼级查找</strong>：Find in Path (顶栏Edit-Find-Find in Path) 几乎满足你查找的所有需求(command + shift + f)</li>
<li>快速⽣成：Generate(ctrl +  N)</li>
<li>格式化：Reformat Code(alt + command + L)</li>
<li>优化导⼊语句：Optimize imports(alt + command + O)<ul>
<li>比如你代码里开始用了 ArrayList,后来不用了，但是会被导入，这个时候用这个</li>
</ul>
</li>
<li>导航：Navigate - Back/Forward(alt + command + ⬅️ ➡️)</li>
<li>所有的实现类：Implementation(command + 1)</li>
<li>谁调⽤了这个⽅法：Call Hierarchy(command + 2)</li>
<li>⽂件⼤纲：File Structure (command + 3)<ul>
<li>列出这个类的所有方法，成员</li>
</ul>
</li>
<li>下⼀处错误：Next Highlighted Error （command + 4）</li>
<li><strong>⾼级重命名</strong>：Rename (command + 5)</li>
<li>调试器快捷键：F5/F6/F7/F8</li>
</ul>
<h3 id="Git相关操作"><a href="#Git相关操作" class="headerlink" title="Git相关操作"></a>Git相关操作</h3><ul>
<li>查找背锅侠：Annotate/Blame</li>
<li>查看当前⽂件的历史版本</li>
<li>⾼级筛选⽅式查找commit记录</li>
<li>显示差异：show diff</li>
<li>Open in GitHub (选中你的代码 右键列表里)</li>
</ul>
<blockquote>
<h4 id="底部工具栏-Version-Control"><a href="#底部工具栏-Version-Control" class="headerlink" title="底部工具栏 Version Control"></a>底部工具栏 Version Control</h4></blockquote>
<ul>
<li>Local Changes 等同于 git status 本地的变更还没有提交</li>
<li>Log 这个仓库里所有的日志</li>
</ul>
<h4 id="编程快捷键"><a href="#编程快捷键" class="headerlink" title="编程快捷键"></a>编程快捷键</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">psvm ==&gt; public static void main()&#123;&#125;</span><br><span class="line"></span><br><span class="line">sout ==&gt; System.out.println()</span><br><span class="line"></span><br><span class="line">soutv ==&gt; System.out.println(&quot;xxx=&quot; + xxx)</span><br><span class="line"></span><br><span class="line">fori ==&gt; for(int i = 0 ; i &lt; ;i++)</span><br><span class="line"></span><br><span class="line">fore ==&gt; ...</span><br></pre></td></tr></table></figure>
<blockquote>
<p>寻找配对括号的小插件</p>
</blockquote>
<ul>
<li>Rainbow Brackets</li>
</ul>
<h3 id="调试器：没有解决不了的问题"><a href="#调试器：没有解决不了的问题" class="headerlink" title="调试器：没有解决不了的问题"></a>调试器：没有解决不了的问题</h3><blockquote>
<p>为什么需要调试器</p>
<ul>
<li>理解程序执⾏的过程</li>
<li>理解JVM的内部构造</li>
<li>⾮常⽅便的检查在任意时间点JVM的内部状态</li>
</ul>
</blockquote>
<blockquote>
<h4 id="调试器"><a href="#调试器" class="headerlink" title="调试器"></a>调试器</h4></blockquote>
<ul>
<li>单步跳过  ,Step over 执行一行,无论当前行的语句有多么的复杂。</li>
<li>单步进⼊  , Step into 执行一个语句。进入这个方法的执行(最详细的方法执行)。</li>
<li>单步跳出</li>
<li>全速运⾏ Resume Program （F8）恢复程序，当前的程序全速跑到下一个断点</li>
<li>断点（⾯板）</li>
<li>条件断点 (所在行设置断点，点击右键弹出一个框 Condition 输入 i==5000 当i=5000的时候)</li>
<li>跳转到源代码</li>
<li>Watch</li>
</ul>
<p><img src="https://raw.githubusercontent.com/slTrust/java_static_repo/main/java006/001.png" alt></p>
<h3 id="JVM"><a href="#JVM" class="headerlink" title="JVM"></a>JVM</h3><ul>
<li>堆 所有对象都在堆上分配</li>
<li>栈 (假设现在只有一个线程。每个线程有一个方法栈。方法的入口就是main方法。每次调用一个方法就会压栈，方法结束就会出栈)</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public class A &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        a();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void a() &#123;</span><br><span class="line">        System.out.println(&quot;a&quot;);</span><br><span class="line">        b();</span><br><span class="line">    &#125;</span><br><span class="line">    public static void b() &#123;</span><br><span class="line">        System.out.println(&quot;b&quot;);</span><br><span class="line">        c();</span><br><span class="line">    &#125;</span><br><span class="line">    public static void c() &#123;</span><br><span class="line">        int x = 1;</span><br><span class="line">        System.out.println(&quot;c&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>函数一次一次调用形成的方法块叫什么</p>
</blockquote>
<ul>
<li>栈帧</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">c执行结束 它里面的局部变量x会被销毁</span><br></pre></td></tr></table></figure>
<blockquote>
<h4 id="执行表达式"><a href="#执行表达式" class="headerlink" title="执行表达式"></a>执行表达式</h4></blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">打断点后，选中所在行右键选择Evaluate Expression</span><br><span class="line"></span><br><span class="line">输入框里可写任意代码</span><br></pre></td></tr></table></figure>
<blockquote>
<p>鬼畜的用法，打破流程,不推荐用</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">return result; // 右键， View/Edit Text 修改为你要返回的内容</span><br></pre></td></tr></table></figure>
<h3 id="调试器的原理"><a href="#调试器的原理" class="headerlink" title="调试器的原理"></a>调试器的原理</h3><ul>
<li>调试⾮项⽬源代码</li>
<li>调试命令⾏程序</li>
</ul>
<h4 id="调试-mvn-compile-过程的代码"><a href="#调试-mvn-compile-过程的代码" class="headerlink" title="调试 mvn compile 过程的代码"></a>调试 mvn compile 过程的代码</h4><ul>
<li>你想调试什么东西，首先要拿到这个东西的源代码</li>
<li>比如调试 mvn compile，本质也是一个JVM</li>
<li><a href="https://github.com/apache/maven-compiler-plugin" target="_blank" rel="noopener">google 搜索maven compiler plugin github</a> 把代码clone到本地</li>
<li>mvn 除了这个命令，还有一个调试版的命令 mvnDebug</li>
<li>你可以这样运行 <code>/Users/hjx/maven/apache-maven-3.6.3/bin/mvnDebug compile</code>  这就是 debug模式运行 mvn</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"># 1。 找到你本地 mvn的 debug模式命令</span><br><span class="line">&gt; /Users/hjx/maven/apache-maven-3.6.2/bin/</span><br><span class="line">mvnDebug compile</span><br><span class="line"></span><br><span class="line"># 2。 debug 模式运行 mvn,监听在 8000端口</span><br><span class="line">Preparing to execute Maven in debug mode</span><br><span class="line">Listening for transport dt_socket at address: 8000</span><br><span class="line"></span><br><span class="line"># 3。 此时在 IDEA里 编辑器右边顶部 的 add Configuration 里 “加号 + ”选择 Remote ，Port填入 8000，然后 ok</span><br><span class="line">    # 为什么是 Remote 这个过程不仅可以发生在你本地，还可以发生在你的生产服务器</span><br><span class="line"># 然后在 mvn compile 源代码的 CompilerMojo 里 skipMain 这行 176</span><br><span class="line"></span><br><span class="line"># 4。 然后 debug模式运行，你发现代码没有停在这里，不要开始怀疑人生， 要看你本地的 mvn版本 和代码的版本是否是一个版本</span><br><span class="line"></span><br><span class="line"># 5。 源代码终端输入 git tag 找到跟你本地一致的版本号 如 3.6.2</span><br><span class="line"></span><br><span class="line"># 6。 切换本地代码版本 </span><br><span class="line">git checkout maven-compiler-plugin-3.6.2</span><br><span class="line"></span><br><span class="line"># 7。 在此 debug运行代码</span><br><span class="line"></span><br><span class="line">此时你就可以调试 mvn compile 了</span><br></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/oak/">oak</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/06/30/ZB-005-JAVA基本结构/" title="ZB-005-JAVA基本结构" itemprop="url">ZB-005-JAVA基本结构</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Stevin" target="_blank" itemprop="author">Stevin</a>
		
  <p class="article-time">
    <time datetime="2019-06-30T12:22:40.000Z" itemprop="datePublished"> Published 2019-06-30</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="JAVA介绍"><a href="#JAVA介绍" class="headerlink" title="JAVA介绍"></a>JAVA介绍</h3><ol>
<li>强类型</li>
<li>静态编译</li>
<li>跨平台</li>
</ol>
<blockquote>
<p>代码比较死板，但是非常适合团队协作项目。</p>
</blockquote>
<ul>
<li><a href="https://www.zhihu.com/question/56468869/answer/261050848" target="_blank" rel="noopener">如何看待知乎、饿了么后端的招聘纷纷由 Python 渐渐转向 Java？ - 曲奇的回答 - 知乎</a></li>
<li>当你的代码足够庞大时</li>
<li>比如 TS的兴起就是 类型约束和静态编译</li>
</ul>
<blockquote>
<p>什么是操作系统</p>
</blockquote>
<p>比如现在有 windows / mac / linux 三个系统，你要让他们做什么比如 打开文件，发请求就要<strong>使用操作系统的语言(API)和操作系统对话</strong></p>
<p>这样就给软件开发者开了一个很大的难题。你开发了一个软件跑在三个系统上。就要用三个系统的API去分别编写。此时工作量变成了三倍！</p>
<blockquote>
<p>举个例子,比如你要写一本书，三个系统好比三个国家。</p>
</blockquote>
<ul>
<li>你使用了某个语言如 英语 English </li>
<li>此时需要去三个国家找到对应懂英语的人。</li>
<li>这样你只要在每个国家找到懂英语的人。你本来是要为每个国家开发一本书。现在你只需要开发一本书，然后让不同平台懂英语的人翻译成对应国家的语言。</li>
</ul>
<p>这个会翻译的人 在JAVA中就叫 JVM 虚拟机</p>
<p><strong>JVM负责与操作系统的接口打交道，此时你只要写一种语言如java,剩下的交给JVM将 java翻译成中间层的语言 byte code(字节码)</strong></p>
<blockquote>
<p>字节码</p>
</blockquote>
<p>二进制，在计算机里只有0和1</p>
<h4 id="java广告词"><a href="#java广告词" class="headerlink" title="java广告词"></a>java广告词</h4><ul>
<li>一次编写，处处运行。</li>
<li>比如现在的服务器通常是linux，而开发者的电脑可能是 windows 。你在Windows代码可以稳定的跑在linux上。这就是java的可贵之处</li>
<li><a href="https://www.zhihu.com/question/30753144" target="_blank" rel="noopener">知乎：java是如何实现跨平台的？</a></li>
<li><a href="http://www.weixueyuan.net/view/6309.html" target="_blank" rel="noopener">Java虚拟机(JVM)以及跨平台原理</a></li>
</ul>
<h3 id="java语言的基本单元-类-和-包"><a href="#java语言的基本单元-类-和-包" class="headerlink" title="java语言的基本单元 类 和 包"></a>java语言的基本单元 类 和 包</h3><p>class</p>
<ul>
<li>java最小的结构是 类</li>
<li>类必须放在与它同名的 <code>.java</code>文件中</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 程序最小的结构是 class</span><br><span class="line">// 直接放在 src/main/java下的包叫做 “默认包”</span><br><span class="line">public class Cat&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="package"><a href="#package" class="headerlink" title="package"></a>package</h4><ul>
<li>每个类都处在一个包中</li>
<li>包的名字由目录结构所确定</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 目录结构为: src/main/java/my/cute</span><br><span class="line">package my.cute;</span><br><span class="line">public class Cat&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="推荐包名规则"><a href="#推荐包名规则" class="headerlink" title="推荐包名规则"></a>推荐包名规则</h5><ul>
<li>java程序约定(我不强制你这么做，但我约定你这么做)</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 不建议这样</span><br><span class="line">package my.cute;</span><br><span class="line"></span><br><span class="line"># java推荐约定  包名以你互联网公司域名的反序来命名，这样可以避免命名冲突</span><br><span class="line">package com.alibaba</span><br><span class="line">package com.google</span><br></pre></td></tr></table></figure>
<h4 id="maven的项目约定"><a href="#maven的项目约定" class="headerlink" title="maven的项目约定"></a>maven的项目约定</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 生产代码</span><br><span class="line">src/main/java/my/cute/Cat.java</span><br><span class="line"></span><br><span class="line">// 测试代码</span><br><span class="line">src/test/java/my/cute/CatTest.java</span><br></pre></td></tr></table></figure>
<h4 id="包的意义"><a href="#包的意义" class="headerlink" title="包的意义"></a>包的意义</h4><p>如果存在如下两个同名的类</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">src/main/java/my/pet/Cat.java</span><br><span class="line">src/main/java/my/pet2/Cat.java</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 如何在 src/main/java/my/Home.java里引用者两个 Cat呢？</span><br><span class="line"></span><br><span class="line">// Home.java</span><br><span class="line">package my;</span><br><span class="line"></span><br><span class="line">import my.pet.Cat;</span><br><span class="line">// import my.pet2.Cat; </span><br><span class="line"></span><br><span class="line">public class Home&#123;</span><br><span class="line">    Cat cat;</span><br><span class="line">    //全限定类名</span><br><span class="line">    my.pet2.Cat cat2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>在JVM中所有的类 都会变成“全限定类名” Full Qualified Name (FQCN)  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public class Home&#123;</span><br><span class="line">    // 最终都会变成</span><br><span class="line">    my.pet.Cat cat;</span><br><span class="line">    my.pet2.Cat cat2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>这就是为什么我们需要“包” 最大的作用就是<strong>避免命名冲突，区分同名但不同的类</strong></p>
<blockquote>
<p>main函数</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class Cat&#123;</span><br><span class="line">    // 程序的入口函数</span><br><span class="line">    public static void main(String[] args)&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>疑问为什么<code>String[] args</code> 里的 String不用写包名 ，如果你用的是 IDEA按住 alt点击进去，发现 String的包名是 <code>package java.lang</code></li>
<li>如果你的类放在 java.lang 下 可以不经引入直接使用</li>
</ul>
<h3 id="方法调用"><a href="#方法调用" class="headerlink" title="方法调用"></a>方法调用</h3><ul>
<li>在每个函数调用的时候，它会创建一个全新的函数的执行环境</li>
<li>函数多次调用的过程之间，它们是相互独立的。</li>
<li>函数可以被一次声明，然后多次调用，每次调用的执行环境都是独立的。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public class Cat&#123;</span><br><span class="line">    public static void main(String[] args)&#123;</span><br><span class="line">        f(1);</span><br><span class="line">        f(2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void f(int i)&#123;</span><br><span class="line">        return i + 1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="局部变量"><a href="#局部变量" class="headerlink" title="局部变量"></a>局部变量</h4><ul>
<li>包围它的第一对花括号<code>{}</code></li>
</ul>
<h4 id="静态成员变量"><a href="#静态成员变量" class="headerlink" title="静态成员变量"></a>静态成员变量</h4><p>存在遥远的jvm的一个地方，独立于任何的对象。和任何对象都没关系</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class Cat&#123;</span><br><span class="line">    public static int i; // 默认会初始化为0</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args)&#123;</span><br><span class="line">        add();</span><br><span class="line">        add();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void add()&#123;</span><br><span class="line">        i = i + 1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="对象-构造器和成员变量"><a href="#对象-构造器和成员变量" class="headerlink" title="对象/构造器和成员变量"></a>对象/构造器和成员变量</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">public class Home&#123;</span><br><span class="line">    public static void main(String[] args)&#123;</span><br><span class="line">        Cat cat = new Cat();</span><br><span class="line">        cat.name = &quot;阿三&quot;;</span><br><span class="line">        cat.miao();</span><br><span class="line"></span><br><span class="line">        Cat cat2 = new Cat(&quot;阿大&quot;);</span><br><span class="line">        cat2.miao();</span><br><span class="line"></span><br><span class="line">        Cat cat3 = new Cat();</span><br><span class="line">        cat3.miao(); // 空指针 因为name是null</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Cat&#123;</span><br><span class="line">    // 成员变量</span><br><span class="line">    private String name;</span><br><span class="line">    // 假如你没声明任何的构造器 ,编译器会帮你偷偷生产一个构造器</span><br><span class="line">    //  Cat()&#123;&#125; // 你不写就自带一个</span><br><span class="line"></span><br><span class="line">    public Cat()&#123;&#125;</span><br><span class="line">    // 如果你写了其他构造器，将不再提供默认的无参构造器，而你想调用无参的构造器则要自己写。</span><br><span class="line">    public Cat(String name)&#123;</span><br><span class="line">        // this = 刚刚创建的Cat类的实例</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    /*</span><br><span class="line">    public static void miao()&#123;</span><br><span class="line">        // 报错，静态方法不能调用非静态成员</span><br><span class="line">        System.out.println(&quot;喵,我是&quot;+ name)</span><br><span class="line">    &#125;</span><br><span class="line">    */</span><br><span class="line"></span><br><span class="line">    public void miao()&#123;</span><br><span class="line">        System.out.println(&quot;喵,我是&quot;+ name)</span><br><span class="line">        // 在不引起歧义的情况下，你可以 省略 this</span><br><span class="line">        System.out.println(&quot;喵,我是&quot;+ this.name + &quot;我的名字长度是&quot; + name.length());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="实例方法和空指针异常"><a href="#实例方法和空指针异常" class="headerlink" title="实例方法和空指针异常"></a>实例方法和空指针异常</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">public class Home&#123;</span><br><span class="line">    public static void main(String[] args)&#123;</span><br><span class="line">        Cat cat = new Cat();</span><br><span class="line">        cat.name = &quot;阿三&quot;;</span><br><span class="line">        cat.miao();</span><br><span class="line"></span><br><span class="line">        Cat cat2 = new Cat(&quot;阿大&quot;);</span><br><span class="line">        cat2.miao();</span><br><span class="line"></span><br><span class="line">        Cat cat3 = new Cat();</span><br><span class="line">        cat3.miao(); // 空指针 因为name是null</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Cat&#123;</span><br><span class="line">    String name;</span><br><span class="line">    public Cat()&#123;&#125;</span><br><span class="line">    public Cat(String name)&#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void miao()&#123;</span><br><span class="line">        // 非空判断 ，规避空指针</span><br><span class="line">        if(name == null)&#123;</span><br><span class="line">            System.out.println(&quot;我还没名字&quot;);</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            System.out.println(&quot;喵,我是&quot;+ this.name + &quot;我的名字长度是&quot; + name.length());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="对象和引用、值传递"><a href="#对象和引用、值传递" class="headerlink" title="对象和引用、值传递"></a>对象和引用、值传递</h3><ul>
<li>最重要概念之一</li>
<li>画内存图</li>
<li><p>引用</p>
<ul>
<li>addr</li>
<li>门牌号 201/301/333</li>
</ul>
</li>
<li><p><a href="https://sltrust.github.io/2017/11/19/N021_JS%E9%87%8C%E7%9A%84%E7%B1%BB%E5%9E%8B/" target="_blank" rel="noopener">参考之前的JS总结</a></p>
</li>
</ul>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/oak/">oak</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/06/30/ZB-004-FQ/" title="ZB-004-FQ" itemprop="url">ZB-004-FQ</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Stevin" target="_blank" itemprop="author">Stevin</a>
		
  <p class="article-time">
    <time datetime="2019-06-30T08:54:56.000Z" itemprop="datePublished"> Published 2019-06-30</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="如何FQ"><a href="#如何FQ" class="headerlink" title="如何FQ"></a>如何FQ</h3><ul>
<li>搜索 <code>s*h*a*d*o*w*s*o*c*k*s</code>，眼里有 “星星”，自行去“星星”</li>
<li>下载客户端，大概 100每年</li>
</ul>
<h3 id="chrome自动识别是否FQ"><a href="#chrome自动识别是否FQ" class="headerlink" title="chrome自动识别是否FQ"></a>chrome自动识别是否FQ</h3><ul>
<li>google 商店搜索 SwitchyOmega</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">导入配置之后记得，选择自动切换。如果FQ发现失败。</span><br><span class="line"></span><br><span class="line">代理的默认端口是1080，所以理论上不用改。</span><br><span class="line">但是针对你失败有可能是 你小飞机的 socks5端口跟 chrome插件的不一样 </span><br><span class="line">就把agent那个里面的端口改成你小飞机里 socks5端口</span><br></pre></td></tr></table></figure>
<h3 id="命令行FQ"><a href="#命令行FQ" class="headerlink" title="命令行FQ"></a>命令行FQ</h3><blockquote>
<p>mac</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 1 安装 homebrew</span><br><span class="line">/usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;</span><br><span class="line"></span><br><span class="line"># 2 安装 proxychains-ng</span><br><span class="line">brew install proxychains-ng</span><br><span class="line"></span><br><span class="line"># 3 配置</span><br></pre></td></tr></table></figure>
<blockquote>
<p>配置</p>
</blockquote>
<p>1 新建 <code>~/.proxychains.conf</code> 文件</p>
<p>内容如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">strict_chain</span><br><span class="line">quiet_mode</span><br><span class="line">proxy_dns </span><br><span class="line"></span><br><span class="line">remote_dns_subnet 224</span><br><span class="line">tcp_read_time_out 15000</span><br><span class="line">tcp_connect_time_out 8000</span><br><span class="line">[ProxyList]</span><br><span class="line"># 你的代理 如 ss 我的端口是 1086</span><br><span class="line">socks5 	127.0.0.1 1080</span><br></pre></td></tr></table></figure>
<p>2 第二步 <code>touch ~/.bashrc</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &apos;alias pc=&quot;proxychains4 -f ~/.proxychains.conf&quot;&apos; &gt;&gt; ~/.bashrc source ~/.bashrc&apos;</span><br></pre></td></tr></table></figure>
<p>3 第三步 <code>source ~/.bashrc</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 测试</span><br><span class="line">pc curl -L https://twitter.com/</span><br><span class="line"></span><br><span class="line"># 如果失败 看看你的 mac版本是否是 10.12之后</span><br><span class="line"># 如果是</span><br><span class="line"># 关闭SIP</span><br><span class="line">https://www.jianshu.com/p/fe78d2036192</span><br></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/oak/">oak</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/06/30/ZB-003-git和github/" title="ZB-003-git和github" itemprop="url">ZB-003-git和github</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Stevin" target="_blank" itemprop="author">Stevin</a>
		
  <p class="article-time">
    <time datetime="2019-06-30T08:36:19.000Z" itemprop="datePublished"> Published 2019-06-30</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="git-软件的版本控制工具"><a href="#git-软件的版本控制工具" class="headerlink" title="git 软件的版本控制工具"></a>git 软件的版本控制工具</h3><ul>
<li><a href="https://sltrust.github.io/2017/10/05/N004_1_git%E5%85%A5%E9%97%A8/" target="_blank" rel="noopener">参考链接-git入门1</a></li>
<li><a href="https://sltrust.github.io/2017/10/05/N004_4_git%E5%88%86%E6%94%AF%E6%93%8D%E4%BD%9C/" target="_blank" rel="noopener">参考链接-git入门2</a></li>
</ul>
<h3 id="fork操作-如何给别人修改代码"><a href="#fork操作-如何给别人修改代码" class="headerlink" title="fork操作-如何给别人修改代码"></a>fork操作-如何给别人修改代码</h3><ul>
<li>别人的仓库如<code>https://github.com/slTrust/aaa</code>你是没有修改权限的，所以你要fork</li>
<li>fork 就是分叉的意思，就是把别人的项目fork一份到你的github自己的工作空间内 <code>https://github.com/your_git/aaa</code> 此时两个空间(slTrust和 your_git)的代码完全相同</li>
<li>然后修改在你的工作空间下改善你要修改的地方<ul>
<li>commit 然后 push代码</li>
</ul>
</li>
<li>此时你就可以在 <code>https://github.com/slTrust/aaa</code> 的工作空间里提交一个请求 <code>pull request</code></li>
<li>别人就会去 review 你的代码，如何发现合适就把你的代码合并到他的代码上去。</li>
</ul>
<p>这就是完整的项目合作流程</p>
<h3 id="github-一个代码托管平台"><a href="#github-一个代码托管平台" class="headerlink" title="github 一个代码托管平台"></a>github 一个代码托管平台</h3><h4 id="GitHub团队协作入门"><a href="#GitHub团队协作入门" class="headerlink" title="GitHub团队协作入门"></a>GitHub团队协作入门</h4><p><img src="https://raw.githubusercontent.com/slTrust/java_static_repo/main/java003/001.png" alt><br><img src="https://raw.githubusercontent.com/slTrust/java_static_repo/main/java003/002.png" alt><br><img src="https://raw.githubusercontent.com/slTrust/java_static_repo/main/java003/003.png" alt><br><img src="https://raw.githubusercontent.com/slTrust/java_static_repo/main/java003/004.png" alt><br><img src="https://raw.githubusercontent.com/slTrust/java_static_repo/main/java003/005.png" alt><br><img src="https://raw.githubusercontent.com/slTrust/java_static_repo/main/java003/006.png" alt><br><img src="https://raw.githubusercontent.com/slTrust/java_static_repo/main/java003/007.png" alt></p>
<blockquote>
<p>别人通过fork 给你的项目提交了pr</p>
</blockquote>
<ul>
<li>你打开这个 pr</li>
<li>你在review时候，在代码变更行可以 点击 “加号” ，发表评论<ul>
<li>写完评论，下面有很多按钮，如果你不清楚不要乱按<ul>
<li>start a review ，写完评论，提交代码的人看不到任何评论，因为它有一个 pending 状态，意思是还在进行中，没有发出去<ul>
<li>你可以发起多个 start a review</li>
<li>通过点击 Finish your review ，然后选择 comment ，点击 submit review 才能将之前的所有 评论 一次性发出去</li>
<li>start a review 只是提交了一个 评论的草稿</li>
<li>为啥不能点了就发出去，因为一个复杂的项目可能有多个文件有评论，如果你review 一个小时，写一个意见就发出去，对方会不停的被你骚扰，这样的好处是，你把所有评论攒一起，对方可以一次性看完，避免骚扰</li>
</ul>
</li>
<li>Add single comment 立刻把你的评论发给对方</li>
</ul>
</li>
<li>吊打别人的鬼畜操作：你除了 review提出建议还能告诉别人如何修改代码<ul>
<li>点击 加号 的时候 下面的输入框上方 又一个 “加减号按钮” 悬停的时候显示 <code>&quot;insert a suggestion &lt;cmd-g&gt;&quot;</code> </li>
<li>这样你提交你的建议修改，别人就会看到一个状态 “suggested change”</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="markdown"><a href="#markdown" class="headerlink" title="markdown"></a>markdown</h3><blockquote>
<p>标题</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 一级标题</span><br><span class="line">。。。</span><br><span class="line">###### 六级标题</span><br></pre></td></tr></table></figure>
<blockquote>
<p>引用</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; 引用</span><br></pre></td></tr></table></figure>
<blockquote>
<p>列表</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">无序列表</span><br><span class="line">- a</span><br><span class="line">- b</span><br><span class="line">- c</span><br><span class="line"></span><br><span class="line">有序列表</span><br><span class="line"></span><br><span class="line">1. a</span><br><span class="line">2. b</span><br><span class="line">3. c</span><br><span class="line"></span><br><span class="line">带复选框的列表</span><br><span class="line"></span><br><span class="line">- []a</span><br><span class="line">- []b</span><br><span class="line">- [x] 选中的</span><br></pre></td></tr></table></figure>
<blockquote>
<p>加粗</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">**加粗的文字**</span><br></pre></td></tr></table></figure>
<blockquote>
<p>倾斜体</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">__倾斜的文字__</span><br></pre></td></tr></table></figure>
<blockquote>
<p>代码块</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">前后三个反引号包裹的内容</span><br></pre></td></tr></table></figure>
<blockquote>
<p>行内代码 <code>java</code></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">`Java`</span><br></pre></td></tr></table></figure>
<blockquote>
<p>链接</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[百度](www.baidu.com)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>~删除线~</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~删除~</span><br></pre></td></tr></table></figure>
<blockquote>
<p>图片</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![图片描述](图片地址)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>表格</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">姓名|年龄|班级</span><br><span class="line">---|---|---</span><br><span class="line">a | 22|1</span><br></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/oak/">oak</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/06/30/ZB-002-开撸准备工作/" title="ZB-002-开撸准备工作" itemprop="url">ZB-002-开撸准备工作</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Stevin" target="_blank" itemprop="author">Stevin</a>
		
  <p class="article-time">
    <time datetime="2019-06-30T07:46:48.000Z" itemprop="datePublished"> Published 2019-06-30</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h3><ul>
<li>什么是JDK java development kit</li>
<li>Git 版本控制软件</li>
<li>IDEA  java集成开发环境</li>
</ul>
<h3 id="安装java"><a href="#安装java" class="headerlink" title="安装java"></a>安装java</h3><p><a href="https://www.oracle.com/technetwork/java/javase/downloads/index.html" target="_blank" rel="noopener">搜索 oracle jdk</a></p>
<p>不要下载最新版java12 建议下载 java8,因为如果你是个初学者，下载最新版会遇到当前阶段你解决不了的问题。白白浪费时间。</p>
<blockquote>
<p>因为下载java8需要登录，你可以搜索 oracle jdk 账号 登录下载即可</p>
</blockquote>
<h4 id="mac-配置多个版本jdk"><a href="#mac-配置多个版本jdk" class="headerlink" title="mac 配置多个版本jdk"></a>mac 配置多个版本jdk</h4><p>编辑 <code>~/.bash_profile</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_8_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_202.jdk/Contents/Home</span><br><span class="line">export JAVA_9_HOME=/Library/Java/JavaVirtualMachines/jdk-9.0.1.jdk/Contents/Home</span><br><span class="line">export JAVA_10_HOME=/Library/Java/JavaVirtualMachines/jdk-11.jdk/Contents/Home</span><br><span class="line">export JAVA_13_HOME=/Library/Java/JavaVirtualMachines/jdk-13.jdk/Contents/Home</span><br><span class="line"></span><br><span class="line">alias jdk8=&quot;export JAVA_HOME=$JAVA_8_HOME&quot;</span><br><span class="line">alias jdk9=&quot;export JAVA_HOME=$JAVA_9_HOME&quot;</span><br><span class="line">alias jdk11=&quot;export JAVA_HOME=$JAVA_11_HOME&quot;</span><br><span class="line">alias jdk13=&quot;export JAVA_HOME=$JAVA_13_HOME&quot;</span><br></pre></td></tr></table></figure>
<p>然后 <code>source ~/.bash_profile</code></p>
<h3 id="术语解释"><a href="#术语解释" class="headerlink" title="术语解释"></a>术语解释</h3><ul>
<li>JRE(java runtime environment) 运行 <ul>
<li>java运行环境</li>
</ul>
</li>
<li>JDK(java development kit) 开发 + 运行<ul>
<li>java开发工具包</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 粗略理解就是</span><br><span class="line">JDK = JRE + javac</span><br></pre></td></tr></table></figure>
<ul>
<li>JAVA_HOME 就是 java的安装目录</li>
</ul>
<h3 id="java收费问题"><a href="#java收费问题" class="headerlink" title="java收费问题"></a>java收费问题</h3><ul>
<li>对于开发测试来说 jdk 都是免费的</li>
<li>在生产环境里使用 jdk 是收费的，这个不该你来担心，应该由法务部操心</li>
</ul>
<h3 id="java版本详解"><a href="#java版本详解" class="headerlink" title="java版本详解"></a>java版本详解</h3><ul>
<li>java对向后兼容有着谜一样的执着和坚守</li>
</ul>
<p>java虽然现在到了12但是java的诉求就是向后兼容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">就是java1.1的代码在 java12上跑基本没什么问题。</span><br><span class="line"></span><br><span class="line">而python2/ python3 就有很大的差异了。</span><br></pre></td></tr></table></figure>
<blockquote>
<p>举个例子：你盖了到20层的时候，发现中间某层有个螺丝钉有问题</p>
</blockquote>
<ul>
<li>你此时已经 “积重难返”了，不可能重头盖了</li>
<li>参考2020年 315爆料的 <a href="https://news.sina.com.cn/zx/2020-07-16/doc-iivhuipn3418896.shtml" target="_blank" rel="noopener">万科尚城精装房漏成水帘洞 精装修成了“惊”装修</a></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">95年 java 1.1--&gt; 1.2 --&gt;1.6</span><br><span class="line"></span><br><span class="line">2014年 java 1.8 引入了很多的特性。跨时代的成就。 </span><br><span class="line">乃至2019年 全国乃至全世界都是业界最广泛使用的东西</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1.8之后 JEP223提议。把版本号变成了9从此之后 只有 9 / 10 / 11 /12</span><br><span class="line"></span><br><span class="line">java9 引入了 JPMS java模块系统 还引入了 一个破坏性的改变 对向后兼容造成了一定的破坏</span><br><span class="line"></span><br><span class="line">所以 1.8 和 9 是 java的一道鸿沟</span><br><span class="line"></span><br><span class="line">9/10/11/12 是一脉相承的</span><br><span class="line"></span><br><span class="line">LTS是什么 长期支持版。 意思是提供长久的功能改进和更新 目前只有 java1.8 和 11</span><br><span class="line"></span><br><span class="line">如果是生产环境推荐使用 8</span><br><span class="line"></span><br><span class="line">9 和 10 任何情况下都不推荐在生产环境里使用</span><br></pre></td></tr></table></figure>
<h3 id="vendor的JDK"><a href="#vendor的JDK" class="headerlink" title="vendor的JDK"></a>vendor的JDK</h3><blockquote>
<p>vender（供应商）</p>
</blockquote>
<p>来个例子</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">农夫山泉</span><br><span class="line">怡宝</span><br><span class="line">康师傅</span><br><span class="line"></span><br><span class="line">三大矿泉水供应商</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/slTrust/java_static_repo/main/java002/01.png" alt></p>
<h4 id="java的供应商"><a href="#java的供应商" class="headerlink" title="java的供应商"></a>java的供应商</h4><ul>
<li>oracle jdk 官方的</li>
<li>open jdk 一份源代码(和oracle jdk 只有细微差别)</li>
<li>adopt jdk 社区维护的jdk</li>
<li>其他公司开发的jdk</li>
</ul>
<p>如上各种不同的jdk 被叫做 vendor</p>
<p>不同供应商提供的不同jdk实现</p>
<h3 id="插播一个为什么想学java的原因"><a href="#插播一个为什么想学java的原因" class="headerlink" title="插播一个为什么想学java的原因"></a>插播一个为什么想学java的原因</h3><ul>
<li><a href="http://www.ruanyifeng.com/blog/2019/06/weekly-issue-62.html?utm_source=tuicool&amp;utm_medium=referral" target="_blank" rel="noopener">科技爱好者周刊:第 62 期 - 阮一峰的网络日志 - 编舟记</a></li>
</ul>
<p>如果一件事情需要15年才能看到结果，此前完全没有回报，你还会去做吗？</p>
<p>互联网公司都采用敏捷开发，每个迭代大约是2周～6周。比三个迭代更遥远的事情，大家一般都不会去想。但是，人生是一个长期准备的过程，20岁的时候就需要定下35岁的目标，然后苦苦积累，不计得失，只为了无比遥远的多年以后，能够看到成果。<strong>互联网是一个短期行为的行业，但是人生不是。</strong></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/oak/">oak</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/06/30/ZB-001-java概述/" title="ZB-001-java概述" itemprop="url">ZB-001-java概述</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Stevin" target="_blank" itemprop="author">Stevin</a>
		
  <p class="article-time">
    <time datetime="2019-06-30T06:58:39.000Z" itemprop="datePublished"> Published 2019-06-30</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="java过时了吗？"><a href="#java过时了吗？" class="headerlink" title="java过时了吗？"></a>java过时了吗？</h3><blockquote>
<p>java8新特性已经是五年前的事了(2014年发布)</p>
</blockquote>
<ul>
<li><a href="https://zh.wikipedia.org/wiki/Java%E7%89%88%E6%9C%AC%E6%AD%B7%E5%8F%B2" target="_blank" rel="noopener">java发布历史</a></li>
</ul>
<blockquote>
<p>编程语言排行一直位列前三。</p>
</blockquote>
<blockquote>
<p>为什么C一直那么高，因为C是无可替代的，系统底层/操作系统/硬件/驱动只有C能写</p>
</blockquote>
<ul>
<li>没有！</li>
<li>当之无愧的世界第一编程语言</li>
<li>海量的需求</li>
<li>未来会过时吗？</li>
</ul>
<h3 id="Java的行业前景和钱景"><a href="#Java的行业前景和钱景" class="headerlink" title="Java的行业前景和钱景"></a>Java的行业前景和钱景</h3><ul>
<li>伪初级：找不到工作/勉强糊口的工作</li>
<li>初级：对标阿里的P5(10-15K,别人带着能干活)</li>
<li>中极：对标阿里的P6(15-25K,自己能干活)</li>
<li>高级：阿里P7(25K~ ∞ ,自己能干活，也能帮团队干活)</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">6/3/1的比例分配年中</span><br><span class="line"></span><br><span class="line">3.5/3.75/3.25</span><br><span class="line">满足预期/超出预期/不足预期</span><br><span class="line">B/A/C</span><br><span class="line">3x/6x/0x 年终</span><br></pre></td></tr></table></figure>
<blockquote>
<p>java的好处就是蛋糕足够大！你跑的不用特别快就能吃蛋糕</p>
</blockquote>
<p>但是java的求职者是海量的，xx年河南的高考人数是98万人，考之前，班主任指着窗外的操场说，你多考一分，就能超过一操场的人。反应到java的需求和要求，竞争者就是以操场为单位的。</p>
<ul>
<li>答案是：<strong>不用跑的过熊，只要跑得过你就行了</strong>。软件这个行业的好处就是这样，一分耕耘，一分收获。不用跑的特快只要跑的比一大批不用功的人快就行了。努力就行了。</li>
<li><a href="https://zhuanlan.zhihu.com/p/185711316" target="_blank" rel="noopener">高考大数据：全国31省高考难度，哪个才是地狱模式？</a></li>
</ul>
<blockquote>
<p>即想赚大钱又不努力能不能吃蛋糕——答案是 洗洗睡吧！</p>
</blockquote>
<h3 id="如何跳出弱鸡循环"><a href="#如何跳出弱鸡循环" class="headerlink" title="如何跳出弱鸡循环"></a><a href="https://www.v2ex.com/t/509080" target="_blank" rel="noopener">如何跳出弱鸡循环</a></h3><h3 id="java和node的区别"><a href="#java和node的区别" class="headerlink" title="java和node的区别"></a>java和node的区别</h3><ul>
<li>java适合多人协作，适合一个长期维护的项目</li>
<li>node能快速怼出原型快速修改，但是比较难维护。</li>
</ul>
<h3 id="ts的写项目很香证明了什么？"><a href="#ts的写项目很香证明了什么？" class="headerlink" title="ts的写项目很香证明了什么？"></a>ts的写项目很香证明了什么？</h3><p>证明了大项目多人协作需要静态编译</p>
<ul>
<li>大项目</li>
<li>工程化</li>
<li>团队协作</li>
</ul>
<p><strong>这些Java天生具备</strong></p>
<h3 id="如何评价go"><a href="#如何评价go" class="headerlink" title="如何评价go"></a>如何评价go</h3><ul>
<li>主要是为了替代C的，而且大部分功能和java重合，而且语言还在发展中</li>
<li>你的go和大公司的go是两种概念</li>
</ul>
<h4 id="在公司使用不同语言如何？"><a href="#在公司使用不同语言如何？" class="headerlink" title="在公司使用不同语言如何？"></a>在公司使用不同语言如何？</h4><ul>
<li>首先，公司要考虑语言切换的开销，出了bug能否 hold住</li>
<li>其次是，团队协调合作的问题</li>
</ul>
<h3 id="面对大部分公司清退35以上的程序员"><a href="#面对大部分公司清退35以上的程序员" class="headerlink" title="面对大部分公司清退35以上的程序员"></a>面对大部分公司清退35以上的程序员</h3><ul>
<li>首先法制不够健全，导致这种现象</li>
<li>其次35以后没法像年轻人一样一把梭就是干</li>
<li>所以你应该成为不可替代的人</li>
</ul>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/oak/">oak</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/06/27/ReactWheels06-02测试覆盖率和持续集成下/" title="ReactWheels06-02测试覆盖率和持续集成下" itemprop="url">ReactWheels06-02测试覆盖率和持续集成下</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Stevin" target="_blank" itemprop="author">Stevin</a>
		
  <p class="article-time">
    <time datetime="2019-06-27T13:00:40.000Z" itemprop="datePublished"> Published 2019-06-27</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="每次自己发代码是不是太麻烦"><a href="#每次自己发代码是不是太麻烦" class="headerlink" title="每次自己发代码是不是太麻烦"></a>每次自己发代码是不是太麻烦</h3><blockquote>
<p>能不能 push 代码 ci运行test 成功之后自动发布代码</p>
</blockquote>
<p>可以</p>
<p>修改</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">#https://github.com/revolunet/create-react-app-circleci/blob/master/.circleci/config.yml</span><br><span class="line">defaults: &amp;defaults</span><br><span class="line">  docker:</span><br><span class="line">    # 我们使用 node8来测试</span><br><span class="line">    - image: circleci/node:8</span><br><span class="line"># circleci的 version</span><br><span class="line">version: 2</span><br><span class="line">jobs:</span><br><span class="line">  # 准备阶段</span><br><span class="line">  prepare:</span><br><span class="line">    &lt;&lt;: *defaults</span><br><span class="line">    steps:</span><br><span class="line">      # 迁出代码</span><br><span class="line">      - checkout</span><br><span class="line">      # 根据当前的package.json 创建一个 md5 把它当作key 创建一个缓存，加速之后代码的运行，只要package.json里面没有变化</span><br><span class="line">      # 就可以使用上次的缓存，不用从头安装</span><br><span class="line">      - restore_cache:</span><br><span class="line">          keys:</span><br><span class="line">            - v2-dependencies-&#123;&#123; checksum &quot;package.json&quot; &#125;&#125;</span><br><span class="line">      - run: yarn install</span><br><span class="line">      - save_cache:</span><br><span class="line">          paths:</span><br><span class="line">            - node_modules</span><br><span class="line">          key: v2-dependencies-&#123;&#123; checksum &quot;package.json&quot; &#125;&#125;</span><br><span class="line">      - persist_to_workspace:</span><br><span class="line">          root: .</span><br><span class="line">          paths:</span><br><span class="line">            - node_modules</span><br><span class="line">  build:</span><br><span class="line">    &lt;&lt;: *defaults</span><br><span class="line">    steps:</span><br><span class="line">      - checkout</span><br><span class="line">      - attach_workspace:</span><br><span class="line">          at: .</span><br><span class="line">      - run: yarn build</span><br><span class="line">      # 持久化，意思就是 dist目录不删除</span><br><span class="line">      - persist_to_workspace:</span><br><span class="line">          root: .</span><br><span class="line">          paths:</span><br><span class="line">            - dist</span><br><span class="line">            # 这三个文件必须有才能发布</span><br><span class="line">            - package.json</span><br><span class="line">            - LICENSE</span><br><span class="line">            - README.md</span><br><span class="line">  test:</span><br><span class="line">    &lt;&lt;: *defaults</span><br><span class="line">    steps:</span><br><span class="line">      - checkout</span><br><span class="line">      - attach_workspace:</span><br><span class="line">          at: .</span><br><span class="line">      - run: yarn ci</span><br><span class="line">      - store_test_results:</span><br><span class="line">          path: test-results</span><br><span class="line">  publish:</span><br><span class="line">    &lt;&lt;: *defaults</span><br><span class="line">    steps:</span><br><span class="line">      # 把 build产生的目录 放在当前目录</span><br><span class="line">      - attach_workspace:</span><br><span class="line">          at: .</span><br><span class="line">      - run: npm publish</span><br><span class="line"></span><br><span class="line">workflows:</span><br><span class="line">  version: 2</span><br><span class="line">  build_accept_deploy:</span><br><span class="line">    jobs:</span><br><span class="line">      - prepare</span><br><span class="line">      - build:</span><br><span class="line">          requires:</span><br><span class="line">            - test</span><br><span class="line">      - test:</span><br><span class="line">          requires:</span><br><span class="line">            - prepare</span><br><span class="line">      # 新增 pubish的依赖 就是先打包 </span><br><span class="line">      - publish:</span><br><span class="line">          requires:</span><br><span class="line">            - build</span><br></pre></td></tr></table></figure>
<blockquote>
<p>提交代码 </p>
</blockquote>
<ol>
<li>去 <a href="https://circleci.com/dashboard" target="_blank" rel="noopener">https://circleci.com/dashboard</a> 看你的项目 publish失败了， 因为没法登录 npm啊 </li>
<li>无论如何不要泄漏你的密码</li>
<li>无论如何不要泄漏你的密码</li>
<li>无论如何不要泄漏你的密码</li>
</ol>
<h4 id="npm-token"><a href="#npm-token" class="headerlink" title="npm token"></a>npm token</h4><ol>
<li>登录你的npm</li>
<li>右上角你头像点击 tokens</li>
<li>Create New Token 然后选择 read and publish &gt; create token</li>
<li>复制你的那一串token 形如 add5b0f1-1111-4036-dd11-3118e4bfd279 我这个是假的</li>
<li>到你的 circle ci 点击 左侧 jobs 选中你的项目,右边小齿轮(settings)</li>
<li>选择 Environment Variables 环境变量</li>
<li><p>点击 Add Variable</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">name: NPM_TOKEN</span><br><span class="line">value: add5b0f1-1111-4036-dd11-3118e4bfd279</span><br><span class="line"></span><br><span class="line">点击 Add Variable</span><br><span class="line">添加之后它就作为脚本的环境变量，你可以读取到</span><br></pre></td></tr></table></figure>
</li>
<li><p>回去继续发布我们的代码，还是失败。</p>
</li>
<li><p>因为你没告诉脚本环境变量 token 在哪里</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- run: npm config set //registry.npmjs.org/:_authToken $NPM_TOKEN</span><br></pre></td></tr></table></figure>
<p> 完整版</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">#https://github.com/revolunet/create-react-app-circleci/blob/master/.circleci/config.yml</span><br><span class="line">defaults: &amp;defaults</span><br><span class="line">docker:</span><br><span class="line">    # 我们使用 node8来测试</span><br><span class="line">    - image: circleci/node:8</span><br><span class="line"># circleci的 version</span><br><span class="line">version: 2</span><br><span class="line">jobs:</span><br><span class="line"># 准备阶段</span><br><span class="line">prepare:</span><br><span class="line">    &lt;&lt;: *defaults</span><br><span class="line">    steps:</span><br><span class="line">    # 迁出代码</span><br><span class="line">    - checkout</span><br><span class="line">    # 根据当前的package.json 创建一个 md5 把它当作key 创建一个缓存，加速之后代码的运行，只要package.json里面没有变化</span><br><span class="line">    # 就可以使用上次的缓存，不用从头安装</span><br><span class="line">    - restore_cache:</span><br><span class="line">        keys:</span><br><span class="line">            - v2-dependencies-&#123;&#123; checksum &quot;package.json&quot; &#125;&#125;</span><br><span class="line">    - run: yarn install</span><br><span class="line">    - save_cache:</span><br><span class="line">        paths:</span><br><span class="line">            - node_modules</span><br><span class="line">        key: v2-dependencies-&#123;&#123; checksum &quot;package.json&quot; &#125;&#125;</span><br><span class="line">    - persist_to_workspace:</span><br><span class="line">        root: .</span><br><span class="line">        paths:</span><br><span class="line">            - node_modules</span><br><span class="line">build:</span><br><span class="line">    &lt;&lt;: *defaults</span><br><span class="line">    steps:</span><br><span class="line">    - checkout</span><br><span class="line">    - attach_workspace:</span><br><span class="line">        at: .</span><br><span class="line">    - run: yarn build</span><br><span class="line">    # 持久化，意思就是 dist目录不删除</span><br><span class="line">    - persist_to_workspace:</span><br><span class="line">        root: .</span><br><span class="line">        paths:</span><br><span class="line">            - dist</span><br><span class="line">            # 这三个文件必须有才能发布</span><br><span class="line">            - package.json</span><br><span class="line">            - LICENSE</span><br><span class="line">            - README.md</span><br><span class="line">test:</span><br><span class="line">    &lt;&lt;: *defaults</span><br><span class="line">    steps:</span><br><span class="line">    - checkout</span><br><span class="line">    - attach_workspace:</span><br><span class="line">        at: .</span><br><span class="line">    - run: yarn ci</span><br><span class="line">    - store_test_results:</span><br><span class="line">        path: test-results</span><br><span class="line">publish:</span><br><span class="line">    &lt;&lt;: *defaults</span><br><span class="line">    steps:</span><br><span class="line">    # 把 build产生的目录 放在当前目录</span><br><span class="line">    - attach_workspace:</span><br><span class="line">        at: .</span><br><span class="line">    - run: npm config set //registry.npmjs.org/:_authToken $NPM_TOKEN</span><br><span class="line">    - run: npm publish</span><br><span class="line"></span><br><span class="line">workflows:</span><br><span class="line">version: 2</span><br><span class="line">build_accept_deploy:</span><br><span class="line">    jobs:</span><br><span class="line">    - prepare</span><br><span class="line">    - build:</span><br><span class="line">        requires:</span><br><span class="line">            - test</span><br><span class="line">    - test:</span><br><span class="line">        requires:</span><br><span class="line">            - prepare</span><br><span class="line">    - publish:</span><br><span class="line">        requires:</span><br><span class="line">            - build</span><br></pre></td></tr></table></figure>
</li>
<li><p>记得修改在修改一下版本好 在 push 代码</p>
</li>
</ol>
<blockquote>
<h3 id="此时我们做到了-push之后，自动测试-自动发布"><a href="#此时我们做到了-push之后，自动测试-自动发布" class="headerlink" title="此时我们做到了 push之后，自动测试 自动发布"></a>此时我们做到了 push之后，自动测试 自动发布</h3></blockquote>
<h3 id="但是你每次改还要更改版本号，能不能自动改版本号？"><a href="#但是你每次改还要更改版本号，能不能自动改版本号？" class="headerlink" title="但是你每次改还要更改版本号，能不能自动改版本号？"></a>但是你每次改还要更改版本号，能不能自动改版本号？</h3><ul>
<li>可以</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 自动改你版本的最后一位</span><br><span class="line">npm version patch</span><br><span class="line"></span><br><span class="line"># 自动改你版本的倒数第二位</span><br><span class="line">npm version minor</span><br><span class="line"></span><br><span class="line"># 自动改你版本的第一位</span><br><span class="line">npm version major</span><br></pre></td></tr></table></figure>
<blockquote>
<h4 id="任何一个包都有这样一个版本"><a href="#任何一个包都有这样一个版本" class="headerlink" title="任何一个包都有这样一个版本"></a>任何一个包都有这样一个版本</h4></blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">A.B.C</span><br><span class="line"></span><br><span class="line">分别对应</span><br><span class="line">major.minor.patch</span><br><span class="line"></span><br><span class="line">patch 代表补丁，没有API的变化</span><br><span class="line">minor 代表 API有变化，但不影响现有代码</span><br><span class="line">major 代表 API变化很大，影响现有代码</span><br></pre></td></tr></table></figure>
<blockquote>
<h4 id="我们的项目根目录-新建-deploy-sh"><a href="#我们的项目根目录-新建-deploy-sh" class="headerlink" title="我们的项目根目录 新建 deploy.sh"></a>我们的项目根目录 新建 deploy.sh</h4></blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/env bash</span><br><span class="line">npm version patch</span><br><span class="line">git push</span><br></pre></td></tr></table></figure>
<p>分配执行权限</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 777 ./deploy.sh</span><br></pre></td></tr></table></figure>
<p>本地运行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">./deploy.sh</span><br><span class="line"></span><br><span class="line"># 如果运行不了你就</span><br><span class="line">sh ./deploy.sh</span><br></pre></td></tr></table></figure>
<blockquote>
<p>我们想动态指定发布的版本而不是写死 <code>patch</code></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/env bash</span><br><span class="line">npm version $1</span><br><span class="line">git push</span><br></pre></td></tr></table></figure>
<p>这样你就可以传参数来指定发布的版本了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./deploy.sh patch</span><br></pre></td></tr></table></figure>
<blockquote>
<p>但是有时候你改了代码 然后在<code>./deploy.sh</code> 就会失败，因为你必须先提交代码才能执行它</p>
</blockquote>
<p>所以我们应该修改下 deploy.sh</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/env bash</span><br><span class="line">npm version $1 &amp;&amp; git push</span><br></pre></td></tr></table></figure>
<p>再次运行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./deploy.sh patch</span><br></pre></td></tr></table></figure>
<blockquote>
<h4 id="假如我正常提交代码后-git-push-然后CI通过后自动帮我们-publish-因为只要-build-之后就会-publish-这样会出错的"><a href="#假如我正常提交代码后-git-push-然后CI通过后自动帮我们-publish-因为只要-build-之后就会-publish-这样会出错的" class="headerlink" title="假如我正常提交代码后 git push 然后CI通过后自动帮我们 publish,因为只要 build 之后就会 publish 这样会出错的"></a>假如我正常提交代码后 <code>git push</code> 然后CI通过后自动帮我们 publish,因为只要 build 之后就会 publish 这样会出错的</h4></blockquote>
<h4 id="根据-tag-来发布"><a href="#根据-tag-来发布" class="headerlink" title="根据 tag 来发布"></a>根据 tag 来发布</h4><p><a href="https://discuss.circleci.com/t/workflow-job-with-tag-filter-being-run-for-every-commit/20762" target="_blank" rel="noopener">搜索 circle tag filter</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">workflows:</span><br><span class="line">  version: 2</span><br><span class="line">  build_accept_deploy:</span><br><span class="line">    jobs:</span><br><span class="line">      - prepare</span><br><span class="line">      - build:</span><br><span class="line">          requires:</span><br><span class="line">            - test</span><br><span class="line">      - test:</span><br><span class="line">          requires:</span><br><span class="line">            - prepare</span><br><span class="line">      - publish:</span><br><span class="line">          requires:</span><br><span class="line">            - build</span><br><span class="line">          filters:</span><br><span class="line">            tags:</span><br><span class="line">              only: /v[0-9]+(\.[0-9]+)*/</span><br><span class="line">            # 忽略所有分支，我只看 tag </span><br><span class="line">            branches:</span><br><span class="line">              ignore: /.*/</span><br></pre></td></tr></table></figure>
<h3 id="如何给我们的项目加上小标志"><a href="#如何给我们的项目加上小标志" class="headerlink" title="如何给我们的项目加上小标志"></a>如何给我们的项目加上小标志</h3><ul>
<li>github 小图标<a href="https://github.com/badges/shields" target="_blank" rel="noopener">github badgets generator</a></li>
</ul>
<ul>
<li>circleci 小图标<a href="https://circleci.com/docs/2.0/status-badges/" target="_blank" rel="noopener">circleci badge</a><ul>
<li>在你的 <code>circleci</code> 选择 <code>Status Badges</code></li>
<li>选择默认分支</li>
<li>他会给你个markdown 的代码 复制到你项目的 readme.md</li>
</ul>
</li>
<li>npm 小图标<a href="https://badge.fury.io/" target="_blank" rel="noopener">npm badge</a><ul>
<li>搜索你的 UI库 如我的 package.json 里的name 是<code>fui_t888</code> 得到一个 markdown内容复制到你的 readme.md</li>
</ul>
</li>
</ul>
<h3 id="js-jsx-ts-tsx的区别"><a href="#js-jsx-ts-tsx的区别" class="headerlink" title="js  jsx ts tsx的区别"></a><code>js</code>  <code>jsx</code> <code>ts</code> <code>tsx</code>的区别</h3><ul>
<li><p>jsx 是 js 的扩展，支持 用 js 的方式写 标签 是xml标准</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">return (&lt;div&gt;&lt;/div&gt;)</span><br><span class="line">就不用这样</span><br><span class="line">React.createElement(&apos;div&apos;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>js 和 ts 的区别就是 ts = Type + JavasSript 也是对js的扩展</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// js</span><br><span class="line">const a = 1</span><br><span class="line"></span><br><span class="line">// ts</span><br><span class="line">const a:number = 1</span><br></pre></td></tr></table></figure>
</li>
<li><p>tsx 是对 ts 的扩展，支持 写标签 支持 Type</p>
</li>
</ul>
<p>所以 tsx 是最厉害的</p>
<h3 id="收尾工作"><a href="#收尾工作" class="headerlink" title="收尾工作"></a>收尾工作</h3><ul>
<li>比如我们 <code>yarn test</code> 的时候，它帮我们生成了 测试覆盖，但是这个过程会很慢，我们一般来说不需要知道这个测试覆盖率。只有 CI 生成了才去看</li>
</ul>
<p>新建 jest.config.ci.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const base = require(&apos;./jest.config&apos;)</span><br><span class="line">module.exports = Object.assign(&#123;&#125;,base,&#123;</span><br><span class="line">    reporters: [&quot;jest-junit&quot;],</span><br><span class="line">    collectCoverage: true,</span><br><span class="line">    // &quot;lib/**/*.&#123;ts,tsx&#125;&quot; lib里的文件都要测,除了__tests__里的，jest的默认规则是排除有__tests__目录的文件</span><br><span class="line">    // &quot;!**/node_modules/**&quot; 任意包含node_modules的目录不测</span><br><span class="line">    collectCoverageFrom: [&quot;lib/**/*.&#123;ts,tsx&#125;&quot;, &quot;!**/node_modules/**&quot;],</span><br><span class="line">    // 生成的报告放在那里</span><br><span class="line">    coverageDirectory: &apos;coverage&apos;,</span><br><span class="line">    coverageReporters: [&apos;text&apos;, &apos;lcov&apos;],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>修改 jest.config.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">// https://jestjs.io/docs/en/configuration.html</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  verbose: true,</span><br><span class="line">  clearMocks: false,</span><br><span class="line">  reporters: [&quot;default&quot;],</span><br><span class="line"></span><br><span class="line">  collectCoverage: false,</span><br><span class="line">  // // &quot;lib/**/*.&#123;ts,tsx&#125;&quot; lib里的文件都要测,除了__tests__里的，jest的默认规则是排除有__tests__目录的文件</span><br><span class="line">  // // &quot;!**/node_modules/**&quot; 任意包含node_modules的目录不测</span><br><span class="line">  // collectCoverageFrom: [&quot;lib/**/*.&#123;ts,tsx&#125;&quot;, &quot;!**/node_modules/**&quot;],</span><br><span class="line">  // // 生成的报告放在那里</span><br><span class="line">  // coverageDirectory: &apos;coverage&apos;,</span><br><span class="line">  // coverageReporters: [&apos;text&apos;, &apos;lcov&apos;],</span><br><span class="line"></span><br><span class="line">  moduleFileExtensions: [&apos;js&apos;, &apos;jsx&apos;, &apos;ts&apos;, &apos;tsx&apos;],</span><br><span class="line">  moduleDirectories: [&apos;node_modules&apos;],</span><br><span class="line">  globals: &#123;</span><br><span class="line">    &apos;ts-jest&apos;: &#123;</span><br><span class="line">      tsConfig: &apos;tsconfig.test.json&apos;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  moduleNameMapper: &#123;</span><br><span class="line">    &quot;\\.(jpg|jpeg|png|gif|eot|otf|webp|svg|ttf|woff|woff2|mp4|webm|wav|mp3|m4a|aac|oga)$&quot;: &quot;&lt;rootDir&gt;/test/__mocks__/file-mock.js&quot;,</span><br><span class="line">    &quot;\\.(css|less|sass|scss)$&quot;: &quot;&lt;rootDir&gt;/test/__mocks__/object-mock.js&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  testMatch: [&apos;&lt;rootDir&gt;/**/__tests__/**/*.unit.(js|jsx|ts|tsx)&apos;],</span><br><span class="line">  transform: &#123;</span><br><span class="line">    &quot;^.+unit\\.(js|jsx)$&quot;: &quot;babel-jest&quot;,</span><br><span class="line">    &apos;^.+\\.(ts|tsx)$&apos;: &apos;ts-jest&apos;,</span><br><span class="line">  &#125;,</span><br><span class="line">  setupFilesAfterEnv: [&quot;&lt;rootDir&gt;test/setupTests.js&quot;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>修改 package.json</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">针对 ci 才使用 覆盖率测试 ，我们的测试 使用默认的 jest.config.js</span><br><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;ci&quot;: &quot;cross-env NODE_ENV=test JEST_JUNIT_OUTPUT=./test-results/jest/results.xml jest --config=jest.config.ci.js&quot;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<h3 id="制作我们的简陋官网，来鼠标点点点"><a href="#制作我们的简陋官网，来鼠标点点点" class="headerlink" title="制作我们的简陋官网，来鼠标点点点"></a>制作我们的简陋官网，来鼠标点点点</h3><p>修改 webpack.config.dev.js 里的入口文件，我们用example.tsx覆盖默认的入口。因为<strong>这是 dev 环境</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">const base = require(&apos;./webpack.config&apos;)</span><br><span class="line">const HtmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;)</span><br><span class="line">module.exports = Object.assign(&#123;&#125;,base,&#123;</span><br><span class="line">    mode:&apos;development&apos;,</span><br><span class="line">    entry:&#123;</span><br><span class="line">        example:&apos;./example.tsx&apos;</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins:[</span><br><span class="line">        new HtmlWebpackPlugin(&#123;</span><br><span class="line">            template:&apos;example.html&apos;</span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>修改 index.html 为 example.html</p>
<p>跟路径新建 example.tsx</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>启动我们项目</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn start</span><br></pre></td></tr></table></figure>
<p>运行成功。 我们需要一个左侧菜单右侧显示组件的面板</p>
<p>此时我们需要 router</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yarn add react-router-dom@5.0.0</span><br><span class="line"></span><br><span class="line">yarn add --dev @types/react-router-dom@4.3.1</span><br></pre></td></tr></table></figure>
<p>修改我们的 example.tsx</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">import React from &apos;react&apos;;</span><br><span class="line">import ReactDOM from &apos;react-dom&apos;;</span><br><span class="line">import &#123;HashRouter as Router, Route, NavLink&#125; from &apos;react-router-dom&apos;;</span><br><span class="line"></span><br><span class="line">import IconExample from &apos;./lib/icon/icon.example&apos;;</span><br><span class="line">import ButtonExample from &apos;./lib/button/button.example&apos;;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">    &lt;Router&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;header&gt;</span><br><span class="line">                &lt;div className=&quot;logo&quot;&gt;</span><br><span class="line">                    FUI</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            &lt;/header&gt;</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;aside&gt;</span><br><span class="line">                    &lt;h2&gt;组件&lt;/h2&gt;</span><br><span class="line">                    &lt;ul&gt;</span><br><span class="line">                        &lt;li&gt;</span><br><span class="line">                            &lt;NavLink to=&quot;/icon&quot;&gt;Icon&lt;/NavLink&gt;</span><br><span class="line">                        &lt;/li&gt;</span><br><span class="line">                        &lt;li&gt;</span><br><span class="line">                            &lt;NavLink to=&quot;/button&quot;&gt;Button&lt;/NavLink&gt;</span><br><span class="line">                        &lt;/li&gt;</span><br><span class="line">                    &lt;/ul&gt;</span><br><span class="line">                &lt;/aside&gt;</span><br><span class="line">                &lt;main&gt;</span><br><span class="line">                    &lt;Route path=&quot;/icon&quot; component=&#123;IconExample&#125;/&gt;</span><br><span class="line">                    &lt;Route path=&quot;/button&quot; component=&#123;ButtonExample&#125;/&gt;</span><br><span class="line">                &lt;/main&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/Router&gt;</span><br><span class="line">,document.querySelector(&apos;#root&apos;));</span><br></pre></td></tr></table></figure>
<p>新建 lib/icon/icon.example.tsx</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import React from &apos;react&apos;;</span><br><span class="line">import Icon from &apos;./icon&apos;</span><br><span class="line">const IconExample:React.FunctionComponent = ()=&gt;&#123;</span><br><span class="line">    return (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;Icon name=&quot;alipay&quot;/&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default IconExample;</span><br></pre></td></tr></table></figure>
<p>新建 lib/button/button.example.tsx</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import React from &apos;react&apos;;</span><br><span class="line">const ButtonExample:React.FunctionComponent = ()=&gt;&#123;</span><br><span class="line">    return (&lt;div&gt;hi!button&lt;/div&gt;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default ButtonExample;</span><br></pre></td></tr></table></figure>
<p>此时 我们的项目虽然没样式，但是点击对应的组件，就显示对应的页面了</p>
<h4 id="代码仓库"><a href="#代码仓库" class="headerlink" title="代码仓库"></a>代码仓库</h4><ul>
<li><a href="https://github.com/slTrust/react-gulu-test-4/" target="_blank" rel="noopener">所有代码</a></li>
<li><a href="https://github.com/slTrust/react-gulu-test-4/commit/1a2970ba5c09f0f81298d863f0dbb2e483d3d806" target="_blank" rel="noopener">本次commit</a></li>
</ul>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/ReactWheels/">ReactWheels</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/06/26/ReactWheels06-01测试覆盖率和持续集成上/" title="ReactWheels06-01测试覆盖率和持续集成上" itemprop="url">ReactWheels06-01测试覆盖率和持续集成上</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Stevin" target="_blank" itemprop="author">Stevin</a>
		
  <p class="article-time">
    <time datetime="2019-06-26T14:10:49.000Z" itemprop="datePublished"> Published 2019-06-26</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="什么是工程化"><a href="#什么是工程化" class="headerlink" title="什么是工程化"></a>什么是工程化</h3><table>
<thead>
<tr>
<th>table</th>
<th>小作坊</th>
<th>工程化</th>
</tr>
</thead>
<tbody>
<tr>
<td>代码管理</td>
<td>qq传</td>
<td>git/svn</td>
</tr>
<tr>
<td>部署代码</td>
<td>登录机器手动操作</td>
<td>一键部署</td>
</tr>
<tr>
<td>代码质量</td>
<td>靠感觉</td>
<td>工具 + review</td>
</tr>
<tr>
<td>性能优化</td>
<td>靠感觉</td>
<td>数据上报</td>
</tr>
<tr>
<td>需求管理</td>
<td>下周上线</td>
<td>任务管理(排期)</td>
</tr>
</tbody>
</table>
<p>工程化的核心：</p>
<ol>
<li>自动化——能用机器做的，绝不给人做(人会犯错)</li>
<li>工业化——铁打的硬盘，流水的兵(没有任何人是独一无二的，所有人都是可替代的)<ul>
<li>为什么有些代码只能一个人改？因为没文档！这是不对的</li>
</ul>
</li>
</ol>
<h3 id="测试覆盖率"><a href="#测试覆盖率" class="headerlink" title="测试覆盖率"></a>测试覆盖率</h3><p>代表着代码质量</p>
<ol>
<li>配置</li>
<li>代码覆盖率 vs 函数覆盖率 vs 分支覆盖率</li>
</ol>
<blockquote>
<h4 id="继续我们的造轮子-先-yarn-test-跑通测试"><a href="#继续我们的造轮子-先-yarn-test-跑通测试" class="headerlink" title="继续我们的造轮子 先 yarn test 跑通测试"></a>继续我们的造轮子 先 yarn test 跑通测试</h4></blockquote>
<ul>
<li><a href="https://github.com/slTrust/react-gulu-test-3/tree/0a816e8ca0a0ffa64816ec9d4bf5071b8f21622a" target="_blank" rel="noopener">在这个版本上迭代</a></li>
<li>clone 之后 安装依赖后 yarn test</li>
</ul>
<blockquote>
<h4 id="修改-jest-config-js"><a href="#修改-jest-config-js" class="headerlink" title="修改 jest.config.js"></a>修改 jest.config.js</h4></blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># 修改为 true</span><br><span class="line">collectCoverage:true</span><br><span class="line"># 然后运行 yarn test,运行生成一个表格</span><br><span class="line"></span><br><span class="line">-----------------|----------|----------|----------|----------|-------------------|</span><br><span class="line">File             |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |</span><br><span class="line">-----------------|----------|----------|----------|----------|-------------------|</span><br><span class="line">All files        |       95 |      100 |       75 |      100 |                   |</span><br><span class="line"> lib             |      100 |      100 |      100 |      100 |                   |</span><br><span class="line">  button.tsx     |      100 |      100 |      100 |      100 |                   |</span><br><span class="line"> lib/helpers     |      100 |      100 |      100 |      100 |                   |</span><br><span class="line">  classes.tsx    |      100 |      100 |      100 |      100 |                   |</span><br><span class="line"> lib/icon        |    92.86 |      100 |       50 |      100 |                   |</span><br><span class="line">  icon.tsx       |      100 |      100 |      100 |      100 |                   |</span><br><span class="line">  importIcons.js |       75 |      100 |        0 |      100 |                   |</span><br><span class="line">-----------------|----------|----------|----------|----------|-------------------|</span><br></pre></td></tr></table></figure>
<ul>
<li>stmts 语句覆盖率 100代表所有语句都测试了， 75代表只有75%的语句测试了</li>
<li>branch 分支覆盖率</li>
<li>funcs 函数覆盖率</li>
<li>Lines 行数覆盖率，但这个数字对我们没有实际意义。我们需要再加一个配置，就是告诉我哪一行有问题</li>
</ul>
<p><strong>再次修改 jest.config.js</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">collectCoverage: true,</span><br><span class="line">reporters: [&quot;default&quot;,&quot;jest-junit&quot;]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 运行 yarn test,报错了</span><br><span class="line">Error: Could not resolve a module for a custom reporter.</span><br><span class="line">  Module name: jest-junit</span><br><span class="line"></span><br><span class="line"># 安装依赖</span><br><span class="line">yarn add --dev jest-junit@5.2.0</span><br></pre></td></tr></table></figure>
<blockquote>
<h4 id="再次运行-yarn-test"><a href="#再次运行-yarn-test" class="headerlink" title="再次运行 yarn test"></a>再次运行 yarn test</h4></blockquote>
<p>此时我们项目里多了一个文件 ===&gt; junit.xml</p>
<p>内容如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;testsuites name=&quot;jest tests&quot; tests=&quot;9&quot; failures=&quot;0&quot; time=&quot;3.321&quot;&gt;</span><br><span class="line">  &lt;testsuite name=&quot;icon&quot; errors=&quot;0&quot; failures=&quot;0&quot; skipped=&quot;0&quot; timestamp=&quot;2019-06-26T14:32:19&quot; time=&quot;1.803&quot; tests=&quot;2&quot;&gt;</span><br><span class="line">    &lt;testcase classname=&quot;icon render successfully&quot; name=&quot;icon render successfully&quot; time=&quot;0.025&quot;&gt;</span><br><span class="line">    &lt;/testcase&gt;</span><br><span class="line">    &lt;testcase classname=&quot;icon onClick&quot; name=&quot;icon onClick&quot; time=&quot;0.057&quot;&gt;</span><br><span class="line">    &lt;/testcase&gt;</span><br><span class="line">  &lt;/testsuite&gt;</span><br><span class="line">  &lt;testsuite name=&quot;button&quot; errors=&quot;0&quot; failures=&quot;0&quot; skipped=&quot;0&quot; timestamp=&quot;2019-06-26T14:32:21&quot; time=&quot;0.185&quot; tests=&quot;1&quot;&gt;</span><br><span class="line">    &lt;testcase classname=&quot;button 是个 div&quot; name=&quot;button 是个 div&quot; time=&quot;0.002&quot;&gt;</span><br><span class="line">    &lt;/testcase&gt;</span><br><span class="line">  &lt;/testsuite&gt;</span><br><span class="line">  &lt;testsuite name=&quot;我的第一个测试用例&quot; errors=&quot;0&quot; failures=&quot;0&quot; skipped=&quot;0&quot; timestamp=&quot;2019-06-26T14:32:21&quot; time=&quot;0.135&quot; tests=&quot;1&quot;&gt;</span><br><span class="line">    &lt;testcase classname=&quot;我的第一个测试用例 1 等于 1&quot; name=&quot;我的第一个测试用例 1 等于 1&quot; time=&quot;0.002&quot;&gt;</span><br><span class="line">    &lt;/testcase&gt;</span><br><span class="line">  &lt;/testsuite&gt;</span><br><span class="line">  &lt;testsuite name=&quot;classes&quot; errors=&quot;0&quot; failures=&quot;0&quot; skipped=&quot;0&quot; timestamp=&quot;2019-06-26T14:32:22&quot; time=&quot;0.159&quot; tests=&quot;5&quot;&gt;</span><br><span class="line">    &lt;testcase classname=&quot;classes 接受 1 个 className&quot; name=&quot;classes 接受 1 个 className&quot; time=&quot;0.001&quot;&gt;</span><br><span class="line">    &lt;/testcase&gt;</span><br><span class="line">    &lt;testcase classname=&quot;classes 接受 2 个 className&quot; name=&quot;classes 接受 2 个 className&quot; time=&quot;0.001&quot;&gt;</span><br><span class="line">    &lt;/testcase&gt;</span><br><span class="line">    &lt;testcase classname=&quot;classes 接受 undefined 结果不会出现 undefined&quot; name=&quot;classes 接受 undefined 结果不会出现 undefined&quot; time=&quot;0&quot;&gt;</span><br><span class="line">    &lt;/testcase&gt;</span><br><span class="line">    &lt;testcase classname=&quot;classes 接受各种奇怪值&quot; name=&quot;classes 接受各种奇怪值&quot; time=&quot;0.007&quot;&gt;</span><br><span class="line">    &lt;/testcase&gt;</span><br><span class="line">    &lt;testcase classname=&quot;classes 接受 0 个参数&quot; name=&quot;classes 接受 0 个参数&quot; time=&quot;0.001&quot;&gt;</span><br><span class="line">    &lt;/testcase&gt;</span><br><span class="line">  &lt;/testsuite&gt;</span><br><span class="line">&lt;/testsuites&gt;</span><br></pre></td></tr></table></figure>
<p><strong>还是不够详细啊！！！</strong></p>
<p>修改 package.json里的 scripts</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// 先别管那个路径是什么，后面会说</span><br><span class="line">scripts:&#123;</span><br><span class="line"> &quot;xxx&quot;: &quot;cross-env NODE_ENV=test JEST_JUNIT_OUTPUT=./test-results/jest/results.xml jest --config=jest.config.js&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 运行 yarn xxx</span><br><span class="line">// 此时生成了 test-results/jest/results.xml  的文件内容根上次差不多，还是不够详细</span><br></pre></td></tr></table></figure>
<h3 id="更详细的测试覆盖率"><a href="#更详细的测试覆盖率" class="headerlink" title="更详细的测试覆盖率"></a>更详细的测试覆盖率</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">collectCoverage: true,</span><br><span class="line">// &quot;lib/**/*.&#123;ts,tsx&#125;&quot; lib里的文件都要测,除了__tests__里的，jest的默认规则是排除有__tests__目录的文件</span><br><span class="line">// &quot;!**/node_modules/**&quot; 任意包含node_modules的目录不测</span><br><span class="line">collectCoverageFrom: [&quot;lib/**/*.&#123;ts,tsx&#125;&quot;, &quot;!**/node_modules/**&quot;],</span><br><span class="line">// 生成的报告放在那里</span><br><span class="line">coverageDirectory: &apos;coverage&apos;,</span><br><span class="line">coverageReporters: [&apos;text&apos;, &apos;lcov&apos;],</span><br></pre></td></tr></table></figure>
<p>完整版</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">// https://jestjs.io/docs/en/configuration.html</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  verbose: true,</span><br><span class="line">  clearMocks: false,</span><br><span class="line">  reporters: [&quot;default&quot;],</span><br><span class="line"></span><br><span class="line">  collectCoverage: true,</span><br><span class="line">  collectCoverageFrom: [&quot;lib/**/*.&#123;ts,tsx&#125;&quot;, &quot;!**/node_modules/**&quot;],</span><br><span class="line">  coverageDirectory: &apos;coverage&apos;,</span><br><span class="line">  coverageReporters: [&apos;text&apos;, &apos;lcov&apos;],</span><br><span class="line"></span><br><span class="line">  moduleFileExtensions: [&apos;js&apos;, &apos;jsx&apos;, &apos;ts&apos;, &apos;tsx&apos;],</span><br><span class="line">  moduleDirectories: [&apos;node_modules&apos;],</span><br><span class="line">  globals: &#123;</span><br><span class="line">    &apos;ts-jest&apos;: &#123;</span><br><span class="line">      tsConfig: &apos;tsconfig.test.json&apos;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  moduleNameMapper: &#123;</span><br><span class="line">    &quot;\\.(jpg|jpeg|png|gif|eot|otf|webp|svg|ttf|woff|woff2|mp4|webm|wav|mp3|m4a|aac|oga)$&quot;: &quot;&lt;rootDir&gt;/test/__mocks__/file-mock.js&quot;,</span><br><span class="line">    &quot;\\.(css|less|sass|scss)$&quot;: &quot;&lt;rootDir&gt;/test/__mocks__/object-mock.js&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  testMatch: [&apos;&lt;rootDir&gt;/**/__tests__/**/*.unit.(js|jsx|ts|tsx)&apos;],</span><br><span class="line">  transform: &#123;</span><br><span class="line">    &quot;^.+unit\\.(js|jsx)$&quot;: &quot;babel-jest&quot;,</span><br><span class="line">    &apos;^.+\\.(ts|tsx)$&apos;: &apos;ts-jest&apos;,</span><br><span class="line">  &#125;,</span><br><span class="line">  setupFilesAfterEnv: [&quot;&lt;rootDir&gt;test/setupTests.js&quot;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>运行 yarn xxx</strong>,此时多了一个 coverage 目录</p>
<p>点开 coverage/lcov-report/index.html 双击在浏览器打开</p>
<p>就能看到各种详细信息</p>
<blockquote>
<h4 id="我们主要看什么"><a href="#我们主要看什么" class="headerlink" title="我们主要看什么"></a>我们主要看什么</h4></blockquote>
<ul>
<li>语句覆盖率 (如果很低说明很多代码没测)</li>
<li>分支覆盖率 </li>
</ul>
<blockquote>
<p>有的时候一行有多个语句；<br>有的时候多行组成一个语句；<br>所以语句覆盖率和行数覆盖率是不同的</p>
</blockquote>
<ul>
<li><h4 id="代码链接"><a href="#代码链接" class="headerlink" title="代码链接"></a><a href="https://github.com/slTrust/react-gulu-test-3/tree/63351f9c271b1e2eef6a24a3cdb6ddf3193c4c7d" target="_blank" rel="noopener">代码链接</a></h4></li>
</ul>
<h3 id="持续集成"><a href="#持续集成" class="headerlink" title="持续集成"></a>持续集成</h3><ol>
<li>比较流行的工具 google 搜 free ci tools</li>
<li>配置Travis CI</li>
<li>如何给自己的项目增加小图标</li>
</ol>
<blockquote>
<h4 id="新建一个仓库-react-gulu-test-4"><a href="#新建一个仓库-react-gulu-test-4" class="headerlink" title="新建一个仓库 react-gulu-test-4"></a>新建一个仓库 react-gulu-test-4</h4></blockquote>
<ul>
<li>在上次代码的终端里输入</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git remote set-url origin https://github.com/slTrust/react-gulu-test-4.git</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure>
<p>我们这次使用 circleci </p>
<ol>
<li><a href="https://circleci.com/" target="_blank" rel="noopener">google 搜 circleci </a></li>
<li>点击 登录</li>
<li>log in with github</li>
<li>左侧菜单点击 ADD PROJECTS</li>
<li>选择linux</li>
<li>选择你的仓库 我的是 react-gulu-test-4 点击 Set Up Project</li>
<li><p>创建一个目录 Add .circleci/config.yml</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">#https://github.com/revolunet/create-react-app-circleci/blob/master/.circleci/config.yml</span><br><span class="line">defaults: &amp;defaults</span><br><span class="line">docker:</span><br><span class="line">    # 我们使用 node8来测试</span><br><span class="line">    - image: circleci/node:8</span><br><span class="line"># circleci的 version</span><br><span class="line">version: 2</span><br><span class="line">jobs:</span><br><span class="line"># 准备阶段</span><br><span class="line">prepare:</span><br><span class="line">    &lt;&lt;: *defaults</span><br><span class="line">    steps:</span><br><span class="line">    # 迁出代码</span><br><span class="line">    - checkout</span><br><span class="line">    # 根据当前的package.json 创建一个 md5 把它当作key 创建一个缓存，加速之后代码的运行，只要package.json里面没有变化</span><br><span class="line">    # 就可以使用上次的缓存，不用从头安装</span><br><span class="line">    - restore_cache:</span><br><span class="line">        keys:</span><br><span class="line">            - v2-dependencies-&#123;&#123; checksum &quot;package.json&quot; &#125;&#125;</span><br><span class="line">    - run: yarn install</span><br><span class="line">    - save_cache:</span><br><span class="line">        paths:</span><br><span class="line">            - node_modules</span><br><span class="line">        key: v2-dependencies-&#123;&#123; checksum &quot;package.json&quot; &#125;&#125;</span><br><span class="line">    - persist_to_workspace:</span><br><span class="line">        root: .</span><br><span class="line">        paths:</span><br><span class="line">            - node_modules</span><br><span class="line">build:</span><br><span class="line">    &lt;&lt;: *defaults</span><br><span class="line">    steps:</span><br><span class="line">    - checkout</span><br><span class="line">    - attach_workspace:</span><br><span class="line">        at: .</span><br><span class="line">    - run: yarn build</span><br><span class="line">    - persist_to_workspace:</span><br><span class="line">        root: .</span><br><span class="line">        paths:</span><br><span class="line">            - dist</span><br><span class="line">test:</span><br><span class="line">    &lt;&lt;: *defaults</span><br><span class="line">    steps:</span><br><span class="line">    - checkout</span><br><span class="line">    - attach_workspace:</span><br><span class="line">        at: .</span><br><span class="line">    - run: yarn ci</span><br><span class="line">    - store_test_results:</span><br><span class="line">        path: test-results</span><br><span class="line"></span><br><span class="line">workflows:</span><br><span class="line">version: 2</span><br><span class="line">build_accept_deploy:</span><br><span class="line">    jobs:</span><br><span class="line">    - prepare</span><br><span class="line">    - build:</span><br><span class="line">        requires:</span><br><span class="line">            - test</span><br><span class="line">    - test:</span><br><span class="line">        requires:</span><br><span class="line">            - prepare</span><br></pre></td></tr></table></figure>
</li>
<li><p>push 你本地的代码</p>
</li>
<li>点击一下 Start Building</li>
<li>test的过程失败了。 因为 不知道 yarn ci是什么</li>
<li>修改 package里的 script里的 xxx 改为 ci 再次提交</li>
<li>测试成功了！ 但是无法看到测试覆盖率的详情！</li>
<li>因为我们少了配置 jest.config.js里<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// 添加 jest-junit</span><br><span class="line">reporters: [&quot;default&quot;,&quot;jest-junit&quot;],</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 安装依赖</span><br><span class="line">yarn add --dev jest-junit@6.3.0</span><br><span class="line"></span><br><span class="line">// 运行 yarn ci</span><br><span class="line">此时多了一个文件 test-results/jest/results.xml </span><br><span class="line">这个文件主要是给 ci 看的 不是给人看的</span><br><span class="line">// 所以它不该被提交 添加在 .gitignore 添加忽略</span><br><span class="line"></span><br><span class="line">再次 push代码</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="发布代码"><a href="#发布代码" class="headerlink" title="发布代码"></a>发布代码</h3><p>修改 package.json</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 添加如下内容</span><br><span class="line"> &quot;files&quot;:[&quot;/dist&quot;],</span><br></pre></td></tr></table></figure>
<p>如果提示 “没权限”，你就登录一下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># 记得先切换为默认源</span><br><span class="line">npm adduser  xxx</span><br><span class="line">Username: xxx</span><br><span class="line">Password:  xxx</span><br><span class="line">Email: (this IS public) xxx</span><br><span class="line">Logged in as almost_00 on https://registry.npmjs.org/.</span><br><span class="line">// 显示登录成功</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">npm publish </span><br><span class="line"># 如果 还提示没权限 请修改 package.json里的name 和version</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 401 没登录</span><br><span class="line"># 403 没权限</span><br></pre></td></tr></table></figure>
<blockquote>
<p>yarn 发布代码</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 只要你登录了</span><br><span class="line">可以直接</span><br><span class="line">yarn publish</span><br></pre></td></tr></table></figure>
<blockquote>
<p>测试我们的包</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">cd ~/Desktop</span><br><span class="line">mkdir aa</span><br><span class="line">cd aa</span><br><span class="line">npm init -y</span><br><span class="line"># npm i 你的包名</span><br><span class="line">npm i fui_t888</span><br><span class="line"></span><br><span class="line">发现 node_modules 你的包 dist里是空的 ，原因是 yarn publish 没发布全， 我们package.json 里的 files写的有问题</span><br><span class="line">而我们重新用 npm publish 后代码是好的</span><br></pre></td></tr></table></figure>
<blockquote>
<p>修改 package.json</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;files&quot;: [&quot;/dist/**/*&quot;]</span><br></pre></td></tr></table></figure>
<p>再次发布代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yarn publish</span><br><span class="line">或</span><br><span class="line">npm publish</span><br></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/ReactWheels/">ReactWheels</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <a class="extend prev" rel="prev" href="/page/14/"><span></span>Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/">13</a><a class="page-number" href="/page/14/">14</a><span class="page-number current">15</span><a class="page-number" href="/page/16/">16</a><a class="page-number" href="/page/17/">17</a><span class="space">&hellip;</span><a class="page-number" href="/page/52/">52</a><a class="extend next" rel="next" href="/page/16/">Next<span></span></a>
  </nav>

</div>
      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">

  


  

  
<div class="tagslist">
	<p class="asidetitle">Tags</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/oak/" title="oak">oak<sup>71</sup></a></li>
			
		
			
				<li><a href="/tags/前端知识点/" title="前端知识点">前端知识点<sup>43</sup></a></li>
			
		
			
				<li><a href="/tags/java/" title="java">java<sup>37</sup></a></li>
			
		
			
				<li><a href="/tags/Node后端/" title="Node后端">Node后端<sup>36</sup></a></li>
			
		
			
				<li><a href="/tags/M06/" title="M06">M06<sup>29</sup></a></li>
			
		
			
				<li><a href="/tags/fullstack/" title="fullstack">fullstack<sup>27</sup></a></li>
			
		
			
				<li><a href="/tags/M07/" title="M07">M07<sup>27</sup></a></li>
			
		
			
				<li><a href="/tags/python/" title="python">python<sup>26</sup></a></li>
			
		
			
				<li><a href="/tags/M08/" title="M08">M08<sup>25</sup></a></li>
			
		
			
				<li><a href="/tags/ReactWheels/" title="ReactWheels">ReactWheels<sup>24</sup></a></li>
			
		
			
				<li><a href="/tags/M04/" title="M04">M04<sup>22</sup></a></li>
			
		
			
				<li><a href="/tags/M03/" title="M03">M03<sup>20</sup></a></li>
			
		
			
				<li><a href="/tags/M02/" title="M02">M02<sup>17</sup></a></li>
			
		
			
				<li><a href="/tags/React入门/" title="React入门">React入门<sup>17</sup></a></li>
			
		
			
				<li><a href="/tags/TS入门/" title="TS入门">TS入门<sup>16</sup></a></li>
			
		
			
				<li><a href="/tags/CSS/" title="CSS">CSS<sup>10</sup></a></li>
			
		
			
				<li><a href="/tags/M01/" title="M01">M01<sup>9</sup></a></li>
			
		
			
				<li><a href="/tags/vue/" title="vue">vue<sup>8</sup></a></li>
			
		
			
				<li><a href="/tags/ES6速学/" title="ES6速学">ES6速学<sup>7</sup></a></li>
			
		
			
				<li><a href="/tags/mongodb/" title="mongodb">mongodb<sup>7</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">Links</p>
    <ul>
        
          <li>
            
            	<a href="https://coderq.com" target="_blank" title="一个面向程序员交流分享的新一代社区">码农圈</a>
            
          </li>
        
          <li>
            
            	<a href="http://wuchong.me" target="_blank" title="Jark&#39;s Blog">Jark&#39;s Blog</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS</a>
</div>

  <div class="weiboshow">
  <p class="asidetitle">Weibo</p>
    <iframe width="100%" height="119" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=119&fansRow=2&ptype=1&speed=0&skin=9&isTitle=1&noborder=1&isWeibo=0&isFans=0&uid=&verifier=b3593ceb&dpc=1"></iframe>
</div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello ,I&#39;m Larry Page in Google. <br/>
			This is my blog,believe it or not.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/2176287895" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2021 
		
		<a href="/about" target="_blank" title="Stevin">Stevin</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>












<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e6d1f421bbc9962127a50488f9ed37d1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="Back to Top"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
 </html>
